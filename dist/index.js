// @bun
var iW=Object.create;var{getPrototypeOf:_W,defineProperty:d4,getOwnPropertyNames:nW}=Object;var aW=Object.prototype.hasOwnProperty;var yB=($,B,G)=>{G=$!=null?iW(_W($)):{};let X=B||!$||!$.__esModule?d4(G,"default",{value:$,enumerable:!0}):G;for(let D of nW($))if(!aW.call(X,D))d4(X,D,{get:()=>$[D],enumerable:!0});return X};var K=($,B)=>()=>(B||$((B={exports:{}}).exports,B),B.exports);var Z$=import.meta.require;var xG=K((T1)=>{var F9=T1&&T1.__createBinding||(Object.create?function($,B,G,X){if(X===void 0)X=G;var D=Object.getOwnPropertyDescriptor(B,G);if(!D||("get"in D?!B.__esModule:D.writable||D.configurable))D={enumerable:!0,get:function(){return B[G]}};Object.defineProperty($,X,D)}:function($,B,G,X){if(X===void 0)X=G;$[X]=B[G]}),M9=T1&&T1.__setModuleDefault||(Object.create?function($,B){Object.defineProperty($,"default",{enumerable:!0,value:B})}:function($,B){$.default=B}),jG=T1&&T1.__importStar||function($){if($&&$.__esModule)return $;var B={};if($!=null){for(var G in $)if(G!=="default"&&Object.prototype.hasOwnProperty.call($,G))F9(B,$,G)}return M9(B,$),B};Object.defineProperty(T1,"__esModule",{value:!0});T1.load=T1.currentTarget=void 0;var R9=jG(Z$("path")),O9=jG(Z$("fs"));function S9(){let $=null;switch(process.platform){case"android":switch(process.arch){case"arm":return"android-arm-eabi";case"arm64":return"android-arm64"}$="Android";break;case"win32":switch(process.arch){case"x64":return"win32-x64-msvc";case"arm64":return"win32-arm64-msvc";case"ia32":return"win32-ia32-msvc"}$="Windows";break;case"darwin":switch(process.arch){case"x64":return"darwin-x64";case"arm64":return"darwin-arm64"}$="macOS";break;case"linux":switch(process.arch){case"x64":case"arm64":return b9()?`linux-${process.arch}-gnu`:`linux-${process.arch}-musl`;case"arm":return"linux-arm-gnueabihf"}$="Linux";break;case"freebsd":if(process.arch==="x64")return"freebsd-x64";$="FreeBSD";break}if($)throw new Error(`Neon: unsupported ${$} architecture: ${process.arch}`);throw new Error(`Neon: unsupported system: ${process.platform}`)}T1.currentTarget=S9;function b9(){let $=process.report?.getReport();if(typeof $!=="object"||!$||!("header"in $))return!1;let B=$.header;return typeof B==="object"&&!!B&&"glibcVersionRuntime"in B}function q9($){let B=R9.join($,"index.node");return O9.existsSync(B)?Z$(B):null}T1.load=q9});var dG=K((wM,vG)=>{var Z8={value:"SqliteError",writable:!0,enumerable:!1,configurable:!0};function Q$($,B,G){if(new.target!==Q$)return new Q$($,B);if(typeof B!=="string")throw new TypeError("Expected second argument to be a string");Error.call(this,$),Z8.value=""+$,Object.defineProperty(this,"message",Z8),Error.captureStackTrace(this,Q$),this.code=B,this.rawCode=G}Object.setPrototypeOf(Q$,Error);Object.setPrototypeOf(Q$.prototype,Error.prototype);Object.defineProperty(Q$.prototype,"name",Z8);vG.exports=Q$});var tG=K((LM,w8)=>{var __dirname="/home/seyron/Documentos/personal/BiblioBot/node_modules/.pnpm/libsql@0.4.7/node_modules/libsql",{load:k9,currentTarget:y9}=xG(),{familySync:P9,GLIBC:g9}=Z$("detect-libc");function c9(){if(process.env.LIBSQL_JS_DEV)return k9(__dirname);let $=y9();if(P9()==g9)switch($){case"linux-x64-musl":$="linux-x64-gnu";break;case"linux-arm64-musl":$="linux-arm64-gnu";break}return Z$(`@libsql/${$}`)}var{databaseOpen:m9,databaseOpenWithRpcSync:j9,databaseInTransaction:x9,databaseClose:v9,databaseSyncSync:d9,databaseSyncUntilSync:u9,databaseExecSync:l9,databasePrepareSync:i9,databaseDefaultSafeIntegers:_9,databaseLoadExtension:n9,databaseMaxWriteReplicationIndex:a9,statementRaw:t9,statementIsReader:p9,statementGet:uG,statementRun:lG,statementRowsSync:iG,statementColumns:s9,statementSafeIntegers:r9,rowsNext:o9}=c9(),_G=dG();function W8($){if($.libsqlError)return new _G($.message,$.code,$.rawCode);return $}class nG{constructor($,B){let G=B?.encryptionCipher??"aes256cbc";if(B&&B.syncUrl){var X="";if(B.syncAuth)console.warn("Warning: The `syncAuth` option is deprecated, please use `authToken` option instead."),X=B.syncAuth;else if(B.authToken)X=B.authToken;let z=B?.encryptionKey??"",Z=B?.syncPeriod??0,W=B?.readYourWrites??!0;this.db=j9($,B.syncUrl,X,G,z,Z,W)}else{let z=B?.authToken??"",Z=B?.encryptionKey??"";this.db=m9($,z,G,Z)}this.memory=$===":memory:",this.readonly=!1,this.name="",this.open=!0;let D=this.db;Object.defineProperties(this,{inTransaction:{get(){return x9(D)}}})}sync(){return d9.call(this.db)}syncUntil($){return u9.call(this.db,$)}prepare($){try{let B=i9.call(this.db,$);return new aG(B)}catch(B){throw W8(B)}}transaction($){if(typeof $!=="function")throw new TypeError("Expected first argument to be a function");let B=this,G=(D)=>{return(...z)=>{B.exec("BEGIN "+D);try{let Z=$(...z);return B.exec("COMMIT"),Z}catch(Z){throw B.exec("ROLLBACK"),Z}}},X={default:{value:G("")},deferred:{value:G("DEFERRED")},immediate:{value:G("IMMEDIATE")},exclusive:{value:G("EXCLUSIVE")},database:{value:this,enumerable:!0}};return Object.defineProperties(X.default.value,X),Object.defineProperties(X.deferred.value,X),Object.defineProperties(X.immediate.value,X),Object.defineProperties(X.exclusive.value,X),X.default.value}pragma($,B){if(B==null)B={};if(typeof $!=="string")throw new TypeError("Expected first argument to be a string");if(typeof B!=="object")throw new TypeError("Expected second argument to be an options object");let G=B.simple,X=this.prepare(`PRAGMA ${$}`,this,!0);return G?X.pluck().get():X.all()}backup($,B){throw new Error("not implemented")}serialize($){throw new Error("not implemented")}function($,B,G){if(B==null)B={};if(typeof B==="function")G=B,B={};if(typeof $!=="string")throw new TypeError("Expected first argument to be a string");if(typeof G!=="function")throw new TypeError("Expected last argument to be a function");if(typeof B!=="object")throw new TypeError("Expected second argument to be an options object");if(!$)throw new TypeError("User-defined function name cannot be an empty string");throw new Error("not implemented")}aggregate($,B){if(typeof $!=="string")throw new TypeError("Expected first argument to be a string");if(typeof B!=="object"||B===null)throw new TypeError("Expected second argument to be an options object");if(!$)throw new TypeError("User-defined function name cannot be an empty string");throw new Error("not implemented")}table($,B){if(typeof $!=="string")throw new TypeError("Expected first argument to be a string");if(!$)throw new TypeError("Virtual table module name cannot be an empty string");throw new Error("not implemented")}loadExtension(...$){n9.call(this.db,...$)}maxWriteReplicationIndex(){return a9.call(this.db)}exec($){try{l9.call(this.db,$)}catch(B){throw W8(B)}}close(){v9.call(this.db),this.open=!1}defaultSafeIntegers($){return _9.call(this.db,$??!0),this}unsafeMode(...$){throw new Error("not implemented")}}class aG{constructor($){this.stmt=$}raw($){return t9.call(this.stmt,$??!0),this}get reader(){return p9.call(this.stmt)}run(...$){try{if($.length==1&&typeof $[0]==="object")return lG.call(this.stmt,$[0]);else return lG.call(this.stmt,$.flat())}catch(B){throw W8(B)}}get(...$){if($.length==1&&typeof $[0]==="object")return uG.call(this.stmt,$[0]);else return uG.call(this.stmt,$.flat())}iterate(...$){var B=void 0;if($.length==1&&typeof $[0]==="object")B=iG.call(this.stmt,$[0]);else B=iG.call(this.stmt,$.flat());return{nextRows:Array(100),nextRowIndex:100,next(){if(this.nextRowIndex===100)o9.call(B,this.nextRows),this.nextRowIndex=0;let X=this.nextRows[this.nextRowIndex];if(this.nextRows[this.nextRowIndex]=void 0,!X)return{done:!0};return this.nextRowIndex++,{value:X,done:!1}},[Symbol.iterator](){return this}}}all(...$){let B=[];for(let G of this.iterate(...$))B.push(G);return B}columns(){return s9.call(this.stmt)}safeIntegers($){return r9.call(this.stmt,$??!0),this}}w8.exports=nG;w8.exports.SqliteError=_G});var A8=K((TO,gz)=>{function NQ($){var B=0,G=[];function X(){if(B--,B<$)D()}function D(){var L=G.shift();if(W.queue=G.length,L)Z(L.fn).then(L.resolve).catch(L.reject)}function z(L){return new Promise(function(Y,w){G.push({fn:L,resolve:Y,reject:w}),W.queue=G.length})}function Z(L){B++;try{return Promise.resolve(L()).then(function(Y){return X(),Y},function(Y){throw X(),Y})}catch(Y){return X(),Promise.reject(Y)}}var W=function(L){if(B>=$)return z(L);else return Z(L)};return W}function UQ($,B){var G=!1,X=this;return Promise.all($.map(function(){var D=arguments;return X(function(){if(!G)return B.apply(void 0,D).catch(function(z){throw G=!0,z})})}))}function Pz($){return $.queue=0,$.map=UQ,$}gz.exports=function($){if($)return Pz(NQ($));else return Pz(function(B){return B()})}});var D1=K((h)=>{var F8=h&&h.__extends||function(){var $=function(B,G){return $=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(X,D){X.__proto__=D}||function(X,D){for(var z in D)if(Object.prototype.hasOwnProperty.call(D,z))X[z]=D[z]},$(B,G)};return function(B,G){if(typeof G!=="function"&&G!==null)throw new TypeError("Class extends value "+String(G)+" is not a constructor or null");$(B,G);function X(){this.constructor=B}B.prototype=G===null?Object.create(G):(X.prototype=G.prototype,new X)}}(),G0=h&&h.__assign||function(){return G0=Object.assign||function($){for(var B,G=1,X=arguments.length;G<X;G++){B=arguments[G];for(var D in B)if(Object.prototype.hasOwnProperty.call(B,D))$[D]=B[D]}return $},G0.apply(this,arguments)},z0=h&&h.__awaiter||function($,B,G,X){function D(z){return z instanceof G?z:new G(function(Z){Z(z)})}return new(G||(G=Promise))(function(z,Z){function W(w){try{Y(X.next(w))}catch(Q){Z(Q)}}function L(w){try{Y(X.throw(w))}catch(Q){Z(Q)}}function Y(w){w.done?z(w.value):D(w.value).then(W,L)}Y((X=X.apply($,B||[])).next())})},X0=h&&h.__generator||function($,B){var G={label:0,sent:function(){if(z[0]&1)throw z[1];return z[1]},trys:[],ops:[]},X,D,z,Z;return Z={next:W(0),throw:W(1),return:W(2)},typeof Symbol==="function"&&(Z[Symbol.iterator]=function(){return this}),Z;function W(Y){return function(w){return L([Y,w])}}function L(Y){if(X)throw new TypeError("Generator is already executing.");while(Z&&(Z=0,Y[0]&&(G=0)),G)try{if(X=1,D&&(z=Y[0]&2?D.return:Y[0]?D.throw||((z=D.return)&&z.call(D),0):D.next)&&!(z=z.call(D,Y[1])).done)return z;if(D=0,z)Y=[Y[0]&2,z.value];switch(Y[0]){case 0:case 1:z=Y;break;case 4:return G.label++,{value:Y[1],done:!1};case 5:G.label++,D=Y[1],Y=[0];continue;case 7:Y=G.ops.pop(),G.trys.pop();continue;default:if((z=G.trys,!(z=z.length>0&&z[z.length-1]))&&(Y[0]===6||Y[0]===2)){G=0;continue}if(Y[0]===3&&(!z||Y[1]>z[0]&&Y[1]<z[3])){G.label=Y[1];break}if(Y[0]===6&&G.label<z[1]){G.label=z[1],z=Y;break}if(z&&G.label<z[2]){G.label=z[2],G.ops.push(Y);break}if(z[2])G.ops.pop();G.trys.pop();continue}Y=B.call($,G)}catch(w){Y=[6,w],D=0}finally{X=z=0}if(Y[0]&5)throw Y[1];return{value:Y[0]?Y[1]:void 0,done:!0}}};Object.defineProperty(h,"__esModule",{value:!0});h.TextApiResponse=h.BlobApiResponse=h.VoidApiResponse=h.JSONApiResponse=h.canConsumeForm=h.mapValues=h.querystring=h.exists=h.COLLECTION_FORMATS=h.RequiredError=h.FetchError=h.ResponseError=h.BaseAPI=h.DefaultConfig=h.Configuration=h.BASE_PATH=void 0;h.BASE_PATH="https://api.pinecone.io".replace(/\/+$/,"");var nz=function(){function $(B){if(B===void 0)B={};this.configuration=B}return Object.defineProperty($.prototype,"config",{set:function(B){this.configuration=B},enumerable:!1,configurable:!0}),Object.defineProperty($.prototype,"basePath",{get:function(){return this.configuration.basePath!=null?this.configuration.basePath:h.BASE_PATH},enumerable:!1,configurable:!0}),Object.defineProperty($.prototype,"fetchApi",{get:function(){return this.configuration.fetchApi},enumerable:!1,configurable:!0}),Object.defineProperty($.prototype,"middleware",{get:function(){return this.configuration.middleware||[]},enumerable:!1,configurable:!0}),Object.defineProperty($.prototype,"queryParamsStringify",{get:function(){return this.configuration.queryParamsStringify||M8},enumerable:!1,configurable:!0}),Object.defineProperty($.prototype,"username",{get:function(){return this.configuration.username},enumerable:!1,configurable:!0}),Object.defineProperty($.prototype,"password",{get:function(){return this.configuration.password},enumerable:!1,configurable:!0}),Object.defineProperty($.prototype,"apiKey",{get:function(){var B=this.configuration.apiKey;if(B)return typeof B==="function"?B:function(){return B};return},enumerable:!1,configurable:!0}),Object.defineProperty($.prototype,"accessToken",{get:function(){var B=this,G=this.configuration.accessToken;if(G)return typeof G==="function"?G:function(){return z0(B,void 0,void 0,function(){return X0(this,function(X){return[2,G]})})};return},enumerable:!1,configurable:!0}),Object.defineProperty($.prototype,"headers",{get:function(){return this.configuration.headers},enumerable:!1,configurable:!0}),Object.defineProperty($.prototype,"credentials",{get:function(){return this.configuration.credentials},enumerable:!1,configurable:!0}),$}();h.Configuration=nz;h.DefaultConfig=new nz;var AQ=function(){function $(B){if(B===void 0)B=h.DefaultConfig;var G=this;this.configuration=B,this.fetchApi=function(X,D){return z0(G,void 0,void 0,function(){var z,Z,W,H,L,Y,w,Q,H,E,C,H;return X0(this,function(T){switch(T.label){case 0:z={url:X,init:D},Z=0,W=this.middleware,T.label=1;case 1:if(!(Z<W.length))return[3,4];if(H=W[Z],!H.pre)return[3,3];return[4,H.pre(G0({fetch:this.fetchApi},z))];case 2:z=T.sent()||z,T.label=3;case 3:return Z++,[3,1];case 4:L=void 0,T.label=5;case 5:return T.trys.push([5,7,,12]),[4,(this.configuration.fetchApi||fetch)(z.url,z.init)];case 6:return L=T.sent(),[3,12];case 7:Y=T.sent(),w=0,Q=this.middleware,T.label=8;case 8:if(!(w<Q.length))return[3,11];if(H=Q[w],!H.onError)return[3,10];return[4,H.onError({fetch:this.fetchApi,url:z.url,init:z.init,error:Y,response:L?L.clone():void 0})];case 9:L=T.sent()||L,T.label=10;case 10:return w++,[3,8];case 11:if(L===void 0)if(Y instanceof Error)throw new tz(Y,"The request failed and the interceptors did not return an alternative response");else throw Y;return[3,12];case 12:E=0,C=this.middleware,T.label=13;case 13:if(!(E<C.length))return[3,16];if(H=C[E],!H.post)return[3,15];return[4,H.post({fetch:this.fetchApi,url:z.url,init:z.init,response:L.clone()})];case 14:L=T.sent()||L,T.label=15;case 15:return E++,[3,13];case 16:return[2,L]}})})},this.middleware=B.middleware}return $.prototype.withMiddleware=function(){var B,G=[];for(var X=0;X<arguments.length;X++)G[X]=arguments[X];var D=this.clone();return D.middleware=(B=D.middleware).concat.apply(B,G),D},$.prototype.withPreMiddleware=function(){var B=[];for(var G=0;G<arguments.length;G++)B[G]=arguments[G];var X=B.map(function(D){return{pre:D}});return this.withMiddleware.apply(this,X)},$.prototype.withPostMiddleware=function(){var B=[];for(var G=0;G<arguments.length;G++)B[G]=arguments[G];var X=B.map(function(D){return{post:D}});return this.withMiddleware.apply(this,X)},$.prototype.isJsonMime=function(B){if(!B)return!1;return $.jsonRegex.test(B)},$.prototype.request=function(B,G){return z0(this,void 0,void 0,function(){var X,D,z,Z;return X0(this,function(W){switch(W.label){case 0:return[4,this.createFetchParams(B,G)];case 1:return X=W.sent(),D=X.url,z=X.init,[4,this.fetchApi(D,z)];case 2:if(Z=W.sent(),Z&&(Z.status>=200&&Z.status<300))return[2,Z];throw new az(Z,"Response returned an error code")}})})},$.prototype.createFetchParams=function(B,G){return z0(this,void 0,void 0,function(){var X,D,z,Z,W,L,Y,w,Q=this;return X0(this,function(E){switch(E.label){case 0:if(X=this.configuration.basePath+B.path,B.query!==void 0&&Object.keys(B.query).length!==0)X+="?"+this.configuration.queryParamsStringify(B.query);return D=Object.assign({},this.configuration.headers,B.headers),Object.keys(D).forEach(function(C){return D[C]===void 0?delete D[C]:{}}),z=typeof G==="function"?G:function(){return z0(Q,void 0,void 0,function(){return X0(this,function(C){return[2,G]})})},Z={method:B.method,headers:D,body:B.body,credentials:this.configuration.credentials},L=[G0({},Z)],[4,z({init:Z,context:B})];case 1:if(W=G0.apply(void 0,L.concat([E.sent()])),MQ(W.body)||W.body instanceof URLSearchParams||FQ(W.body))Y=W.body;else if(this.isJsonMime(D["Content-Type"]))Y=JSON.stringify(W.body);else Y=W.body;return w=G0(G0({},W),{body:Y}),[2,{url:X,init:w}]}})})},$.prototype.clone=function(){var B=this.constructor,G=new B(this.configuration);return G.middleware=this.middleware.slice(),G},$.jsonRegex=new RegExp("^(:?application/json|[^;/ \t]+/[^;/ \t]+[+]json)[ \t]*(:?;.*)?$","i"),$}();h.BaseAPI=AQ;function FQ($){return typeof Blob!=="undefined"&&$ instanceof Blob}function MQ($){return typeof FormData!=="undefined"&&$ instanceof FormData}var az=function($){F8(B,$);function B(G,X){var D=$.call(this,X)||this;return D.response=G,D.name="ResponseError",D}return B}(Error);h.ResponseError=az;var tz=function($){F8(B,$);function B(G,X){var D=$.call(this,X)||this;return D.cause=G,D.name="FetchError",D}return B}(Error);h.FetchError=tz;var RQ=function($){F8(B,$);function B(G,X){var D=$.call(this,X)||this;return D.field=G,D.name="RequiredError",D}return B}(Error);h.RequiredError=RQ;h.COLLECTION_FORMATS={csv:",",ssv:" ",tsv:"\t",pipes:"|"};function OQ($,B){var G=$[B];return G!==null&&G!==void 0}h.exists=OQ;function M8($,B){if(B===void 0)B="";return Object.keys($).map(function(G){return pz(G,$[G],B)}).filter(function(G){return G.length>0}).join("&")}h.querystring=M8;function pz($,B,G){if(G===void 0)G="";var X=G+(G.length?"[".concat($,"]"):$);if(B instanceof Array){var D=B.map(function(Z){return encodeURIComponent(String(Z))}).join("&".concat(encodeURIComponent(X),"="));return"".concat(encodeURIComponent(X),"=").concat(D)}if(B instanceof Set){var z=Array.from(B);return pz($,z,G)}if(B instanceof Date)return"".concat(encodeURIComponent(X),"=").concat(encodeURIComponent(B.toISOString()));if(B instanceof Object)return M8(B,X);return"".concat(encodeURIComponent(X),"=").concat(encodeURIComponent(String(B)))}function SQ($,B){return Object.keys($).reduce(function(G,X){var D;return G0(G0({},G),(D={},D[X]=B($[X]),D))},{})}h.mapValues=SQ;function bQ($){for(var B=0,G=$;B<G.length;B++){var X=G[B];if(X.contentType==="multipart/form-data")return!0}return!1}h.canConsumeForm=bQ;var qQ=function(){function $(B,G){if(G===void 0)G=function(X){return X};this.raw=B,this.transformer=G}return $.prototype.value=function(){return z0(this,void 0,void 0,function(){var B;return X0(this,function(G){switch(G.label){case 0:return B=this.transformer,[4,this.raw.json()];case 1:return[2,B.apply(this,[G.sent()])]}})})},$}();h.JSONApiResponse=qQ;var kQ=function(){function $(B){this.raw=B}return $.prototype.value=function(){return z0(this,void 0,void 0,function(){return X0(this,function(B){return[2,void 0]})})},$}();h.VoidApiResponse=kQ;var yQ=function(){function $(B){this.raw=B}return $.prototype.value=function(){return z0(this,void 0,void 0,function(){return X0(this,function(B){switch(B.label){case 0:return[4,this.raw.blob()];case 1:return[2,B.sent()]}})})},$}();h.BlobApiResponse=yQ;var PQ=function(){function $(B){this.raw=B}return $.prototype.value=function(){return z0(this,void 0,void 0,function(){return X0(this,function(B){switch(B.label){case 0:return[4,this.raw.text()];case 1:return[2,B.sent()]}})})},$}();h.TextApiResponse=PQ});var O8=K((rz)=>{Object.defineProperty(rz,"__esModule",{value:!0});rz.CollectionModelToJSON=rz.CollectionModelFromJSONTyped=rz.CollectionModelFromJSON=rz.instanceOfCollectionModel=rz.CollectionModelStatusEnum=void 0;var R8=D1();rz.CollectionModelStatusEnum={Initializing:"Initializing",Ready:"Ready",Terminating:"Terminating"};function gQ($){var B=!0;return B=B&&"name"in $,B=B&&"status"in $,B=B&&"environment"in $,B}rz.instanceOfCollectionModel=gQ;function cQ($){return sz($,!1)}rz.CollectionModelFromJSON=cQ;function sz($,B){if($===void 0||$===null)return $;return{name:$.name,size:!R8.exists($,"size")?void 0:$.size,status:$.status,dimension:!R8.exists($,"dimension")?void 0:$.dimension,vectorCount:!R8.exists($,"vector_count")?void 0:$.vector_count,environment:$.environment}}rz.CollectionModelFromJSONTyped=sz;function mQ($){if($===void 0)return;if($===null)return null;return{name:$.name,size:$.size,status:$.status,dimension:$.dimension,vector_count:$.vectorCount,environment:$.environment}}rz.CollectionModelToJSON=mQ});var zX=K((BX)=>{Object.defineProperty(BX,"__esModule",{value:!0});BX.CollectionListToJSON=BX.CollectionListFromJSONTyped=BX.CollectionListFromJSON=BX.instanceOfCollectionList=void 0;var uQ=D1(),ez=O8();function lQ($){var B=!0;return B}BX.instanceOfCollectionList=lQ;function iQ($){return $X($,!1)}BX.CollectionListFromJSON=iQ;function $X($,B){if($===void 0||$===null)return $;return{collections:!uQ.exists($,"collections")?void 0:$.collections.map(ez.CollectionModelFromJSON)}}BX.CollectionListFromJSONTyped=$X;function _Q($){if($===void 0)return;if($===null)return null;return{collections:$.collections===void 0?void 0:$.collections.map(ez.CollectionModelToJSON)}}BX.CollectionListToJSON=_Q});var S8=K((YX)=>{Object.defineProperty(YX,"__esModule",{value:!0});YX.ConfigureIndexRequestSpecPodToJSON=YX.ConfigureIndexRequestSpecPodFromJSONTyped=YX.ConfigureIndexRequestSpecPodFromJSON=YX.instanceOfConfigureIndexRequestSpecPod=void 0;var XX=D1();function pQ($){var B=!0;return B}YX.instanceOfConfigureIndexRequestSpecPod=pQ;function sQ($){return DX($,!1)}YX.ConfigureIndexRequestSpecPodFromJSON=sQ;function DX($,B){if($===void 0||$===null)return $;return{replicas:!XX.exists($,"replicas")?void 0:$.replicas,podType:!XX.exists($,"pod_type")?void 0:$.pod_type}}YX.ConfigureIndexRequestSpecPodFromJSONTyped=DX;function rQ($){if($===void 0)return;if($===null)return null;return{replicas:$.replicas,pod_type:$.podType}}YX.ConfigureIndexRequestSpecPodToJSON=rQ});var b8=K((LX)=>{Object.defineProperty(LX,"__esModule",{value:!0});LX.ConfigureIndexRequestSpecToJSON=LX.ConfigureIndexRequestSpecFromJSONTyped=LX.ConfigureIndexRequestSpecFromJSON=LX.instanceOfConfigureIndexRequestSpec=void 0;var WX=S8();function BK($){var B=!0;return B=B&&"pod"in $,B}LX.instanceOfConfigureIndexRequestSpec=BK;function GK($){return wX($,!1)}LX.ConfigureIndexRequestSpecFromJSON=GK;function wX($,B){if($===void 0||$===null)return $;return{pod:WX.ConfigureIndexRequestSpecPodFromJSON($.pod)}}LX.ConfigureIndexRequestSpecFromJSONTyped=wX;function zK($){if($===void 0)return;if($===null)return null;return{pod:WX.ConfigureIndexRequestSpecPodToJSON($.pod)}}LX.ConfigureIndexRequestSpecToJSON=zK});var AB=K((HX)=>{Object.defineProperty(HX,"__esModule",{value:!0});HX.DeletionProtectionToJSON=HX.DeletionProtectionFromJSONTyped=HX.DeletionProtectionFromJSON=HX.DeletionProtection=void 0;HX.DeletionProtection={Disabled:"disabled",Enabled:"enabled"};function ZK($){return KX($,!1)}HX.DeletionProtectionFromJSON=ZK;function KX($,B){return $}HX.DeletionProtectionFromJSONTyped=KX;function WK($){return $}HX.DeletionProtectionToJSON=WK});var UX=K((IX)=>{Object.defineProperty(IX,"__esModule",{value:!0});IX.ConfigureIndexRequestToJSON=IX.ConfigureIndexRequestFromJSONTyped=IX.ConfigureIndexRequestFromJSON=IX.instanceOfConfigureIndexRequest=void 0;var q8=D1(),EX=b8(),fX=AB();function KK($){var B=!0;return B}IX.instanceOfConfigureIndexRequest=KK;function HK($){return CX($,!1)}IX.ConfigureIndexRequestFromJSON=HK;function CX($,B){if($===void 0||$===null)return $;return{spec:!q8.exists($,"spec")?void 0:EX.ConfigureIndexRequestSpecFromJSON($.spec),deletionProtection:!q8.exists($,"deletion_protection")?void 0:fX.DeletionProtectionFromJSON($.deletion_protection),tags:!q8.exists($,"tags")?void 0:$.tags}}IX.ConfigureIndexRequestFromJSONTyped=CX;function TK($){if($===void 0)return;if($===null)return null;return{spec:EX.ConfigureIndexRequestSpecToJSON($.spec),deletion_protection:fX.DeletionProtectionToJSON($.deletionProtection),tags:$.tags}}IX.ConfigureIndexRequestToJSON=TK});var AX=K((VX)=>{Object.defineProperty(VX,"__esModule",{value:!0});VX.CreateCollectionRequestToJSON=VX.CreateCollectionRequestFromJSONTyped=VX.CreateCollectionRequestFromJSON=VX.instanceOfCreateCollectionRequest=void 0;function IK($){var B=!0;return B=B&&"name"in $,B=B&&"source"in $,B}VX.instanceOfCreateCollectionRequest=IK;function NK($){return hX($,!1)}VX.CreateCollectionRequestFromJSON=NK;function hX($,B){if($===void 0||$===null)return $;return{name:$.name,source:$.source}}VX.CreateCollectionRequestFromJSONTyped=hX;function UK($){if($===void 0)return;if($===null)return null;return{name:$.name,source:$.source}}VX.CreateCollectionRequestToJSON=UK});var k8=K((MX)=>{Object.defineProperty(MX,"__esModule",{value:!0});MX.PodSpecMetadataConfigToJSON=MX.PodSpecMetadataConfigFromJSONTyped=MX.PodSpecMetadataConfigFromJSON=MX.instanceOfPodSpecMetadataConfig=void 0;var AK=D1();function FK($){var B=!0;return B}MX.instanceOfPodSpecMetadataConfig=FK;function MK($){return FX($,!1)}MX.PodSpecMetadataConfigFromJSON=MK;function FX($,B){if($===void 0||$===null)return $;return{indexed:!AK.exists($,"indexed")?void 0:$.indexed}}MX.PodSpecMetadataConfigFromJSONTyped=FX;function RK($){if($===void 0)return;if($===null)return null;return{indexed:$.indexed}}MX.PodSpecMetadataConfigToJSON=RK});var $6=K((bX)=>{Object.defineProperty(bX,"__esModule",{value:!0});bX.PodSpecToJSON=bX.PodSpecFromJSONTyped=bX.PodSpecFromJSON=bX.instanceOfPodSpec=void 0;var FB=D1(),OX=k8();function qK($){var B=!0;return B=B&&"environment"in $,B=B&&"podType"in $,B}bX.instanceOfPodSpec=qK;function kK($){return SX($,!1)}bX.PodSpecFromJSON=kK;function SX($,B){if($===void 0||$===null)return $;return{environment:$.environment,replicas:!FB.exists($,"replicas")?void 0:$.replicas,shards:!FB.exists($,"shards")?void 0:$.shards,podType:$.pod_type,pods:!FB.exists($,"pods")?void 0:$.pods,metadataConfig:!FB.exists($,"metadata_config")?void 0:OX.PodSpecMetadataConfigFromJSON($.metadata_config),sourceCollection:!FB.exists($,"source_collection")?void 0:$.source_collection}}bX.PodSpecFromJSONTyped=SX;function yK($){if($===void 0)return;if($===null)return null;return{environment:$.environment,replicas:$.replicas,shards:$.shards,pod_type:$.podType,pods:$.pods,metadata_config:OX.PodSpecMetadataConfigToJSON($.metadataConfig),source_collection:$.sourceCollection}}bX.PodSpecToJSON=yK});var B6=K((yX)=>{Object.defineProperty(yX,"__esModule",{value:!0});yX.ServerlessSpecToJSON=yX.ServerlessSpecFromJSONTyped=yX.ServerlessSpecFromJSON=yX.instanceOfServerlessSpec=yX.ServerlessSpecCloudEnum=void 0;yX.ServerlessSpecCloudEnum={Gcp:"gcp",Aws:"aws",Azure:"azure"};function mK($){var B=!0;return B=B&&"cloud"in $,B=B&&"region"in $,B}yX.instanceOfServerlessSpec=mK;function jK($){return kX($,!1)}yX.ServerlessSpecFromJSON=jK;function kX($,B){if($===void 0||$===null)return $;return{cloud:$.cloud,region:$.region}}yX.ServerlessSpecFromJSONTyped=kX;function xK($){if($===void 0)return;if($===null)return null;return{cloud:$.cloud,region:$.region}}yX.ServerlessSpecToJSON=xK});var y8=K((xX)=>{Object.defineProperty(xX,"__esModule",{value:!0});xX.IndexSpecToJSON=xX.IndexSpecFromJSONTyped=xX.IndexSpecFromJSON=xX.instanceOfIndexSpec=void 0;var gX=D1(),cX=$6(),mX=B6();function iK($){var B=!0;return B}xX.instanceOfIndexSpec=iK;function _K($){return jX($,!1)}xX.IndexSpecFromJSON=_K;function jX($,B){if($===void 0||$===null)return $;return{serverless:!gX.exists($,"serverless")?void 0:mX.ServerlessSpecFromJSON($.serverless),pod:!gX.exists($,"pod")?void 0:cX.PodSpecFromJSON($.pod)}}xX.IndexSpecFromJSONTyped=jX;function nK($){if($===void 0)return;if($===null)return null;return{serverless:mX.ServerlessSpecToJSON($.serverless),pod:cX.PodSpecToJSON($.pod)}}xX.IndexSpecToJSON=nK});var nX=K((iX)=>{Object.defineProperty(iX,"__esModule",{value:!0});iX.CreateIndexRequestToJSON=iX.CreateIndexRequestFromJSONTyped=iX.CreateIndexRequestFromJSON=iX.instanceOfCreateIndexRequest=iX.CreateIndexRequestMetricEnum=void 0;var P8=D1(),dX=AB(),uX=y8();iX.CreateIndexRequestMetricEnum={Cosine:"cosine",Euclidean:"euclidean",Dotproduct:"dotproduct"};function sK($){var B=!0;return B=B&&"name"in $,B=B&&"dimension"in $,B=B&&"spec"in $,B}iX.instanceOfCreateIndexRequest=sK;function rK($){return lX($,!1)}iX.CreateIndexRequestFromJSON=rK;function lX($,B){if($===void 0||$===null)return $;return{name:$.name,dimension:$.dimension,metric:!P8.exists($,"metric")?void 0:$.metric,deletionProtection:!P8.exists($,"deletion_protection")?void 0:dX.DeletionProtectionFromJSON($.deletion_protection),tags:!P8.exists($,"tags")?void 0:$.tags,spec:uX.IndexSpecFromJSON($.spec)}}iX.CreateIndexRequestFromJSONTyped=lX;function oK($){if($===void 0)return;if($===null)return null;return{name:$.name,dimension:$.dimension,metric:$.metric,deletion_protection:dX.DeletionProtectionToJSON($.deletionProtection),tags:$.tags,spec:uX.IndexSpecToJSON($.spec)}}iX.CreateIndexRequestToJSON=oK});var g8=K((tX)=>{Object.defineProperty(tX,"__esModule",{value:!0});tX.ErrorResponseErrorToJSON=tX.ErrorResponseErrorFromJSONTyped=tX.ErrorResponseErrorFromJSON=tX.instanceOfErrorResponseError=tX.ErrorResponseErrorCodeEnum=void 0;var zH=D1();tX.ErrorResponseErrorCodeEnum={Ok:"OK",Unknown:"UNKNOWN",InvalidArgument:"INVALID_ARGUMENT",DeadlineExceeded:"DEADLINE_EXCEEDED",QuotaExceeded:"QUOTA_EXCEEDED",NotFound:"NOT_FOUND",AlreadyExists:"ALREADY_EXISTS",PermissionDenied:"PERMISSION_DENIED",Unauthenticated:"UNAUTHENTICATED",ResourceExhausted:"RESOURCE_EXHAUSTED",FailedPrecondition:"FAILED_PRECONDITION",Aborted:"ABORTED",OutOfRange:"OUT_OF_RANGE",Unimplemented:"UNIMPLEMENTED",Internal:"INTERNAL",Unavailable:"UNAVAILABLE",DataLoss:"DATA_LOSS",Forbidden:"FORBIDDEN",UnprocessableEntity:"UNPROCESSABLE_ENTITY",PaymentRequired:"PAYMENT_REQUIRED"};function XH($){var B=!0;return B=B&&"code"in $,B=B&&"message"in $,B}tX.instanceOfErrorResponseError=XH;function DH($){return aX($,!1)}tX.ErrorResponseErrorFromJSON=DH;function aX($,B){if($===void 0||$===null)return $;return{code:$.code,message:$.message,details:!zH.exists($,"details")?void 0:$.details}}tX.ErrorResponseErrorFromJSONTyped=aX;function YH($){if($===void 0)return;if($===null)return null;return{code:$.code,message:$.message,details:$.details}}tX.ErrorResponseErrorToJSON=YH});var $D=K((oX)=>{Object.defineProperty(oX,"__esModule",{value:!0});oX.ErrorResponseToJSON=oX.ErrorResponseFromJSONTyped=oX.ErrorResponseFromJSON=oX.instanceOfErrorResponse=void 0;var sX=g8();function QH($){var B=!0;return B=B&&"status"in $,B=B&&"error"in $,B}oX.instanceOfErrorResponse=QH;function KH($){return rX($,!1)}oX.ErrorResponseFromJSON=KH;function rX($,B){if($===void 0||$===null)return $;return{status:$.status,error:sX.ErrorResponseErrorFromJSON($.error)}}oX.ErrorResponseFromJSONTyped=rX;function HH($){if($===void 0)return;if($===null)return null;return{status:$.status,error:sX.ErrorResponseErrorToJSON($.error)}}oX.ErrorResponseToJSON=HH});var c8=K((DD)=>{Object.defineProperty(DD,"__esModule",{value:!0});DD.IndexModelSpecToJSON=DD.IndexModelSpecFromJSONTyped=DD.IndexModelSpecFromJSON=DD.instanceOfIndexModelSpec=void 0;var BD=D1(),GD=$6(),zD=B6();function CH($){var B=!0;return B}DD.instanceOfIndexModelSpec=CH;function IH($){return XD($,!1)}DD.IndexModelSpecFromJSON=IH;function XD($,B){if($===void 0||$===null)return $;return{pod:!BD.exists($,"pod")?void 0:GD.PodSpecFromJSON($.pod),serverless:!BD.exists($,"serverless")?void 0:zD.ServerlessSpecFromJSON($.serverless)}}DD.IndexModelSpecFromJSONTyped=XD;function NH($){if($===void 0)return;if($===null)return null;return{pod:GD.PodSpecToJSON($.pod),serverless:zD.ServerlessSpecToJSON($.serverless)}}DD.IndexModelSpecToJSON=NH});var m8=K((WD)=>{Object.defineProperty(WD,"__esModule",{value:!0});WD.IndexModelStatusToJSON=WD.IndexModelStatusFromJSONTyped=WD.IndexModelStatusFromJSON=WD.instanceOfIndexModelStatus=WD.IndexModelStatusStateEnum=void 0;WD.IndexModelStatusStateEnum={Initializing:"Initializing",InitializationFailed:"InitializationFailed",ScalingUp:"ScalingUp",ScalingDown:"ScalingDown",ScalingUpPodSize:"ScalingUpPodSize",ScalingDownPodSize:"ScalingDownPodSize",Terminating:"Terminating",Ready:"Ready"};function JH($){var B=!0;return B=B&&"ready"in $,B=B&&"state"in $,B}WD.instanceOfIndexModelStatus=JH;function AH($){return ZD($,!1)}WD.IndexModelStatusFromJSON=AH;function ZD($,B){if($===void 0||$===null)return $;return{ready:$.ready,state:$.state}}WD.IndexModelStatusFromJSONTyped=ZD;function FH($){if($===void 0)return;if($===null)return null;return{ready:$.ready,state:$.state}}WD.IndexModelStatusToJSON=FH});var j8=K((ED)=>{Object.defineProperty(ED,"__esModule",{value:!0});ED.IndexModelToJSON=ED.IndexModelFromJSONTyped=ED.IndexModelFromJSON=ED.instanceOfIndexModel=ED.IndexModelMetricEnum=void 0;var LD=D1(),QD=AB(),KD=c8(),HD=m8();ED.IndexModelMetricEnum={Cosine:"cosine",Euclidean:"euclidean",Dotproduct:"dotproduct"};function bH($){var B=!0;return B=B&&"name"in $,B=B&&"dimension"in $,B=B&&"metric"in $,B=B&&"host"in $,B=B&&"spec"in $,B=B&&"status"in $,B}ED.instanceOfIndexModel=bH;function qH($){return TD($,!1)}ED.IndexModelFromJSON=qH;function TD($,B){if($===void 0||$===null)return $;return{name:$.name,dimension:$.dimension,metric:$.metric,host:$.host,deletionProtection:!LD.exists($,"deletion_protection")?void 0:QD.DeletionProtectionFromJSON($.deletion_protection),tags:!LD.exists($,"tags")?void 0:$.tags,spec:KD.IndexModelSpecFromJSON($.spec),status:HD.IndexModelStatusFromJSON($.status)}}ED.IndexModelFromJSONTyped=TD;function kH($){if($===void 0)return;if($===null)return null;return{name:$.name,dimension:$.dimension,metric:$.metric,host:$.host,deletion_protection:QD.DeletionProtectionToJSON($.deletionProtection),tags:$.tags,spec:KD.IndexModelSpecToJSON($.spec),status:HD.IndexModelStatusToJSON($.status)}}ED.IndexModelToJSON=kH});var hD=K((ND)=>{Object.defineProperty(ND,"__esModule",{value:!0});ND.IndexListToJSON=ND.IndexListFromJSONTyped=ND.IndexListFromJSON=ND.instanceOfIndexList=void 0;var mH=D1(),CD=j8();function jH($){var B=!0;return B}ND.instanceOfIndexList=jH;function xH($){return ID($,!1)}ND.IndexListFromJSON=xH;function ID($,B){if($===void 0||$===null)return $;return{indexes:!mH.exists($,"indexes")?void 0:$.indexes.map(CD.IndexModelFromJSON)}}ND.IndexListFromJSONTyped=ID;function vH($){if($===void 0)return;if($===null)return null;return{indexes:$.indexes===void 0?void 0:$.indexes.map(CD.IndexModelToJSON)}}ND.IndexListToJSON=vH});var x8=K((g)=>{var iH=g&&g.__createBinding||(Object.create?function($,B,G,X){if(X===void 0)X=G;var D=Object.getOwnPropertyDescriptor(B,G);if(!D||("get"in D?!B.__esModule:D.writable||D.configurable))D={enumerable:!0,get:function(){return B[G]}};Object.defineProperty($,X,D)}:function($,B,G,X){if(X===void 0)X=G;$[X]=B[G]}),_=g&&g.__exportStar||function($,B){for(var G in $)if(G!=="default"&&!Object.prototype.hasOwnProperty.call(B,G))iH(B,$,G)};Object.defineProperty(g,"__esModule",{value:!0});_(zX(),g);_(O8(),g);_(UX(),g);_(b8(),g);_(S8(),g);_(AX(),g);_(nX(),g);_(AB(),g);_($D(),g);_(g8(),g);_(hD(),g);_(j8(),g);_(c8(),g);_(m8(),g);_(y8(),g);_($6(),g);_(k8(),g);_(B6(),g)});var VD=K(($1)=>{var _H=$1&&$1.__extends||function(){var $=function(B,G){return $=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(X,D){X.__proto__=D}||function(X,D){for(var z in D)if(Object.prototype.hasOwnProperty.call(D,z))X[z]=D[z]},$(B,G)};return function(B,G){if(typeof G!=="function"&&G!==null)throw new TypeError("Class extends value "+String(G)+" is not a constructor or null");$(B,G);function X(){this.constructor=B}B.prototype=G===null?Object.create(G):(X.prototype=G.prototype,new X)}}(),nH=$1&&$1.__createBinding||(Object.create?function($,B,G,X){if(X===void 0)X=G;var D=Object.getOwnPropertyDescriptor(B,G);if(!D||("get"in D?!B.__esModule:D.writable||D.configurable))D={enumerable:!0,get:function(){return B[G]}};Object.defineProperty($,X,D)}:function($,B,G,X){if(X===void 0)X=G;$[X]=B[G]}),aH=$1&&$1.__setModuleDefault||(Object.create?function($,B){Object.defineProperty($,"default",{enumerable:!0,value:B})}:function($,B){$.default=B}),tH=$1&&$1.__importStar||function($){if($&&$.__esModule)return $;var B={};if($!=null){for(var G in $)if(G!=="default"&&Object.prototype.hasOwnProperty.call($,G))nH(B,$,G)}return aH(B,$),B},n=$1&&$1.__awaiter||function($,B,G,X){function D(z){return z instanceof G?z:new G(function(Z){Z(z)})}return new(G||(G=Promise))(function(z,Z){function W(w){try{Y(X.next(w))}catch(Q){Z(Q)}}function L(w){try{Y(X.throw(w))}catch(Q){Z(Q)}}function Y(w){w.done?z(w.value):D(w.value).then(W,L)}Y((X=X.apply($,B||[])).next())})},a=$1&&$1.__generator||function($,B){var G={label:0,sent:function(){if(z[0]&1)throw z[1];return z[1]},trys:[],ops:[]},X,D,z,Z;return Z={next:W(0),throw:W(1),return:W(2)},typeof Symbol==="function"&&(Z[Symbol.iterator]=function(){return this}),Z;function W(Y){return function(w){return L([Y,w])}}function L(Y){if(X)throw new TypeError("Generator is already executing.");while(Z&&(Z=0,Y[0]&&(G=0)),G)try{if(X=1,D&&(z=Y[0]&2?D.return:Y[0]?D.throw||((z=D.return)&&z.call(D),0):D.next)&&!(z=z.call(D,Y[1])).done)return z;if(D=0,z)Y=[Y[0]&2,z.value];switch(Y[0]){case 0:case 1:z=Y;break;case 4:return G.label++,{value:Y[1],done:!1};case 5:G.label++,D=Y[1],Y=[0];continue;case 7:Y=G.ops.pop(),G.trys.pop();continue;default:if((z=G.trys,!(z=z.length>0&&z[z.length-1]))&&(Y[0]===6||Y[0]===2)){G=0;continue}if(Y[0]===3&&(!z||Y[1]>z[0]&&Y[1]<z[3])){G.label=Y[1];break}if(Y[0]===6&&G.label<z[1]){G.label=z[1],z=Y;break}if(z&&G.label<z[2]){G.label=z[2],G.ops.push(Y);break}if(z[2])G.ops.pop();G.trys.pop();continue}Y=B.call($,G)}catch(w){Y=[6,w],D=0}finally{X=z=0}if(Y[0]&5)throw Y[1];return{value:Y[0]?Y[1]:void 0,done:!0}}};Object.defineProperty($1,"__esModule",{value:!0});$1.ManageIndexesApi=void 0;var t=tH(D1()),S1=x8(),pH=function($){_H(B,$);function B(){return $!==null&&$.apply(this,arguments)||this}return B.prototype.configureIndexRaw=function(G,X){return n(this,void 0,void 0,function(){var D,z,Z;return a(this,function(W){switch(W.label){case 0:if(G.indexName===null||G.indexName===void 0)throw new t.RequiredError("indexName","Required parameter requestParameters.indexName was null or undefined when calling configureIndex.");if(G.configureIndexRequest===null||G.configureIndexRequest===void 0)throw new t.RequiredError("configureIndexRequest","Required parameter requestParameters.configureIndexRequest was null or undefined when calling configureIndex.");if(D={},z={},z["Content-Type"]="application/json",this.configuration&&this.configuration.apiKey)z["Api-Key"]=this.configuration.apiKey("Api-Key");return[4,this.request({path:"/indexes/{index_name}".replace("{".concat("index_name","}"),encodeURIComponent(String(G.indexName))),method:"PATCH",headers:z,query:D,body:S1.ConfigureIndexRequestToJSON(G.configureIndexRequest)},X)];case 1:return Z=W.sent(),[2,new t.JSONApiResponse(Z,function(L){return S1.IndexModelFromJSON(L)})]}})})},B.prototype.configureIndex=function(G,X){return n(this,void 0,void 0,function(){var D;return a(this,function(z){switch(z.label){case 0:return[4,this.configureIndexRaw(G,X)];case 1:return D=z.sent(),[4,D.value()];case 2:return[2,z.sent()]}})})},B.prototype.createCollectionRaw=function(G,X){return n(this,void 0,void 0,function(){var D,z,Z;return a(this,function(W){switch(W.label){case 0:if(G.createCollectionRequest===null||G.createCollectionRequest===void 0)throw new t.RequiredError("createCollectionRequest","Required parameter requestParameters.createCollectionRequest was null or undefined when calling createCollection.");if(D={},z={},z["Content-Type"]="application/json",this.configuration&&this.configuration.apiKey)z["Api-Key"]=this.configuration.apiKey("Api-Key");return[4,this.request({path:"/collections",method:"POST",headers:z,query:D,body:S1.CreateCollectionRequestToJSON(G.createCollectionRequest)},X)];case 1:return Z=W.sent(),[2,new t.JSONApiResponse(Z,function(L){return S1.CollectionModelFromJSON(L)})]}})})},B.prototype.createCollection=function(G,X){return n(this,void 0,void 0,function(){var D;return a(this,function(z){switch(z.label){case 0:return[4,this.createCollectionRaw(G,X)];case 1:return D=z.sent(),[4,D.value()];case 2:return[2,z.sent()]}})})},B.prototype.createIndexRaw=function(G,X){return n(this,void 0,void 0,function(){var D,z,Z;return a(this,function(W){switch(W.label){case 0:if(G.createIndexRequest===null||G.createIndexRequest===void 0)throw new t.RequiredError("createIndexRequest","Required parameter requestParameters.createIndexRequest was null or undefined when calling createIndex.");if(D={},z={},z["Content-Type"]="application/json",this.configuration&&this.configuration.apiKey)z["Api-Key"]=this.configuration.apiKey("Api-Key");return[4,this.request({path:"/indexes",method:"POST",headers:z,query:D,body:S1.CreateIndexRequestToJSON(G.createIndexRequest)},X)];case 1:return Z=W.sent(),[2,new t.JSONApiResponse(Z,function(L){return S1.IndexModelFromJSON(L)})]}})})},B.prototype.createIndex=function(G,X){return n(this,void 0,void 0,function(){var D;return a(this,function(z){switch(z.label){case 0:return[4,this.createIndexRaw(G,X)];case 1:return D=z.sent(),[4,D.value()];case 2:return[2,z.sent()]}})})},B.prototype.deleteCollectionRaw=function(G,X){return n(this,void 0,void 0,function(){var D,z,Z;return a(this,function(W){switch(W.label){case 0:if(G.collectionName===null||G.collectionName===void 0)throw new t.RequiredError("collectionName","Required parameter requestParameters.collectionName was null or undefined when calling deleteCollection.");if(D={},z={},this.configuration&&this.configuration.apiKey)z["Api-Key"]=this.configuration.apiKey("Api-Key");return[4,this.request({path:"/collections/{collection_name}".replace("{".concat("collection_name","}"),encodeURIComponent(String(G.collectionName))),method:"DELETE",headers:z,query:D},X)];case 1:return Z=W.sent(),[2,new t.VoidApiResponse(Z)]}})})},B.prototype.deleteCollection=function(G,X){return n(this,void 0,void 0,function(){return a(this,function(D){switch(D.label){case 0:return[4,this.deleteCollectionRaw(G,X)];case 1:return D.sent(),[2]}})})},B.prototype.deleteIndexRaw=function(G,X){return n(this,void 0,void 0,function(){var D,z,Z;return a(this,function(W){switch(W.label){case 0:if(G.indexName===null||G.indexName===void 0)throw new t.RequiredError("indexName","Required parameter requestParameters.indexName was null or undefined when calling deleteIndex.");if(D={},z={},this.configuration&&this.configuration.apiKey)z["Api-Key"]=this.configuration.apiKey("Api-Key");return[4,this.request({path:"/indexes/{index_name}".replace("{".concat("index_name","}"),encodeURIComponent(String(G.indexName))),method:"DELETE",headers:z,query:D},X)];case 1:return Z=W.sent(),[2,new t.VoidApiResponse(Z)]}})})},B.prototype.deleteIndex=function(G,X){return n(this,void 0,void 0,function(){return a(this,function(D){switch(D.label){case 0:return[4,this.deleteIndexRaw(G,X)];case 1:return D.sent(),[2]}})})},B.prototype.describeCollectionRaw=function(G,X){return n(this,void 0,void 0,function(){var D,z,Z;return a(this,function(W){switch(W.label){case 0:if(G.collectionName===null||G.collectionName===void 0)throw new t.RequiredError("collectionName","Required parameter requestParameters.collectionName was null or undefined when calling describeCollection.");if(D={},z={},this.configuration&&this.configuration.apiKey)z["Api-Key"]=this.configuration.apiKey("Api-Key");return[4,this.request({path:"/collections/{collection_name}".replace("{".concat("collection_name","}"),encodeURIComponent(String(G.collectionName))),method:"GET",headers:z,query:D},X)];case 1:return Z=W.sent(),[2,new t.JSONApiResponse(Z,function(L){return S1.CollectionModelFromJSON(L)})]}})})},B.prototype.describeCollection=function(G,X){return n(this,void 0,void 0,function(){var D;return a(this,function(z){switch(z.label){case 0:return[4,this.describeCollectionRaw(G,X)];case 1:return D=z.sent(),[4,D.value()];case 2:return[2,z.sent()]}})})},B.prototype.describeIndexRaw=function(G,X){return n(this,void 0,void 0,function(){var D,z,Z;return a(this,function(W){switch(W.label){case 0:if(G.indexName===null||G.indexName===void 0)throw new t.RequiredError("indexName","Required parameter requestParameters.indexName was null or undefined when calling describeIndex.");if(D={},z={},this.configuration&&this.configuration.apiKey)z["Api-Key"]=this.configuration.apiKey("Api-Key");return[4,this.request({path:"/indexes/{index_name}".replace("{".concat("index_name","}"),encodeURIComponent(String(G.indexName))),method:"GET",headers:z,query:D},X)];case 1:return Z=W.sent(),[2,new t.JSONApiResponse(Z,function(L){return S1.IndexModelFromJSON(L)})]}})})},B.prototype.describeIndex=function(G,X){return n(this,void 0,void 0,function(){var D;return a(this,function(z){switch(z.label){case 0:return[4,this.describeIndexRaw(G,X)];case 1:return D=z.sent(),[4,D.value()];case 2:return[2,z.sent()]}})})},B.prototype.listCollectionsRaw=function(G){return n(this,void 0,void 0,function(){var X,D,z;return a(this,function(Z){switch(Z.label){case 0:if(X={},D={},this.configuration&&this.configuration.apiKey)D["Api-Key"]=this.configuration.apiKey("Api-Key");return[4,this.request({path:"/collections",method:"GET",headers:D,query:X},G)];case 1:return z=Z.sent(),[2,new t.JSONApiResponse(z,function(W){return S1.CollectionListFromJSON(W)})]}})})},B.prototype.listCollections=function(G){return n(this,void 0,void 0,function(){var X;return a(this,function(D){switch(D.label){case 0:return[4,this.listCollectionsRaw(G)];case 1:return X=D.sent(),[4,X.value()];case 2:return[2,D.sent()]}})})},B.prototype.listIndexesRaw=function(G){return n(this,void 0,void 0,function(){var X,D,z;return a(this,function(Z){switch(Z.label){case 0:if(X={},D={},this.configuration&&this.configuration.apiKey)D["Api-Key"]=this.configuration.apiKey("Api-Key");return[4,this.request({path:"/indexes",method:"GET",headers:D,query:X},G)];case 1:return z=Z.sent(),[2,new t.JSONApiResponse(z,function(W){return S1.IndexListFromJSON(W)})]}})})},B.prototype.listIndexes=function(G){return n(this,void 0,void 0,function(){var X;return a(this,function(D){switch(D.label){case 0:return[4,this.listIndexesRaw(G)];case 1:return X=D.sent(),[4,X.value()];case 2:return[2,D.sent()]}})})},B}(t.BaseAPI);$1.ManageIndexesApi=pH});var JD=K((I$)=>{var sH=I$&&I$.__createBinding||(Object.create?function($,B,G,X){if(X===void 0)X=G;var D=Object.getOwnPropertyDescriptor(B,G);if(!D||("get"in D?!B.__esModule:D.writable||D.configurable))D={enumerable:!0,get:function(){return B[G]}};Object.defineProperty($,X,D)}:function($,B,G,X){if(X===void 0)X=G;$[X]=B[G]}),rH=I$&&I$.__exportStar||function($,B){for(var G in $)if(G!=="default"&&!Object.prototype.hasOwnProperty.call(B,G))sH(B,$,G)};Object.defineProperty(I$,"__esModule",{value:!0});rH(VD(),I$)});var MD=K((AD)=>{Object.defineProperty(AD,"__esModule",{value:!0});AD.X_PINECONE_API_VERSION=void 0;AD.X_PINECONE_API_VERSION="2024-10"});var z6=K((b1)=>{var oH=b1&&b1.__createBinding||(Object.create?function($,B,G,X){if(X===void 0)X=G;var D=Object.getOwnPropertyDescriptor(B,G);if(!D||("get"in D?!B.__esModule:D.writable||D.configurable))D={enumerable:!0,get:function(){return B[G]}};Object.defineProperty($,X,D)}:function($,B,G,X){if(X===void 0)X=G;$[X]=B[G]}),G6=b1&&b1.__exportStar||function($,B){for(var G in $)if(G!=="default"&&!Object.prototype.hasOwnProperty.call(B,G))oH(B,$,G)};Object.defineProperty(b1,"__esModule",{value:!0});G6(D1(),b1);G6(JD(),b1);G6(x8(),b1);G6(MD(),b1)});var SD=K((RD)=>{Object.defineProperty(RD,"__esModule",{value:!0});RD.debugLog=void 0;var eH=function($){if(typeof process!=="undefined"&&process&&process.env&&process.env.PINECONE_DEBUG)console.log($)};RD.debugLog=eH});var kD=K((bD)=>{Object.defineProperty(bD,"__esModule",{value:!0});bD.normalizeUrl=void 0;function $T($){if(!$||$.trim().length===0)return;if(!$.startsWith("http://")&&!$.startsWith("https://"))return"https://"+$;return $}bD.normalizeUrl=$T});var mD=K((gD)=>{Object.defineProperty(gD,"__esModule",{value:!0});gD.queryParamsStringify=void 0;function yD($,B){if(B===void 0)B="";return Object.keys($).map(function(G){return PD(G,$[G],B)}).filter(function(G){return G.length>0}).join("&")}gD.queryParamsStringify=yD;function PD($,B,G){if(G===void 0)G="";var X=G+(G.length?"[".concat($,"]"):$);if(Array.isArray(B)){var D=B.map(function(Z){return encodeURIComponent(String(Z))}).join("&".concat(encodeURIComponent(X),"="));return"".concat(encodeURIComponent(X),"=").concat(D)}if(B instanceof Set){var z=Array.from(B);return PD($,z,G)}if(B instanceof Date)return"".concat(encodeURIComponent(X),"=").concat(encodeURIComponent(B.toISOString()));if(B instanceof Object)return yD(B,X);return"".concat(encodeURIComponent(X),"=").concat(encodeURIComponent(String(B)))}});var v8=K((jD)=>{Object.defineProperty(jD,"__esModule",{value:!0});jD.isBrowser=jD.isEdge=void 0;var BT=function(){return typeof EdgeRuntime==="string"};jD.isEdge=BT;var GT=function(){return typeof window!=="undefined"};jD.isBrowser=GT});var vD=K((TS,XT)=>{XT.exports={name:"@pinecone-database/pinecone",version:"4.0.0"}});var uD=K((q1)=>{var DT=q1&&q1.__createBinding||(Object.create?function($,B,G,X){if(X===void 0)X=G;var D=Object.getOwnPropertyDescriptor(B,G);if(!D||("get"in D?!B.__esModule:D.writable||D.configurable))D={enumerable:!0,get:function(){return B[G]}};Object.defineProperty($,X,D)}:function($,B,G,X){if(X===void 0)X=G;$[X]=B[G]}),YT=q1&&q1.__setModuleDefault||(Object.create?function($,B){Object.defineProperty($,"default",{enumerable:!0,value:B})}:function($,B){$.default=B}),ZT=q1&&q1.__importStar||function($){if($&&$.__esModule)return $;var B={};if($!=null){for(var G in $)if(G!=="default"&&Object.prototype.hasOwnProperty.call($,G))DT(B,$,G)}return YT(B,$),B};Object.defineProperty(q1,"__esModule",{value:!0});q1.buildUserAgent=void 0;var WT=v8(),dD=ZT(vD()),wT=function($){var B=["".concat(dD.name," v").concat(dD.version),"lang=typescript"];if(WT.isEdge())B.push("Edge Runtime");if(typeof process!=="undefined"&&process&&process.version)B.push("node ".concat(process.version));if($.sourceTag)B.push("source_tag=".concat(LT($.sourceTag)));return B.join("; ")};q1.buildUserAgent=wT;var LT=function($){if(!$)return;return $.toLowerCase().replace(/[^a-z0-9_ :]/g,"").trim().replace(/[ ]+/g,"_")}});var n$=K((_$)=>{var QT=_$&&_$.__extends||function(){var $=function(B,G){return $=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(X,D){X.__proto__=D}||function(X,D){for(var z in D)if(Object.prototype.hasOwnProperty.call(D,z))X[z]=D[z]},$(B,G)};return function(B,G){if(typeof G!=="function"&&G!==null)throw new TypeError("Class extends value "+String(G)+" is not a constructor or null");$(B,G);function X(){this.constructor=B}B.prototype=G===null?Object.create(G):(X.prototype=G.prototype,new X)}}();Object.defineProperty(_$,"__esModule",{value:!0});_$.BasePineconeError=void 0;var KT=function($){QT(B,$);function B(G,X){var D=this.constructor,z=$.call(this,G)||this;if(Object.setPrototypeOf(z,D.prototype),Error.captureStackTrace)Error.captureStackTrace(z,D);return z.name=z.constructor.name,z.cause=X,z}return B}(Error);_$.BasePineconeError=KT});var lD=K((f1)=>{var X6=f1&&f1.__extends||function(){var $=function(B,G){return $=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(X,D){X.__proto__=D}||function(X,D){for(var z in D)if(Object.prototype.hasOwnProperty.call(D,z))X[z]=D[z]},$(B,G)};return function(B,G){if(typeof G!=="function"&&G!==null)throw new TypeError("Class extends value "+String(G)+" is not a constructor or null");$(B,G);function X(){this.constructor=B}B.prototype=G===null?Object.create(G):(X.prototype=G.prototype,new X)}}();Object.defineProperty(f1,"__esModule",{value:!0});f1.PineconeUnableToResolveHostError=f1.PineconeEnvironmentVarsNotSupportedError=f1.PineconeUnexpectedResponseError=f1.PineconeConfigurationError=void 0;var D6=n$(),HT="You can find the configuration values for your project in the Pinecone developer console at https://app.pinecone.io.",TT=function($){X6(B,$);function B(G){var X=$.call(this,"".concat(G," ").concat(HT))||this;return X.name="PineconeConfigurationError",X}return B}(D6.BasePineconeError);f1.PineconeConfigurationError=TT;var ET=function($){X6(B,$);function B(G,X,D,z){var Z=$.call(this,"Unexpected response while calling ".concat(G,". ").concat(z?z+" ":"","Status: ").concat(X,". Body: ").concat(D))||this;return Z.name="PineconeUnexpectedResponseError",Z}return B}(D6.BasePineconeError);f1.PineconeUnexpectedResponseError=ET;var fT=function($){X6(B,$);function B(G){var X=$.call(this,G)||this;return X.name="PineconeEnvironmentVarsNotSupportedError",X}return B}(D6.BasePineconeError);f1.PineconeEnvironmentVarsNotSupportedError=fT;var CT=function($){X6(B,$);function B(G){var X=$.call(this,G)||this;return X.name="PineconeUnableToResolveHostError",X}return B}(D6.BasePineconeError);f1.PineconeUnableToResolveHostError=CT});var u8=K((c)=>{var D0=c&&c.__extends||function(){var $=function(B,G){return $=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(X,D){X.__proto__=D}||function(X,D){for(var z in D)if(Object.prototype.hasOwnProperty.call(D,z))X[z]=D[z]},$(B,G)};return function(B,G){if(typeof G!=="function"&&G!==null)throw new TypeError("Class extends value "+String(G)+" is not a constructor or null");$(B,G);function X(){this.constructor=B}B.prototype=G===null?Object.create(G):(X.prototype=G.prototype,new X)}}();Object.defineProperty(c,"__esModule",{value:!0});c.mapHttpStatusError=c.PineconeUnmappedHttpError=c.PineconeNotImplementedError=c.PineconeUnavailableError=c.PineconeMaxRetriesExceededError=c.PineconeInternalServerError=c.PineconeConflictError=c.PineconeNotFoundError=c.PineconeAuthorizationError=c.PineconeBadRequestError=void 0;var Y0=n$(),iD="You can find the configuration values for your project in the Pinecone developer console at https://app.pinecone.io",d8=function($){D0(B,$);function B(G){var X=this,D=G.message;return X=$.call(this,D)||this,X.name="PineconeBadRequestError",X}return B}(Y0.BasePineconeError);c.PineconeBadRequestError=d8;var _D=function($){D0(B,$);function B(G){var X=this,D=G.url;if(D)X=$.call(this,"The API key you provided was rejected while calling ".concat(D,". Please check your configuration values and try again. ").concat(iD))||this;else X=$.call(this,"The API key you provided was rejected. Please check your configuration values and try again. ".concat(iD))||this;return X.name="PineconeAuthorizationError",X}return B}(Y0.BasePineconeError);c.PineconeAuthorizationError=_D;var nD=function($){D0(B,$);function B(G){var X=this,D=G.url;if(D)X=$.call(this,"A call to ".concat(D," returned HTTP status 404."))||this;else X=$.call(this,"The requested resource could not be found.")||this;return X.name="PineconeNotFoundError",X}return B}(Y0.BasePineconeError);c.PineconeNotFoundError=nD;var aD=function($){D0(B,$);function B(G){var X=this,D=G.url,z=G.message;if(D)X=$.call(this,"A call to ".concat(D," returned HTTP status 409. ").concat(z?z:""))||this;else X=$.call(this,"The resource you are attempting to create already exists.")||this;return X.name="PineconeConflictError",X}return B}(Y0.BasePineconeError);c.PineconeConflictError=aD;var tD=function($){D0(B,$);function B(G){var X=this,D=G.url,z=G.body,Z=G.status,W=D?"An internal server error occurred while calling the ".concat(D," endpoint."):"",L="To see overall service health and learn whether this seems like a large-scale problem or one specific to your request, please go to https://status.pinecone.io/ to view our status page. If you believe the error reflects a problem with this client, please file a bug report in the github issue tracker at https://github.com/pinecone-io/pinecone-ts-client",Y=Z?"Status Code: ".concat(Z,"."):"",w=z?"Body: ".concat(z):"";return X=$.call(this,[W,Y,L,w].join(" ").trim())||this,X.name="PineconeInternalServerError",X}return B}(Y0.BasePineconeError);c.PineconeInternalServerError=tD;var IT=function($){D0(B,$);function B(G){var X=this,D="You have exceeded the max configured retries (".concat(G,"). "),z="Increase the maxRetries field in the RetryOptions object to retry more times. If you believe the error reflects a problem with this client, please file a bug report in the github issue tracker at https://github.com/pinecone-io/pinecone-ts-client";return X=$.call(this,[D,z].join(" ").trim())||this,X.name="PineconeMaxRetriesExceededError",X}return B}(Y0.BasePineconeError);c.PineconeMaxRetriesExceededError=IT;var pD=function($){D0(B,$);function B(G){var X=this,D=G.url,z=G.body,Z=G.status,W=D?"The Pinecone service (".concat(D,") is temporarily unavailable."):"",L=Z?"Status Code: ".concat(Z,"."):"",Y="To see overall service health and learn whether this seems like a large-scale problem or one specific to your request, please go to https://status.pinecone.io/ to view our status page. If you believe the error reflects a problem with this client, please file a bug report in the github issue tracker at https://github.com/pinecone-io/pinecone-ts-client",w=z?"Body: ".concat(z):"";return X=$.call(this,[W,L,Y,w].join(" ").trim())||this,X.name="PineconeUnavailableError",X}return B}(Y0.BasePineconeError);c.PineconeUnavailableError=pD;var sD=function($){D0(B,$);function B(G){var X=this,D=G.url,z=G.message;if(D)X=$.call(this,"A call to ".concat(D," returned HTTP status 501. ").concat(z?z:""))||this;else X=$.call(this)||this;return X.name="PineconeNotImplementedError",X}return B}(Y0.BasePineconeError);c.PineconeNotImplementedError=sD;var rD=function($){D0(B,$);function B(G){var X=this,D=G.url,z=G.status,Z=G.body,W=G.message,L=D?"An unexpected error occured while calling the ".concat(D," endpoint. "):"",Y=z?"Status: ".concat(z,". "):"",w=Z?"Body: ".concat(Z):"";return X=$.call(this,[L,W,Y,w].join(" ").trim())||this,X.name="PineconeUnmappedHttpError",X}return B}(Y0.BasePineconeError);c.PineconeUnmappedHttpError=rD;var NT=function($){switch($.status){case 400:return new d8($);case 401:return new _D($);case 403:return new d8($);case 404:return new nD($);case 409:return new aD($);case 500:return new tD($);case 501:return new sD($);case 503:return new pD($);default:throw new rD($)}};c.mapHttpStatusError=NT});var l8=K((S0)=>{var oD=S0&&S0.__extends||function(){var $=function(B,G){return $=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(X,D){X.__proto__=D}||function(X,D){for(var z in D)if(Object.prototype.hasOwnProperty.call(D,z))X[z]=D[z]},$(B,G)};return function(B,G){if(typeof G!=="function"&&G!==null)throw new TypeError("Class extends value "+String(G)+" is not a constructor or null");$(B,G);function X(){this.constructor=B}B.prototype=G===null?Object.create(G):(X.prototype=G.prototype,new X)}}();Object.defineProperty(S0,"__esModule",{value:!0});S0.PineconeRequestError=S0.PineconeConnectionError=void 0;var eD=n$(),UT=function($){oD(B,$);function B(G,X){var D=this,z="";if(X)z=" while calling ".concat(X);return D=$.call(this,"Request failed to reach Pinecone".concat(z,". This can occur for reasons such as network problems that prevent the request from being completed, or a Pinecone API outage. Check your network connection, and visit https://status.pinecone.io/ to see whether any outages are ongoing."),G)||this,D.name="PineconeConnectionError",D}return B}(eD.BasePineconeError);S0.PineconeConnectionError=UT;var hT=function($){oD(B,$);function B(G){var X=this;if(G.response)X=$.call(this,"Request failed during a call to ".concat(G.init.method," ").concat(G.url," with status ").concat(G.response.status),G.error)||this;else X=$.call(this,"Request failed during a call to ".concat(G.init.method," ").concat(G.url),G.error)||this;return X}return B}(eD.BasePineconeError);S0.PineconeRequestError=hT});var $Y=K((a$)=>{var VT=a$&&a$.__extends||function(){var $=function(B,G){return $=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(X,D){X.__proto__=D}||function(X,D){for(var z in D)if(Object.prototype.hasOwnProperty.call(D,z))X[z]=D[z]},$(B,G)};return function(B,G){if(typeof G!=="function"&&G!==null)throw new TypeError("Class extends value "+String(G)+" is not a constructor or null");$(B,G);function X(){this.constructor=B}B.prototype=G===null?Object.create(G):(X.prototype=G.prototype,new X)}}();Object.defineProperty(a$,"__esModule",{value:!0});a$.PineconeArgumentError=void 0;var JT=n$(),AT=function($){VT(B,$);function B(G){var X=$.call(this,"".concat(G))||this;return X.name="PineconeArgumentError",X}return B}(JT.BasePineconeError);a$.PineconeArgumentError=AT});var i8=K((b0)=>{var FT=b0&&b0.__awaiter||function($,B,G,X){function D(z){return z instanceof G?z:new G(function(Z){Z(z)})}return new(G||(G=Promise))(function(z,Z){function W(w){try{Y(X.next(w))}catch(Q){Z(Q)}}function L(w){try{Y(X.throw(w))}catch(Q){Z(Q)}}function Y(w){w.done?z(w.value):D(w.value).then(W,L)}Y((X=X.apply($,B||[])).next())})},MT=b0&&b0.__generator||function($,B){var G={label:0,sent:function(){if(z[0]&1)throw z[1];return z[1]},trys:[],ops:[]},X,D,z,Z;return Z={next:W(0),throw:W(1),return:W(2)},typeof Symbol==="function"&&(Z[Symbol.iterator]=function(){return this}),Z;function W(Y){return function(w){return L([Y,w])}}function L(Y){if(X)throw new TypeError("Generator is already executing.");while(Z&&(Z=0,Y[0]&&(G=0)),G)try{if(X=1,D&&(z=Y[0]&2?D.return:Y[0]?D.throw||((z=D.return)&&z.call(D),0):D.next)&&!(z=z.call(D,Y[1])).done)return z;if(D=0,z)Y=[Y[0]&2,z.value];switch(Y[0]){case 0:case 1:z=Y;break;case 4:return G.label++,{value:Y[1],done:!1};case 5:G.label++,D=Y[1],Y=[0];continue;case 7:Y=G.ops.pop(),G.trys.pop();continue;default:if((z=G.trys,!(z=z.length>0&&z[z.length-1]))&&(Y[0]===6||Y[0]===2)){G=0;continue}if(Y[0]===3&&(!z||Y[1]>z[0]&&Y[1]<z[3])){G.label=Y[1];break}if(Y[0]===6&&G.label<z[1]){G.label=z[1],z=Y;break}if(z&&G.label<z[2]){G.label=z[2],G.ops.push(Y);break}if(z[2])G.ops.pop();G.trys.pop();continue}Y=B.call($,G)}catch(w){Y=[6,w],D=0}finally{X=z=0}if(Y[0]&5)throw Y[1];return{value:Y[0]?Y[1]:void 0,done:!0}}};Object.defineProperty(b0,"__esModule",{value:!0});b0.extractMessage=void 0;var RT=function($){return FT(void 0,void 0,void 0,function(){var B,G;return MT(this,function(X){switch(X.label){case 0:return[4,$.response.text()];case 1:B=X.sent();try{if(G=JSON.parse(B),G.message)B=G.message}catch(D){}return[2,B]}})})};b0.extractMessage=RT});var GY=K((q0)=>{var OT=q0&&q0.__awaiter||function($,B,G,X){function D(z){return z instanceof G?z:new G(function(Z){Z(z)})}return new(G||(G=Promise))(function(z,Z){function W(w){try{Y(X.next(w))}catch(Q){Z(Q)}}function L(w){try{Y(X.throw(w))}catch(Q){Z(Q)}}function Y(w){w.done?z(w.value):D(w.value).then(W,L)}Y((X=X.apply($,B||[])).next())})},ST=q0&&q0.__generator||function($,B){var G={label:0,sent:function(){if(z[0]&1)throw z[1];return z[1]},trys:[],ops:[]},X,D,z,Z;return Z={next:W(0),throw:W(1),return:W(2)},typeof Symbol==="function"&&(Z[Symbol.iterator]=function(){return this}),Z;function W(Y){return function(w){return L([Y,w])}}function L(Y){if(X)throw new TypeError("Generator is already executing.");while(Z&&(Z=0,Y[0]&&(G=0)),G)try{if(X=1,D&&(z=Y[0]&2?D.return:Y[0]?D.throw||((z=D.return)&&z.call(D),0):D.next)&&!(z=z.call(D,Y[1])).done)return z;if(D=0,z)Y=[Y[0]&2,z.value];switch(Y[0]){case 0:case 1:z=Y;break;case 4:return G.label++,{value:Y[1],done:!1};case 5:G.label++,D=Y[1],Y=[0];continue;case 7:Y=G.ops.pop(),G.trys.pop();continue;default:if((z=G.trys,!(z=z.length>0&&z[z.length-1]))&&(Y[0]===6||Y[0]===2)){G=0;continue}if(Y[0]===3&&(!z||Y[1]>z[0]&&Y[1]<z[3])){G.label=Y[1];break}if(Y[0]===6&&G.label<z[1]){G.label=z[1],z=Y;break}if(z&&G.label<z[2]){G.label=z[2],G.ops.push(Y);break}if(z[2])G.ops.pop();G.trys.pop();continue}Y=B.call($,G)}catch(w){Y=[6,w],D=0}finally{X=z=0}if(Y[0]&5)throw Y[1];return{value:Y[0]?Y[1]:void 0,done:!0}}};Object.defineProperty(q0,"__esModule",{value:!0});q0.handleApiError=void 0;var bT=i8(),qT=u8(),BY=l8(),kT=function($,B,G){return OT(void 0,void 0,void 0,function(){var X,D,z,Z,W,L;return ST(this,function(Y){switch(Y.label){case 0:if(!($ instanceof Error&&$.name==="ResponseError"))return[3,5];return X=$,[4,bT.extractMessage(X)];case 1:if(D=Y.sent(),z=X.response.status,!B)return[3,3];return[4,B(z,D)];case 2:return W=Y.sent(),[3,4];case 3:W=D,Y.label=4;case 4:return Z=W,[2,qT.mapHttpStatusError({status:X.response.status,url:X.response.url||G,message:Z})];case 5:if($ instanceof BY.PineconeConnectionError)return[2,$];else return L=$,[2,new BY.PineconeConnectionError(L)];Y.label=6;case 6:return[2]}})})};q0.handleApiError=kT});var m=K((k)=>{var yT=k&&k.__createBinding||(Object.create?function($,B,G,X){if(X===void 0)X=G;var D=Object.getOwnPropertyDescriptor(B,G);if(!D||("get"in D?!B.__esModule:D.writable||D.configurable))D={enumerable:!0,get:function(){return B[G]}};Object.defineProperty($,X,D)}:function($,B,G,X){if(X===void 0)X=G;$[X]=B[G]}),PT=k&&k.__exportStar||function($,B){for(var G in $)if(G!=="default"&&!Object.prototype.hasOwnProperty.call(B,G))yT(B,$,G)};Object.defineProperty(k,"__esModule",{value:!0});k.handleApiError=k.extractMessage=k.PineconeArgumentError=k.BasePineconeError=k.PineconeRequestError=k.PineconeConnectionError=k.PineconeUnableToResolveHostError=k.PineconeEnvironmentVarsNotSupportedError=k.PineconeUnexpectedResponseError=k.PineconeConfigurationError=void 0;var Y6=lD();Object.defineProperty(k,"PineconeConfigurationError",{enumerable:!0,get:function(){return Y6.PineconeConfigurationError}});Object.defineProperty(k,"PineconeUnexpectedResponseError",{enumerable:!0,get:function(){return Y6.PineconeUnexpectedResponseError}});Object.defineProperty(k,"PineconeEnvironmentVarsNotSupportedError",{enumerable:!0,get:function(){return Y6.PineconeEnvironmentVarsNotSupportedError}});Object.defineProperty(k,"PineconeUnableToResolveHostError",{enumerable:!0,get:function(){return Y6.PineconeUnableToResolveHostError}});PT(u8(),k);var zY=l8();Object.defineProperty(k,"PineconeConnectionError",{enumerable:!0,get:function(){return zY.PineconeConnectionError}});Object.defineProperty(k,"PineconeRequestError",{enumerable:!0,get:function(){return zY.PineconeRequestError}});var gT=n$();Object.defineProperty(k,"BasePineconeError",{enumerable:!0,get:function(){return gT.BasePineconeError}});var cT=$Y();Object.defineProperty(k,"PineconeArgumentError",{enumerable:!0,get:function(){return cT.PineconeArgumentError}});var mT=i8();Object.defineProperty(k,"extractMessage",{enumerable:!0,get:function(){return mT.extractMessage}});var jT=GY();Object.defineProperty(k,"handleApiError",{enumerable:!0,get:function(){return jT.handleApiError}})});var YY=K((XY)=>{Object.defineProperty(XY,"__esModule",{value:!0});XY.getFetch=void 0;var xT=m(),vT=function($){if($.fetchApi)return $.fetchApi;else if(global.fetch)return global.fetch;else throw new xT.PineconeConfigurationError("No global or user-provided fetch implementations found. Please supply a fetch implementation.")};XY.getFetch=vT});var wY=K((k0)=>{var ZY=k0&&k0.__awaiter||function($,B,G,X){function D(z){return z instanceof G?z:new G(function(Z){Z(z)})}return new(G||(G=Promise))(function(z,Z){function W(w){try{Y(X.next(w))}catch(Q){Z(Q)}}function L(w){try{Y(X.throw(w))}catch(Q){Z(Q)}}function Y(w){w.done?z(w.value):D(w.value).then(W,L)}Y((X=X.apply($,B||[])).next())})},WY=k0&&k0.__generator||function($,B){var G={label:0,sent:function(){if(z[0]&1)throw z[1];return z[1]},trys:[],ops:[]},X,D,z,Z;return Z={next:W(0),throw:W(1),return:W(2)},typeof Symbol==="function"&&(Z[Symbol.iterator]=function(){return this}),Z;function W(Y){return function(w){return L([Y,w])}}function L(Y){if(X)throw new TypeError("Generator is already executing.");while(Z&&(Z=0,Y[0]&&(G=0)),G)try{if(X=1,D&&(z=Y[0]&2?D.return:Y[0]?D.throw||((z=D.return)&&z.call(D),0):D.next)&&!(z=z.call(D,Y[1])).done)return z;if(D=0,z)Y=[Y[0]&2,z.value];switch(Y[0]){case 0:case 1:z=Y;break;case 4:return G.label++,{value:Y[1],done:!1};case 5:G.label++,D=Y[1],Y=[0];continue;case 7:Y=G.ops.pop(),G.trys.pop();continue;default:if((z=G.trys,!(z=z.length>0&&z[z.length-1]))&&(Y[0]===6||Y[0]===2)){G=0;continue}if(Y[0]===3&&(!z||Y[1]>z[0]&&Y[1]<z[3])){G.label=Y[1];break}if(Y[0]===6&&G.label<z[1]){G.label=z[1],z=Y;break}if(z&&G.label<z[2]){G.label=z[2],G.ops.push(Y);break}if(z[2])G.ops.pop();G.trys.pop();continue}Y=B.call($,G)}catch(w){Y=[6,w],D=0}finally{X=z=0}if(Y[0]&5)throw Y[1];return{value:Y[0]?Y[1]:void 0,done:!0}}};Object.defineProperty(k0,"__esModule",{value:!0});k0.RetryOnServerFailure=void 0;var _8=m(),dT=function(){function $(B,G){if(this.calculateRetryDelay=function(X,D,z,Z){if(D===void 0)D=200;if(z===void 0)z=20000;if(Z===void 0)Z=0.25;var W=D*Math.pow(2,X),L=W*Z*(Math.random()-0.5);return W+=L,Math.min(z,Math.max(0,W))},G)this.maxRetries=G;else this.maxRetries=3;if(this.maxRetries>10)throw new Error("Max retries cannot exceed 10");this.asyncFn=B}return $.prototype.execute=function(){var B=[];for(var G=0;G<arguments.length;G++)B[G]=arguments[G];return ZY(this,void 0,void 0,function(){var X,D,z,Z;return WY(this,function(W){switch(W.label){case 0:if(this.maxRetries<1)return[2,this.asyncFn.apply(this,B)];X=0,W.label=1;case 1:if(!(X<this.maxRetries))return[3,7];W.label=2;case 2:return W.trys.push([2,4,,6]),[4,this.asyncFn.apply(this,B)];case 3:if(D=W.sent(),!this.isRetryError(D))return[2,D];throw D;case 4:if(z=W.sent(),Z=this.mapErrorIfNeeded(z),this.shouldStopRetrying(Z))throw Z;if(X===this.maxRetries-1)throw new _8.PineconeMaxRetriesExceededError(this.maxRetries);return[4,this.delay(X+1)];case 5:return W.sent(),[3,6];case 6:return X++,[3,1];case 7:throw new _8.PineconeMaxRetriesExceededError(this.maxRetries)}})})},$.prototype.isRetryError=function(B){if(B){if(B.name&&["PineconeUnavailableError","PineconeInternalServerError"].includes(B.name))return!0;if(B.status&&B.status>=500)return!0}return!1},$.prototype.delay=function(B){return ZY(this,void 0,void 0,function(){var G;return WY(this,function(X){return G=this.calculateRetryDelay(B),[2,new Promise(function(D){return setTimeout(D,G)})]})})},$.prototype.mapErrorIfNeeded=function(B){if(B===null||B===void 0?void 0:B.status)return _8.mapHttpStatusError(B);return B},$.prototype.shouldStopRetrying=function(B){if(B.status)return B.status<500;if(B.name)return B.name!=="PineconeUnavailableError"&&B.name!=="PineconeInternalServerError";return!0},$}();k0.RetryOnServerFailure=dT});var k1=K((y0)=>{Object.defineProperty(y0,"__esModule",{value:!0});y0.RetryOnServerFailure=y0.getFetch=y0.buildUserAgent=y0.queryParamsStringify=y0.normalizeUrl=y0.debugLog=void 0;var uT=SD();Object.defineProperty(y0,"debugLog",{enumerable:!0,get:function(){return uT.debugLog}});var lT=kD();Object.defineProperty(y0,"normalizeUrl",{enumerable:!0,get:function(){return lT.normalizeUrl}});var iT=mD();Object.defineProperty(y0,"queryParamsStringify",{enumerable:!0,get:function(){return iT.queryParamsStringify}});var _T=uD();Object.defineProperty(y0,"buildUserAgent",{enumerable:!0,get:function(){return _T.buildUserAgent}});var nT=YY();Object.defineProperty(y0,"getFetch",{enumerable:!0,get:function(){return nT.getFetch}});var aT=wY();Object.defineProperty(y0,"RetryOnServerFailure",{enumerable:!0,get:function(){return aT.RetryOnServerFailure}})});var OB=K((y1)=>{var MB=y1&&y1.__awaiter||function($,B,G,X){function D(z){return z instanceof G?z:new G(function(Z){Z(z)})}return new(G||(G=Promise))(function(z,Z){function W(w){try{Y(X.next(w))}catch(Q){Z(Q)}}function L(w){try{Y(X.throw(w))}catch(Q){Z(Q)}}function Y(w){w.done?z(w.value):D(w.value).then(W,L)}Y((X=X.apply($,B||[])).next())})},RB=y1&&y1.__generator||function($,B){var G={label:0,sent:function(){if(z[0]&1)throw z[1];return z[1]},trys:[],ops:[]},X,D,z,Z;return Z={next:W(0),throw:W(1),return:W(2)},typeof Symbol==="function"&&(Z[Symbol.iterator]=function(){return this}),Z;function W(Y){return function(w){return L([Y,w])}}function L(Y){if(X)throw new TypeError("Generator is already executing.");while(Z&&(Z=0,Y[0]&&(G=0)),G)try{if(X=1,D&&(z=Y[0]&2?D.return:Y[0]?D.throw||((z=D.return)&&z.call(D),0):D.next)&&!(z=z.call(D,Y[1])).done)return z;if(D=0,z)Y=[Y[0]&2,z.value];switch(Y[0]){case 0:case 1:z=Y;break;case 4:return G.label++,{value:Y[1],done:!1};case 5:G.label++,D=Y[1],Y=[0];continue;case 7:Y=G.ops.pop(),G.trys.pop();continue;default:if((z=G.trys,!(z=z.length>0&&z[z.length-1]))&&(Y[0]===6||Y[0]===2)){G=0;continue}if(Y[0]===3&&(!z||Y[1]>z[0]&&Y[1]<z[3])){G.label=Y[1];break}if(Y[0]===6&&G.label<z[1]){G.label=z[1],z=Y;break}if(z&&G.label<z[2]){G.label=z[2],G.ops.push(Y);break}if(z[2])G.ops.pop();G.trys.pop();continue}Y=B.call($,G)}catch(w){Y=[6,w],D=0}finally{X=z=0}if(Y[0]&5)throw Y[1];return{value:Y[0]?Y[1]:void 0,done:!0}}},LY=y1&&y1.__spreadArray||function($,B,G){if(G||arguments.length===2){for(var X=0,D=B.length,z;X<D;X++)if(z||!(X in B)){if(!z)z=Array.prototype.slice.call(B,0,X);z[X]=B[X]}}return $.concat(z||Array.prototype.slice.call(B))};Object.defineProperty(y1,"__esModule",{value:!0});y1.middleware=void 0;var pT=z6(),QY=m(),n8=[],t$=function($,B){var G={blue:"\x1B[34m",red:"\x1B[31m",green:"\x1B[32m",yellow:"\x1B[33m"};return G[B]+$+"\x1B[39m"};if(typeof process!=="undefined"&&process&&process.env&&process.env.PINECONE_DEBUG)KY={pre:function($){return MB(void 0,void 0,void 0,function(){var B;return RB(this,function(G){if(console.debug(t$(">>> Request: ".concat($.init.method," ").concat($.url),"blue")),B=JSON.parse(JSON.stringify($.init.headers)),B["Api-Key"]="***REDACTED***",console.debug(t$(">>> Headers: ".concat(JSON.stringify(B)),"blue")),$.init.body)console.debug(t$(">>> Body: ".concat($.init.body),"blue"));return console.debug(""),[2]})})},post:function($){return MB(void 0,void 0,void 0,function(){var B,G,X,D;return RB(this,function(z){switch(z.label){case 0:return console.debug(t$("<<< Status: ".concat($.response.status),"green")),G=(B=console).debug,X=t$,D="<<< Body: ".concat,[4,$.response.text()];case 1:return G.apply(B,[X.apply(void 0,[D.apply("<<< Body: ",[z.sent()]),"green"])]),console.debug(""),[2]}})})}},n8.push(KY);var KY;if(typeof process!=="undefined"&&process&&process.env&&process.env.PINECONE_DEBUG_CURL)HY={post:function($){return MB(void 0,void 0,void 0,function(){var B,G;return RB(this,function(X){if(B='-H "Api-Key: '.concat(($.init.headers||{})["Api-Key"],'"'),$.init.headers&&$.init.headers["Content-Type"])B+=' -H "Content-Type: '.concat($.init.headers["Content-Type"],'"');return G="curl -X ".concat($.init.method," ").concat($.url," ").concat(B," ").concat($.init.body?"-d '".concat($.init.body,"'"):""),console.debug(t$(G,"red")),console.debug(""),[2]})})}},n8.push(HY);var HY;y1.middleware=LY(LY([],n8,!0),[{onError:function($){return MB(void 0,void 0,void 0,function(){var B;return RB(this,function(G){switch(G.label){case 0:return[4,QY.handleApiError($.error,void 0,$.url)];case 1:throw B=G.sent(),B}})})},post:function($){return MB(void 0,void 0,void 0,function(){var B,G;return RB(this,function(X){switch(X.label){case 0:if(B=$.response,!(B.status>=200&&B.status<300))return[3,1];return[2,B];case 1:return[4,QY.handleApiError(new pT.ResponseError(B,"Response returned an error"),void 0,$.url)];case 2:throw G=X.sent(),G}})})}}],!1)});var TY=K((p$)=>{var t8=p$&&p$.__assign||function(){return t8=Object.assign||function($){for(var B,G=1,X=arguments.length;G<X;G++){B=arguments[G];for(var D in B)if(Object.prototype.hasOwnProperty.call(B,D))$[D]=B[D]}return $},t8.apply(this,arguments)};Object.defineProperty(p$,"__esModule",{value:!0});p$.indexOperationsBuilder=void 0;var a8=z6(),Z6=k1(),sT=OB(),rT=function($){var B=$.apiKey,G=Z6.normalizeUrl($.controllerHostUrl)||"https://api.pinecone.io",X=$.additionalHeaders||null,D={basePath:G,apiKey:B,queryParamsStringify:Z6.queryParamsStringify,headers:t8({"User-Agent":Z6.buildUserAgent($),"X-Pinecone-Api-Version":a8.X_PINECONE_API_VERSION},X),fetchApi:Z6.getFetch($),middleware:sT.middleware};return new a8.ManageIndexesApi(new a8.Configuration(D))};p$.indexOperationsBuilder=rT});var P1=K((EY)=>{Object.defineProperty(EY,"__esModule",{value:!0});EY.ValidateProperties=void 0;var oT=m();function eT($,B){var G=Object.keys($),X=G.filter(function(D){return!B.includes(D)});if(X.length>0)throw new oT.PineconeArgumentError("Object contained invalid properties: ".concat(X.join(", "),". Valid properties include ").concat(B.join(", "),"."))}EY.ValidateProperties=eT});var IY=K((A1)=>{var $E=A1&&A1.__awaiter||function($,B,G,X){function D(z){return z instanceof G?z:new G(function(Z){Z(z)})}return new(G||(G=Promise))(function(z,Z){function W(w){try{Y(X.next(w))}catch(Q){Z(Q)}}function L(w){try{Y(X.throw(w))}catch(Q){Z(Q)}}function Y(w){w.done?z(w.value):D(w.value).then(W,L)}Y((X=X.apply($,B||[])).next())})},BE=A1&&A1.__generator||function($,B){var G={label:0,sent:function(){if(z[0]&1)throw z[1];return z[1]},trys:[],ops:[]},X,D,z,Z;return Z={next:W(0),throw:W(1),return:W(2)},typeof Symbol==="function"&&(Z[Symbol.iterator]=function(){return this}),Z;function W(Y){return function(w){return L([Y,w])}}function L(Y){if(X)throw new TypeError("Generator is already executing.");while(Z&&(Z=0,Y[0]&&(G=0)),G)try{if(X=1,D&&(z=Y[0]&2?D.return:Y[0]?D.throw||((z=D.return)&&z.call(D),0):D.next)&&!(z=z.call(D,Y[1])).done)return z;if(D=0,z)Y=[Y[0]&2,z.value];switch(Y[0]){case 0:case 1:z=Y;break;case 4:return G.label++,{value:Y[1],done:!1};case 5:G.label++,D=Y[1],Y=[0];continue;case 7:Y=G.ops.pop(),G.trys.pop();continue;default:if((z=G.trys,!(z=z.length>0&&z[z.length-1]))&&(Y[0]===6||Y[0]===2)){G=0;continue}if(Y[0]===3&&(!z||Y[1]>z[0]&&Y[1]<z[3])){G.label=Y[1];break}if(Y[0]===6&&G.label<z[1]){G.label=z[1],z=Y;break}if(z&&G.label<z[2]){G.label=z[2],G.ops.push(Y);break}if(z[2])G.ops.pop();G.trys.pop();continue}Y=B.call($,G)}catch(w){Y=[6,w],D=0}finally{X=z=0}if(Y[0]&5)throw Y[1];return{value:Y[0]?Y[1]:void 0,done:!0}}};Object.defineProperty(A1,"__esModule",{value:!0});A1.configureIndex=A1.ConfigureIndexRequestProperties=void 0;var p8=m(),CY=P1(),GE=k1();A1.ConfigureIndexRequestProperties=["deletionProtection","spec","tags"];var zE=function($){var B=function(G,X){if(X)CY.ValidateProperties(X,A1.ConfigureIndexRequestProperties);if(!G)throw new p8.PineconeArgumentError("You must pass a non-empty string for `indexName` to configureIndex.");if(!X.spec&&!X.deletionProtection&&!X.tags)throw new p8.PineconeArgumentError("You must pass either `spec`, `deletionProtection` or `tags` to configureIndex in order to update.");if(X.spec){if(X.spec.pod)CY.ValidateProperties(X.spec.pod,["replicas","podType"]);if(X.spec.pod&&X.spec.pod.replicas){if(X.spec.pod.replicas<=0)throw new p8.PineconeArgumentError("`replicas` must be a positive integer.")}}};return function(G,X,D){return $E(void 0,void 0,void 0,function(){var z;return BE(this,function(Z){switch(Z.label){case 0:return B(G,X),z=new GE.RetryOnServerFailure($.configureIndex.bind($),D),[4,z.execute({indexName:G,configureIndexRequest:X})];case 1:return[2,Z.sent()]}})})}};A1.configureIndex=zE});var hY=K((NY)=>{Object.defineProperty(NY,"__esModule",{value:!0});NY.ValidPodTypes=void 0;NY.ValidPodTypes=["s1.x1","s1.x2","s1.x4","s1.x8","p1.x1","p1.x2","p1.x4","p1.x8","p2.x1","p2.x2","p2.x4","p2.x8"]});var AY=K((P0)=>{var s8=P0&&P0.__awaiter||function($,B,G,X){function D(z){return z instanceof G?z:new G(function(Z){Z(z)})}return new(G||(G=Promise))(function(z,Z){function W(w){try{Y(X.next(w))}catch(Q){Z(Q)}}function L(w){try{Y(X.throw(w))}catch(Q){Z(Q)}}function Y(w){w.done?z(w.value):D(w.value).then(W,L)}Y((X=X.apply($,B||[])).next())})},r8=P0&&P0.__generator||function($,B){var G={label:0,sent:function(){if(z[0]&1)throw z[1];return z[1]},trys:[],ops:[]},X,D,z,Z;return Z={next:W(0),throw:W(1),return:W(2)},typeof Symbol==="function"&&(Z[Symbol.iterator]=function(){return this}),Z;function W(Y){return function(w){return L([Y,w])}}function L(Y){if(X)throw new TypeError("Generator is already executing.");while(Z&&(Z=0,Y[0]&&(G=0)),G)try{if(X=1,D&&(z=Y[0]&2?D.return:Y[0]?D.throw||((z=D.return)&&z.call(D),0):D.next)&&!(z=z.call(D,Y[1])).done)return z;if(D=0,z)Y=[Y[0]&2,z.value];switch(Y[0]){case 0:case 1:z=Y;break;case 4:return G.label++,{value:Y[1],done:!1};case 5:G.label++,D=Y[1],Y=[0];continue;case 7:Y=G.ops.pop(),G.trys.pop();continue;default:if((z=G.trys,!(z=z.length>0&&z[z.length-1]))&&(Y[0]===6||Y[0]===2)){G=0;continue}if(Y[0]===3&&(!z||Y[1]>z[0]&&Y[1]<z[3])){G.label=Y[1];break}if(Y[0]===6&&G.label<z[1]){G.label=z[1],z=Y;break}if(z&&G.label<z[2]){G.label=z[2],G.ops.push(Y);break}if(z[2])G.ops.pop();G.trys.pop();continue}Y=B.call($,G)}catch(w){Y=[6,w],D=0}finally{X=z=0}if(Y[0]&5)throw Y[1];return{value:Y[0]?Y[1]:void 0,done:!0}}};Object.defineProperty(P0,"__esModule",{value:!0});P0.createIndex=void 0;var W6=z6(),XE=k1(),VY=hY(),Z1=m(),w6=P1(),DE=["spec","name","dimension","metric","deletionProtection","waitUntilReady","suppressConflicts","tags"],YE=["serverless","pod"],ZE=["cloud","region"],WE=["environment","replicas","shards","podType","pods","metadataConfig","sourceCollection"],wE=function($){var B=function(G){if(G)w6.ValidateProperties(G,DE);if(!G)throw new Z1.PineconeArgumentError("You must pass an object with required properties (`name`, `dimension`, `spec`) to create an index.");if(!G.name)throw new Z1.PineconeArgumentError("You must pass a non-empty string for `name` in order to create an index.");if(!G.dimension||G.dimension<=0)throw new Z1.PineconeArgumentError("You must pass a positive integer for `dimension` in order to create an index.");if(!G.spec)throw new Z1.PineconeArgumentError("You must pass a `pods` or `serverless` `spec` object in order to create an index.");if(G.spec)w6.ValidateProperties(G.spec,YE);if(G.spec.serverless){if(w6.ValidateProperties(G.spec.serverless,ZE),!G.spec.serverless.cloud)throw new Z1.PineconeArgumentError("You must pass a `cloud` for the serverless `spec` object in order to create an index.");if(!G.spec.serverless.region)throw new Z1.PineconeArgumentError("You must pass a `region` for the serverless `spec` object in order to create an index.")}if(G.spec.pod){if(w6.ValidateProperties(G.spec.pod,WE),!G.spec.pod.environment)throw new Z1.PineconeArgumentError("You must pass an `environment` for the pod `spec` object in order to create an index.");if(!G.spec.pod.podType)throw new Z1.PineconeArgumentError("You must pass a `podType` for the pod `spec` object in order to create an index.")}if(G.spec.serverless&&G.spec.serverless.cloud&&!Object.values(W6.ServerlessSpecCloudEnum).includes(G.spec.serverless.cloud))throw new Z1.PineconeArgumentError("Invalid cloud value: ".concat(G.spec.serverless.cloud,". Valid values are: ").concat(Object.values(W6.ServerlessSpecCloudEnum).join(", "),"."));if(G.metric&&!Object.values(W6.IndexModelMetricEnum).includes(G.metric))throw new Z1.PineconeArgumentError("Invalid metric value: ".concat(G.metric,". Valid values are: 'cosine', 'euclidean', or 'dotproduct.'"));if(G.spec.pod&&G.spec.pod.replicas&&G.spec.pod.replicas<=0)throw new Z1.PineconeArgumentError("You must pass a positive integer for `replicas` in order to create an index.");if(G.spec.pod&&G.spec.pod.pods&&G.spec.pod.pods<=0)throw new Z1.PineconeArgumentError("You must pass a positive integer for `pods` in order to create an index.");if(G.spec.pod&&!VY.ValidPodTypes.includes(G.spec.pod.podType))throw new Z1.PineconeArgumentError("Invalid pod type: ".concat(G.spec.pod.podType,". Valid values are: ").concat(VY.ValidPodTypes.join(", "),"."))};return function(G){return s8(void 0,void 0,void 0,function(){var X,D;return r8(this,function(z){switch(z.label){case 0:if(G&&!G.metric)G.metric=W6.IndexModelMetricEnum.Cosine;B(G),z.label=1;case 1:return z.trys.push([1,5,,6]),[4,$.createIndex({createIndexRequest:G})];case 2:if(X=z.sent(),!G.waitUntilReady)return[3,4];return[4,JY($,G.name)];case 3:return[2,z.sent()];case 4:return[2,X];case 5:if(D=z.sent(),!(G.suppressConflicts&&D instanceof Error&&D.name==="PineconeConflictError"))throw D;return[3,6];case 6:return[2]}})})}};P0.createIndex=wE;var JY=function($,B,G){if(G===void 0)G=0;return s8(void 0,void 0,void 0,function(){var X,D,z,Z;return r8(this,function(W){switch(W.label){case 0:return W.trys.push([0,6,,8]),[4,$.describeIndex({indexName:B})];case 1:if(X=W.sent(),(Z=X.status)===null||Z===void 0?void 0:Z.ready)return[3,4];return[4,new Promise(function(L){return setTimeout(L,1000)})];case 2:return W.sent(),[4,JY($,B,G+1)];case 3:return[2,W.sent()];case 4:return XE.debugLog("Index ".concat(B," is ready after ").concat(G)),[2,X];case 5:return[3,8];case 6:return D=W.sent(),[4,Z1.handleApiError(D,function(L,Y){return s8(void 0,void 0,void 0,function(){return r8(this,function(w){return[2,"Error creating index ".concat(B,": ").concat(Y)]})})})];case 7:throw z=W.sent(),z;case 8:return[2]}})})}});var FY=K((g0)=>{var LE=g0&&g0.__awaiter||function($,B,G,X){function D(z){return z instanceof G?z:new G(function(Z){Z(z)})}return new(G||(G=Promise))(function(z,Z){function W(w){try{Y(X.next(w))}catch(Q){Z(Q)}}function L(w){try{Y(X.throw(w))}catch(Q){Z(Q)}}function Y(w){w.done?z(w.value):D(w.value).then(W,L)}Y((X=X.apply($,B||[])).next())})},QE=g0&&g0.__generator||function($,B){var G={label:0,sent:function(){if(z[0]&1)throw z[1];return z[1]},trys:[],ops:[]},X,D,z,Z;return Z={next:W(0),throw:W(1),return:W(2)},typeof Symbol==="function"&&(Z[Symbol.iterator]=function(){return this}),Z;function W(Y){return function(w){return L([Y,w])}}function L(Y){if(X)throw new TypeError("Generator is already executing.");while(Z&&(Z=0,Y[0]&&(G=0)),G)try{if(X=1,D&&(z=Y[0]&2?D.return:Y[0]?D.throw||((z=D.return)&&z.call(D),0):D.next)&&!(z=z.call(D,Y[1])).done)return z;if(D=0,z)Y=[Y[0]&2,z.value];switch(Y[0]){case 0:case 1:z=Y;break;case 4:return G.label++,{value:Y[1],done:!1};case 5:G.label++,D=Y[1],Y=[0];continue;case 7:Y=G.ops.pop(),G.trys.pop();continue;default:if((z=G.trys,!(z=z.length>0&&z[z.length-1]))&&(Y[0]===6||Y[0]===2)){G=0;continue}if(Y[0]===3&&(!z||Y[1]>z[0]&&Y[1]<z[3])){G.label=Y[1];break}if(Y[0]===6&&G.label<z[1]){G.label=z[1],z=Y;break}if(z&&G.label<z[2]){G.label=z[2],G.ops.push(Y);break}if(z[2])G.ops.pop();G.trys.pop();continue}Y=B.call($,G)}catch(w){Y=[6,w],D=0}finally{X=z=0}if(Y[0]&5)throw Y[1];return{value:Y[0]?Y[1]:void 0,done:!0}}};Object.defineProperty(g0,"__esModule",{value:!0});g0.deleteIndex=void 0;var KE=m(),HE=function($){return function(B){return LE(void 0,void 0,void 0,function(){return QE(this,function(G){switch(G.label){case 0:if(!B)throw new KE.PineconeArgumentError("You must pass a non-empty string for `indexName` in order to delete an index");return[4,$.deleteIndex({indexName:B})];case 1:return G.sent(),[2]}})})}};g0.deleteIndex=HE});var MY=K((c0)=>{var TE=c0&&c0.__awaiter||function($,B,G,X){function D(z){return z instanceof G?z:new G(function(Z){Z(z)})}return new(G||(G=Promise))(function(z,Z){function W(w){try{Y(X.next(w))}catch(Q){Z(Q)}}function L(w){try{Y(X.throw(w))}catch(Q){Z(Q)}}function Y(w){w.done?z(w.value):D(w.value).then(W,L)}Y((X=X.apply($,B||[])).next())})},EE=c0&&c0.__generator||function($,B){var G={label:0,sent:function(){if(z[0]&1)throw z[1];return z[1]},trys:[],ops:[]},X,D,z,Z;return Z={next:W(0),throw:W(1),return:W(2)},typeof Symbol==="function"&&(Z[Symbol.iterator]=function(){return this}),Z;function W(Y){return function(w){return L([Y,w])}}function L(Y){if(X)throw new TypeError("Generator is already executing.");while(Z&&(Z=0,Y[0]&&(G=0)),G)try{if(X=1,D&&(z=Y[0]&2?D.return:Y[0]?D.throw||((z=D.return)&&z.call(D),0):D.next)&&!(z=z.call(D,Y[1])).done)return z;if(D=0,z)Y=[Y[0]&2,z.value];switch(Y[0]){case 0:case 1:z=Y;break;case 4:return G.label++,{value:Y[1],done:!1};case 5:G.label++,D=Y[1],Y=[0];continue;case 7:Y=G.ops.pop(),G.trys.pop();continue;default:if((z=G.trys,!(z=z.length>0&&z[z.length-1]))&&(Y[0]===6||Y[0]===2)){G=0;continue}if(Y[0]===3&&(!z||Y[1]>z[0]&&Y[1]<z[3])){G.label=Y[1];break}if(Y[0]===6&&G.label<z[1]){G.label=z[1],z=Y;break}if(z&&G.label<z[2]){G.label=z[2],G.ops.push(Y);break}if(z[2])G.ops.pop();G.trys.pop();continue}Y=B.call($,G)}catch(w){Y=[6,w],D=0}finally{X=z=0}if(Y[0]&5)throw Y[1];return{value:Y[0]?Y[1]:void 0,done:!0}}};Object.defineProperty(c0,"__esModule",{value:!0});c0.describeIndex=void 0;var fE=m(),CE=function($){var B=function(G){if(G.database)for(var X=0,D=Object.keys(G.database);X<D.length;X++){var z=D[X];if(G.database[z]===void 0)delete G.database[z]}};return function(G){return TE(void 0,void 0,void 0,function(){var X;return EE(this,function(D){switch(D.label){case 0:if(!G)throw new fE.PineconeArgumentError("You must pass a non-empty string for `name` in order to describe an index");return[4,$.describeIndex({indexName:G})];case 1:return X=D.sent(),B(X),[2,X]}})})}};c0.describeIndex=CE});var RY=K((m0)=>{var IE=m0&&m0.__awaiter||function($,B,G,X){function D(z){return z instanceof G?z:new G(function(Z){Z(z)})}return new(G||(G=Promise))(function(z,Z){function W(w){try{Y(X.next(w))}catch(Q){Z(Q)}}function L(w){try{Y(X.throw(w))}catch(Q){Z(Q)}}function Y(w){w.done?z(w.value):D(w.value).then(W,L)}Y((X=X.apply($,B||[])).next())})},NE=m0&&m0.__generator||function($,B){var G={label:0,sent:function(){if(z[0]&1)throw z[1];return z[1]},trys:[],ops:[]},X,D,z,Z;return Z={next:W(0),throw:W(1),return:W(2)},typeof Symbol==="function"&&(Z[Symbol.iterator]=function(){return this}),Z;function W(Y){return function(w){return L([Y,w])}}function L(Y){if(X)throw new TypeError("Generator is already executing.");while(Z&&(Z=0,Y[0]&&(G=0)),G)try{if(X=1,D&&(z=Y[0]&2?D.return:Y[0]?D.throw||((z=D.return)&&z.call(D),0):D.next)&&!(z=z.call(D,Y[1])).done)return z;if(D=0,z)Y=[Y[0]&2,z.value];switch(Y[0]){case 0:case 1:z=Y;break;case 4:return G.label++,{value:Y[1],done:!1};case 5:G.label++,D=Y[1],Y=[0];continue;case 7:Y=G.ops.pop(),G.trys.pop();continue;default:if((z=G.trys,!(z=z.length>0&&z[z.length-1]))&&(Y[0]===6||Y[0]===2)){G=0;continue}if(Y[0]===3&&(!z||Y[1]>z[0]&&Y[1]<z[3])){G.label=Y[1];break}if(Y[0]===6&&G.label<z[1]){G.label=z[1],z=Y;break}if(z&&G.label<z[2]){G.label=z[2],G.ops.push(Y);break}if(z[2])G.ops.pop();G.trys.pop();continue}Y=B.call($,G)}catch(w){Y=[6,w],D=0}finally{X=z=0}if(Y[0]&5)throw Y[1];return{value:Y[0]?Y[1]:void 0,done:!0}}};Object.defineProperty(m0,"__esModule",{value:!0});m0.listIndexes=void 0;var UE=function($){return function(){return IE(void 0,void 0,void 0,function(){var B;return NE(this,function(G){switch(G.label){case 0:return[4,$.listIndexes()];case 1:return B=G.sent(),[2,B]}})})}};m0.listIndexes=UE});var OY=K((F1)=>{var hE=F1&&F1.__awaiter||function($,B,G,X){function D(z){return z instanceof G?z:new G(function(Z){Z(z)})}return new(G||(G=Promise))(function(z,Z){function W(w){try{Y(X.next(w))}catch(Q){Z(Q)}}function L(w){try{Y(X.throw(w))}catch(Q){Z(Q)}}function Y(w){w.done?z(w.value):D(w.value).then(W,L)}Y((X=X.apply($,B||[])).next())})},VE=F1&&F1.__generator||function($,B){var G={label:0,sent:function(){if(z[0]&1)throw z[1];return z[1]},trys:[],ops:[]},X,D,z,Z;return Z={next:W(0),throw:W(1),return:W(2)},typeof Symbol==="function"&&(Z[Symbol.iterator]=function(){return this}),Z;function W(Y){return function(w){return L([Y,w])}}function L(Y){if(X)throw new TypeError("Generator is already executing.");while(Z&&(Z=0,Y[0]&&(G=0)),G)try{if(X=1,D&&(z=Y[0]&2?D.return:Y[0]?D.throw||((z=D.return)&&z.call(D),0):D.next)&&!(z=z.call(D,Y[1])).done)return z;if(D=0,z)Y=[Y[0]&2,z.value];switch(Y[0]){case 0:case 1:z=Y;break;case 4:return G.label++,{value:Y[1],done:!1};case 5:G.label++,D=Y[1],Y=[0];continue;case 7:Y=G.ops.pop(),G.trys.pop();continue;default:if((z=G.trys,!(z=z.length>0&&z[z.length-1]))&&(Y[0]===6||Y[0]===2)){G=0;continue}if(Y[0]===3&&(!z||Y[1]>z[0]&&Y[1]<z[3])){G.label=Y[1];break}if(Y[0]===6&&G.label<z[1]){G.label=z[1],z=Y;break}if(z&&G.label<z[2]){G.label=z[2],G.ops.push(Y);break}if(z[2])G.ops.pop();G.trys.pop();continue}Y=B.call($,G)}catch(w){Y=[6,w],D=0}finally{X=z=0}if(Y[0]&5)throw Y[1];return{value:Y[0]?Y[1]:void 0,done:!0}}};Object.defineProperty(F1,"__esModule",{value:!0});F1.createCollection=F1.CreateCollectionRequestProperties=void 0;var L6=m(),JE=P1();F1.CreateCollectionRequestProperties=["source","name"];var AE=function($){var B=function(G){if(G)JE.ValidateProperties(G,F1.CreateCollectionRequestProperties);if(!G||typeof G!=="object")throw new L6.PineconeArgumentError("You must pass a non-empty object with `name` and `source` fields in order to create a collection.");if(!G.name&&!G.source)throw new L6.PineconeArgumentError("The argument to createCollection must have required properties: `name`, `source`.");if(!G.name)throw new L6.PineconeArgumentError("You must pass a non-empty string for `name` in order to create a collection.");if(!G.source)throw new L6.PineconeArgumentError("You must pass a non-empty string for `source` in order to create a collection.")};return function(G){return hE(void 0,void 0,void 0,function(){return VE(this,function(X){switch(X.label){case 0:return B(G),[4,$.createCollection({createCollectionRequest:G})];case 1:return[2,X.sent()]}})})}};F1.createCollection=AE});var SY=K((j0)=>{var FE=j0&&j0.__awaiter||function($,B,G,X){function D(z){return z instanceof G?z:new G(function(Z){Z(z)})}return new(G||(G=Promise))(function(z,Z){function W(w){try{Y(X.next(w))}catch(Q){Z(Q)}}function L(w){try{Y(X.throw(w))}catch(Q){Z(Q)}}function Y(w){w.done?z(w.value):D(w.value).then(W,L)}Y((X=X.apply($,B||[])).next())})},ME=j0&&j0.__generator||function($,B){var G={label:0,sent:function(){if(z[0]&1)throw z[1];return z[1]},trys:[],ops:[]},X,D,z,Z;return Z={next:W(0),throw:W(1),return:W(2)},typeof Symbol==="function"&&(Z[Symbol.iterator]=function(){return this}),Z;function W(Y){return function(w){return L([Y,w])}}function L(Y){if(X)throw new TypeError("Generator is already executing.");while(Z&&(Z=0,Y[0]&&(G=0)),G)try{if(X=1,D&&(z=Y[0]&2?D.return:Y[0]?D.throw||((z=D.return)&&z.call(D),0):D.next)&&!(z=z.call(D,Y[1])).done)return z;if(D=0,z)Y=[Y[0]&2,z.value];switch(Y[0]){case 0:case 1:z=Y;break;case 4:return G.label++,{value:Y[1],done:!1};case 5:G.label++,D=Y[1],Y=[0];continue;case 7:Y=G.ops.pop(),G.trys.pop();continue;default:if((z=G.trys,!(z=z.length>0&&z[z.length-1]))&&(Y[0]===6||Y[0]===2)){G=0;continue}if(Y[0]===3&&(!z||Y[1]>z[0]&&Y[1]<z[3])){G.label=Y[1];break}if(Y[0]===6&&G.label<z[1]){G.label=z[1],z=Y;break}if(z&&G.label<z[2]){G.label=z[2],G.ops.push(Y);break}if(z[2])G.ops.pop();G.trys.pop();continue}Y=B.call($,G)}catch(w){Y=[6,w],D=0}finally{X=z=0}if(Y[0]&5)throw Y[1];return{value:Y[0]?Y[1]:void 0,done:!0}}};Object.defineProperty(j0,"__esModule",{value:!0});j0.deleteCollection=void 0;var RE=m(),OE=function($){return function(B){return FE(void 0,void 0,void 0,function(){return ME(this,function(G){switch(G.label){case 0:if(!B)throw new RE.PineconeArgumentError("You must pass a non-empty string for `collectionName`");return[4,$.deleteCollection({collectionName:B})];case 1:return G.sent(),[2]}})})}};j0.deleteCollection=OE});var bY=K((x0)=>{var SE=x0&&x0.__awaiter||function($,B,G,X){function D(z){return z instanceof G?z:new G(function(Z){Z(z)})}return new(G||(G=Promise))(function(z,Z){function W(w){try{Y(X.next(w))}catch(Q){Z(Q)}}function L(w){try{Y(X.throw(w))}catch(Q){Z(Q)}}function Y(w){w.done?z(w.value):D(w.value).then(W,L)}Y((X=X.apply($,B||[])).next())})},bE=x0&&x0.__generator||function($,B){var G={label:0,sent:function(){if(z[0]&1)throw z[1];return z[1]},trys:[],ops:[]},X,D,z,Z;return Z={next:W(0),throw:W(1),return:W(2)},typeof Symbol==="function"&&(Z[Symbol.iterator]=function(){return this}),Z;function W(Y){return function(w){return L([Y,w])}}function L(Y){if(X)throw new TypeError("Generator is already executing.");while(Z&&(Z=0,Y[0]&&(G=0)),G)try{if(X=1,D&&(z=Y[0]&2?D.return:Y[0]?D.throw||((z=D.return)&&z.call(D),0):D.next)&&!(z=z.call(D,Y[1])).done)return z;if(D=0,z)Y=[Y[0]&2,z.value];switch(Y[0]){case 0:case 1:z=Y;break;case 4:return G.label++,{value:Y[1],done:!1};case 5:G.label++,D=Y[1],Y=[0];continue;case 7:Y=G.ops.pop(),G.trys.pop();continue;default:if((z=G.trys,!(z=z.length>0&&z[z.length-1]))&&(Y[0]===6||Y[0]===2)){G=0;continue}if(Y[0]===3&&(!z||Y[1]>z[0]&&Y[1]<z[3])){G.label=Y[1];break}if(Y[0]===6&&G.label<z[1]){G.label=z[1],z=Y;break}if(z&&G.label<z[2]){G.label=z[2],G.ops.push(Y);break}if(z[2])G.ops.pop();G.trys.pop();continue}Y=B.call($,G)}catch(w){Y=[6,w],D=0}finally{X=z=0}if(Y[0]&5)throw Y[1];return{value:Y[0]?Y[1]:void 0,done:!0}}};Object.defineProperty(x0,"__esModule",{value:!0});x0.describeCollection=void 0;var qE=m(),kE=function($){return function(B){return SE(void 0,void 0,void 0,function(){return bE(this,function(G){switch(G.label){case 0:if(!B||B.length===0)throw new qE.PineconeArgumentError("You must pass a non-empty string for `name` in order to describe a collection");return[4,$.describeCollection({collectionName:B})];case 1:return[2,G.sent()]}})})}};x0.describeCollection=kE});var qY=K((v0)=>{var yE=v0&&v0.__awaiter||function($,B,G,X){function D(z){return z instanceof G?z:new G(function(Z){Z(z)})}return new(G||(G=Promise))(function(z,Z){function W(w){try{Y(X.next(w))}catch(Q){Z(Q)}}function L(w){try{Y(X.throw(w))}catch(Q){Z(Q)}}function Y(w){w.done?z(w.value):D(w.value).then(W,L)}Y((X=X.apply($,B||[])).next())})},PE=v0&&v0.__generator||function($,B){var G={label:0,sent:function(){if(z[0]&1)throw z[1];return z[1]},trys:[],ops:[]},X,D,z,Z;return Z={next:W(0),throw:W(1),return:W(2)},typeof Symbol==="function"&&(Z[Symbol.iterator]=function(){return this}),Z;function W(Y){return function(w){return L([Y,w])}}function L(Y){if(X)throw new TypeError("Generator is already executing.");while(Z&&(Z=0,Y[0]&&(G=0)),G)try{if(X=1,D&&(z=Y[0]&2?D.return:Y[0]?D.throw||((z=D.return)&&z.call(D),0):D.next)&&!(z=z.call(D,Y[1])).done)return z;if(D=0,z)Y=[Y[0]&2,z.value];switch(Y[0]){case 0:case 1:z=Y;break;case 4:return G.label++,{value:Y[1],done:!1};case 5:G.label++,D=Y[1],Y=[0];continue;case 7:Y=G.ops.pop(),G.trys.pop();continue;default:if((z=G.trys,!(z=z.length>0&&z[z.length-1]))&&(Y[0]===6||Y[0]===2)){G=0;continue}if(Y[0]===3&&(!z||Y[1]>z[0]&&Y[1]<z[3])){G.label=Y[1];break}if(Y[0]===6&&G.label<z[1]){G.label=z[1],z=Y;break}if(z&&G.label<z[2]){G.label=z[2],G.ops.push(Y);break}if(z[2])G.ops.pop();G.trys.pop();continue}Y=B.call($,G)}catch(w){Y=[6,w],D=0}finally{X=z=0}if(Y[0]&5)throw Y[1];return{value:Y[0]?Y[1]:void 0,done:!0}}};Object.defineProperty(v0,"__esModule",{value:!0});v0.listCollections=void 0;var gE=function($){return function(){return yE(void 0,void 0,void 0,function(){var B;return PE(this,function(G){switch(G.label){case 0:return[4,$.listCollections()];case 1:return B=G.sent(),[2,B]}})})}};v0.listCollections=gE});var o8=K((C1)=>{Object.defineProperty(C1,"__esModule",{value:!0});C1.listCollections=C1.describeCollection=C1.deleteCollection=C1.createCollection=C1.listIndexes=C1.describeIndex=C1.deleteIndex=C1.createIndex=C1.configureIndex=C1.indexOperationsBuilder=void 0;var cE=TY();Object.defineProperty(C1,"indexOperationsBuilder",{enumerable:!0,get:function(){return cE.indexOperationsBuilder}});var mE=IY();Object.defineProperty(C1,"configureIndex",{enumerable:!0,get:function(){return mE.configureIndex}});var jE=AY();Object.defineProperty(C1,"createIndex",{enumerable:!0,get:function(){return jE.createIndex}});var xE=FY();Object.defineProperty(C1,"deleteIndex",{enumerable:!0,get:function(){return xE.deleteIndex}});var vE=MY();Object.defineProperty(C1,"describeIndex",{enumerable:!0,get:function(){return vE.describeIndex}});var dE=RY();Object.defineProperty(C1,"listIndexes",{enumerable:!0,get:function(){return dE.listIndexes}});var uE=OY();Object.defineProperty(C1,"createCollection",{enumerable:!0,get:function(){return uE.createCollection}});var lE=SY();Object.defineProperty(C1,"deleteCollection",{enumerable:!0,get:function(){return lE.deleteCollection}});var iE=bY();Object.defineProperty(C1,"describeCollection",{enumerable:!0,get:function(){return iE.describeCollection}});var _E=qY();Object.defineProperty(C1,"listCollections",{enumerable:!0,get:function(){return _E.listCollections}})});var Q6=K((d0)=>{var kY=d0&&d0.__awaiter||function($,B,G,X){function D(z){return z instanceof G?z:new G(function(Z){Z(z)})}return new(G||(G=Promise))(function(z,Z){function W(w){try{Y(X.next(w))}catch(Q){Z(Q)}}function L(w){try{Y(X.throw(w))}catch(Q){Z(Q)}}function Y(w){w.done?z(w.value):D(w.value).then(W,L)}Y((X=X.apply($,B||[])).next())})},yY=d0&&d0.__generator||function($,B){var G={label:0,sent:function(){if(z[0]&1)throw z[1];return z[1]},trys:[],ops:[]},X,D,z,Z;return Z={next:W(0),throw:W(1),return:W(2)},typeof Symbol==="function"&&(Z[Symbol.iterator]=function(){return this}),Z;function W(Y){return function(w){return L([Y,w])}}function L(Y){if(X)throw new TypeError("Generator is already executing.");while(Z&&(Z=0,Y[0]&&(G=0)),G)try{if(X=1,D&&(z=Y[0]&2?D.return:Y[0]?D.throw||((z=D.return)&&z.call(D),0):D.next)&&!(z=z.call(D,Y[1])).done)return z;if(D=0,z)Y=[Y[0]&2,z.value];switch(Y[0]){case 0:case 1:z=Y;break;case 4:return G.label++,{value:Y[1],done:!1};case 5:G.label++,D=Y[1],Y=[0];continue;case 7:Y=G.ops.pop(),G.trys.pop();continue;default:if((z=G.trys,!(z=z.length>0&&z[z.length-1]))&&(Y[0]===6||Y[0]===2)){G=0;continue}if(Y[0]===3&&(!z||Y[1]>z[0]&&Y[1]<z[3])){G.label=Y[1];break}if(Y[0]===6&&G.label<z[1]){G.label=z[1],z=Y;break}if(z&&G.label<z[2]){G.label=z[2],G.ops.push(Y);break}if(z[2])G.ops.pop();G.trys.pop();continue}Y=B.call($,G)}catch(w){Y=[6,w],D=0}finally{X=z=0}if(Y[0]&5)throw Y[1];return{value:Y[0]?Y[1]:void 0,done:!0}}};Object.defineProperty(d0,"__esModule",{value:!0});d0.IndexHostSingleton=void 0;var PY=o8(),gY=m(),aE=k1();d0.IndexHostSingleton=function(){var $=this,B={},G=function(z,Z){return kY($,void 0,void 0,function(){var W,L,Y;return yY(this,function(w){switch(w.label){case 0:return W=PY.indexOperationsBuilder(z),[4,PY.describeIndex(W)(Z)];case 1:if(L=w.sent(),Y=L.host,!Y)throw new gY.PineconeUnableToResolveHostError("The HTTP call succeeded but the host URL could not be resolved. Please make sure the index exists and is in a ready state.");else return[2,Y];return[2]}})})},X=function(z,Z){return"".concat(z.apiKey,"-").concat(Z)},D={getHostUrl:function(z,Z){return kY($,void 0,void 0,function(){var W,L;return yY(this,function(Y){switch(Y.label){case 0:if(W=X(z,Z),!(W in B))return[3,1];return[2,B[W]];case 1:return[4,G(z,Z)];case 2:if(L=Y.sent(),D._set(z,Z,L),!B[W])throw new gY.PineconeUnableToResolveHostError("Could not get host for index: ".concat(Z,". Call describeIndex('").concat(Z,"') to check the current status."));return[2,B[W]]}})})},_reset:function(){for(var z=0,Z=Object.keys(B);z<Z.length;z++){var W=Z[z];delete B[W]}},_set:function(z,Z,W){var L=aE.normalizeUrl(W);if(!L)return;var Y=X(z,Z);B[Y]=L},_delete:function(z,Z){var W=X(z,Z);delete B[W]}};return D}()});var e8=K((cY)=>{Object.defineProperty(cY,"__esModule",{value:!0});cY.PineconeRecordsProperties=cY.PineconeConfigurationProperties=void 0;cY.PineconeConfigurationProperties=["apiKey","controllerHostUrl","fetchApi","additionalHeaders","sourceTag","maxRetries"];cY.PineconeRecordsProperties=["id","values","sparseValues","metadata"]});var jY=K((u0)=>{var pE=u0&&u0.__awaiter||function($,B,G,X){function D(z){return z instanceof G?z:new G(function(Z){Z(z)})}return new(G||(G=Promise))(function(z,Z){function W(w){try{Y(X.next(w))}catch(Q){Z(Q)}}function L(w){try{Y(X.throw(w))}catch(Q){Z(Q)}}function Y(w){w.done?z(w.value):D(w.value).then(W,L)}Y((X=X.apply($,B||[])).next())})},sE=u0&&u0.__generator||function($,B){var G={label:0,sent:function(){if(z[0]&1)throw z[1];return z[1]},trys:[],ops:[]},X,D,z,Z;return Z={next:W(0),throw:W(1),return:W(2)},typeof Symbol==="function"&&(Z[Symbol.iterator]=function(){return this}),Z;function W(Y){return function(w){return L([Y,w])}}function L(Y){if(X)throw new TypeError("Generator is already executing.");while(Z&&(Z=0,Y[0]&&(G=0)),G)try{if(X=1,D&&(z=Y[0]&2?D.return:Y[0]?D.throw||((z=D.return)&&z.call(D),0):D.next)&&!(z=z.call(D,Y[1])).done)return z;if(D=0,z)Y=[Y[0]&2,z.value];switch(Y[0]){case 0:case 1:z=Y;break;case 4:return G.label++,{value:Y[1],done:!1};case 5:G.label++,D=Y[1],Y=[0];continue;case 7:Y=G.ops.pop(),G.trys.pop();continue;default:if((z=G.trys,!(z=z.length>0&&z[z.length-1]))&&(Y[0]===6||Y[0]===2)){G=0;continue}if(Y[0]===3&&(!z||Y[1]>z[0]&&Y[1]<z[3])){G.label=Y[1];break}if(Y[0]===6&&G.label<z[1]){G.label=z[1],z=Y;break}if(z&&G.label<z[2]){G.label=z[2],G.ops.push(Y);break}if(z[2])G.ops.pop();G.trys.pop();continue}Y=B.call($,G)}catch(w){Y=[6,w],D=0}finally{X=z=0}if(Y[0]&5)throw Y[1];return{value:Y[0]?Y[1]:void 0,done:!0}}};Object.defineProperty(u0,"__esModule",{value:!0});u0.UpsertCommand=void 0;var rE=e8(),$4=m(),oE=P1(),eE=k1(),$f=function(){function $(B,G){this.validator=function(X){for(var D=0,z=X;D<z.length;D++){var Z=z[D];oE.ValidateProperties(Z,rE.PineconeRecordsProperties)}if(X.length===0)throw new $4.PineconeArgumentError("Must pass in at least 1 record to upsert.");X.forEach(function(W){if(!W.id)throw new $4.PineconeArgumentError("Every record must include an `id` property in order to upsert.");if(!W.values)throw new $4.PineconeArgumentError("Every record must include a `values` property in order to upsert.")})},this.apiProvider=B,this.namespace=G}return $.prototype.run=function(B,G){return pE(this,void 0,void 0,function(){var X,D;return sE(this,function(z){switch(z.label){case 0:return this.validator(B),[4,this.apiProvider.provide()];case 1:return X=z.sent(),D=new eE.RetryOnServerFailure(X.upsertVectors.bind(X),G),[4,D.execute({upsertRequest:{vectors:B,namespace:this.namespace}})];case 2:return z.sent(),[2]}})})},$}();u0.UpsertCommand=$f});var xY=K((g1)=>{var B4=g1&&g1.__assign||function(){return B4=Object.assign||function($){for(var B,G=1,X=arguments.length;G<X;G++){B=arguments[G];for(var D in B)if(Object.prototype.hasOwnProperty.call(B,D))$[D]=B[D]}return $},B4.apply(this,arguments)},Bf=g1&&g1.__awaiter||function($,B,G,X){function D(z){return z instanceof G?z:new G(function(Z){Z(z)})}return new(G||(G=Promise))(function(z,Z){function W(w){try{Y(X.next(w))}catch(Q){Z(Q)}}function L(w){try{Y(X.throw(w))}catch(Q){Z(Q)}}function Y(w){w.done?z(w.value):D(w.value).then(W,L)}Y((X=X.apply($,B||[])).next())})},Gf=g1&&g1.__generator||function($,B){var G={label:0,sent:function(){if(z[0]&1)throw z[1];return z[1]},trys:[],ops:[]},X,D,z,Z;return Z={next:W(0),throw:W(1),return:W(2)},typeof Symbol==="function"&&(Z[Symbol.iterator]=function(){return this}),Z;function W(Y){return function(w){return L([Y,w])}}function L(Y){if(X)throw new TypeError("Generator is already executing.");while(Z&&(Z=0,Y[0]&&(G=0)),G)try{if(X=1,D&&(z=Y[0]&2?D.return:Y[0]?D.throw||((z=D.return)&&z.call(D),0):D.next)&&!(z=z.call(D,Y[1])).done)return z;if(D=0,z)Y=[Y[0]&2,z.value];switch(Y[0]){case 0:case 1:z=Y;break;case 4:return G.label++,{value:Y[1],done:!1};case 5:G.label++,D=Y[1],Y=[0];continue;case 7:Y=G.ops.pop(),G.trys.pop();continue;default:if((z=G.trys,!(z=z.length>0&&z[z.length-1]))&&(Y[0]===6||Y[0]===2)){G=0;continue}if(Y[0]===3&&(!z||Y[1]>z[0]&&Y[1]<z[3])){G.label=Y[1];break}if(Y[0]===6&&G.label<z[1]){G.label=z[1],z=Y;break}if(z&&G.label<z[2]){G.label=z[2],G.ops.push(Y);break}if(z[2])G.ops.pop();G.trys.pop();continue}Y=B.call($,G)}catch(w){Y=[6,w],D=0}finally{X=z=0}if(Y[0]&5)throw Y[1];return{value:Y[0]?Y[1]:void 0,done:!0}}};Object.defineProperty(g1,"__esModule",{value:!0});g1.FetchCommand=void 0;var zf=m(),Xf=function(){function $(B,G){this.validator=function(X){if(X.length===0)throw new zf.PineconeArgumentError("Must pass in at least 1 recordID.")},this.apiProvider=B,this.namespace=G}return $.prototype.run=function(B){return Bf(this,void 0,void 0,function(){var G,X;return Gf(this,function(D){switch(D.label){case 0:return this.validator(B),[4,this.apiProvider.provide()];case 1:return G=D.sent(),[4,G.fetchVectors({ids:B,namespace:this.namespace})];case 2:return X=D.sent(),[2,B4({records:X.vectors?X.vectors:{},namespace:X.namespace?X.namespace:""},X.usage&&{usage:X.usage})]}})})},$}();g1.FetchCommand=Xf});var vY=K((c1)=>{var K6=c1&&c1.__assign||function(){return K6=Object.assign||function($){for(var B,G=1,X=arguments.length;G<X;G++){B=arguments[G];for(var D in B)if(Object.prototype.hasOwnProperty.call(B,D))$[D]=B[D]}return $},K6.apply(this,arguments)},Df=c1&&c1.__awaiter||function($,B,G,X){function D(z){return z instanceof G?z:new G(function(Z){Z(z)})}return new(G||(G=Promise))(function(z,Z){function W(w){try{Y(X.next(w))}catch(Q){Z(Q)}}function L(w){try{Y(X.throw(w))}catch(Q){Z(Q)}}function Y(w){w.done?z(w.value):D(w.value).then(W,L)}Y((X=X.apply($,B||[])).next())})},Yf=c1&&c1.__generator||function($,B){var G={label:0,sent:function(){if(z[0]&1)throw z[1];return z[1]},trys:[],ops:[]},X,D,z,Z;return Z={next:W(0),throw:W(1),return:W(2)},typeof Symbol==="function"&&(Z[Symbol.iterator]=function(){return this}),Z;function W(Y){return function(w){return L([Y,w])}}function L(Y){if(X)throw new TypeError("Generator is already executing.");while(Z&&(Z=0,Y[0]&&(G=0)),G)try{if(X=1,D&&(z=Y[0]&2?D.return:Y[0]?D.throw||((z=D.return)&&z.call(D),0):D.next)&&!(z=z.call(D,Y[1])).done)return z;if(D=0,z)Y=[Y[0]&2,z.value];switch(Y[0]){case 0:case 1:z=Y;break;case 4:return G.label++,{value:Y[1],done:!1};case 5:G.label++,D=Y[1],Y=[0];continue;case 7:Y=G.ops.pop(),G.trys.pop();continue;default:if((z=G.trys,!(z=z.length>0&&z[z.length-1]))&&(Y[0]===6||Y[0]===2)){G=0;continue}if(Y[0]===3&&(!z||Y[1]>z[0]&&Y[1]<z[3])){G.label=Y[1];break}if(Y[0]===6&&G.label<z[1]){G.label=z[1],z=Y;break}if(z&&G.label<z[2]){G.label=z[2],G.ops.push(Y);break}if(z[2])G.ops.pop();G.trys.pop();continue}Y=B.call($,G)}catch(w){Y=[6,w],D=0}finally{X=z=0}if(Y[0]&5)throw Y[1];return{value:Y[0]?Y[1]:void 0,done:!0}}};Object.defineProperty(c1,"__esModule",{value:!0});c1.UpdateCommand=void 0;var Zf=m(),Wf=P1(),wf=k1(),Lf=["id","values","sparseValues","metadata"],Qf=function(){function $(B,G){this.validator=function(X){if(X)Wf.ValidateProperties(X,Lf);if(X&&!X.id)throw new Zf.PineconeArgumentError("You must enter a non-empty string for the `id` field in order to update a record.")},this.apiProvider=B,this.namespace=G}return $.prototype.run=function(B,G){return Df(this,void 0,void 0,function(){var X,D,z;return Yf(this,function(Z){switch(Z.label){case 0:return this.validator(B),X={id:B.id,values:B.values,sparseValues:B.sparseValues,setMetadata:B.metadata},[4,this.apiProvider.provide()];case 1:return D=Z.sent(),z=new wf.RetryOnServerFailure(D.updateVector.bind(D),G),[4,z.execute({updateRequest:K6(K6({},X),{namespace:this.namespace})})];case 2:return Z.sent(),[2]}})})},$}();c1.UpdateCommand=Qf});var dY=K((m1)=>{var SB=m1&&m1.__assign||function(){return SB=Object.assign||function($){for(var B,G=1,X=arguments.length;G<X;G++){B=arguments[G];for(var D in B)if(Object.prototype.hasOwnProperty.call(B,D))$[D]=B[D]}return $},SB.apply(this,arguments)},Kf=m1&&m1.__awaiter||function($,B,G,X){function D(z){return z instanceof G?z:new G(function(Z){Z(z)})}return new(G||(G=Promise))(function(z,Z){function W(w){try{Y(X.next(w))}catch(Q){Z(Q)}}function L(w){try{Y(X.throw(w))}catch(Q){Z(Q)}}function Y(w){w.done?z(w.value):D(w.value).then(W,L)}Y((X=X.apply($,B||[])).next())})},Hf=m1&&m1.__generator||function($,B){var G={label:0,sent:function(){if(z[0]&1)throw z[1];return z[1]},trys:[],ops:[]},X,D,z,Z;return Z={next:W(0),throw:W(1),return:W(2)},typeof Symbol==="function"&&(Z[Symbol.iterator]=function(){return this}),Z;function W(Y){return function(w){return L([Y,w])}}function L(Y){if(X)throw new TypeError("Generator is already executing.");while(Z&&(Z=0,Y[0]&&(G=0)),G)try{if(X=1,D&&(z=Y[0]&2?D.return:Y[0]?D.throw||((z=D.return)&&z.call(D),0):D.next)&&!(z=z.call(D,Y[1])).done)return z;if(D=0,z)Y=[Y[0]&2,z.value];switch(Y[0]){case 0:case 1:z=Y;break;case 4:return G.label++,{value:Y[1],done:!1};case 5:G.label++,D=Y[1],Y=[0];continue;case 7:Y=G.ops.pop(),G.trys.pop();continue;default:if((z=G.trys,!(z=z.length>0&&z[z.length-1]))&&(Y[0]===6||Y[0]===2)){G=0;continue}if(Y[0]===3&&(!z||Y[1]>z[0]&&Y[1]<z[3])){G.label=Y[1];break}if(Y[0]===6&&G.label<z[1]){G.label=z[1],z=Y;break}if(z&&G.label<z[2]){G.label=z[2],G.ops.push(Y);break}if(z[2])G.ops.pop();G.trys.pop();continue}Y=B.call($,G)}catch(w){Y=[6,w],D=0}finally{X=z=0}if(Y[0]&5)throw Y[1];return{value:Y[0]?Y[1]:void 0,done:!0}}};Object.defineProperty(m1,"__esModule",{value:!0});m1.QueryCommand=void 0;var N$=m(),Tf=P1(),Ef=["id","vector","sparseVector","includeValues","includeMetadata","filter","topK"],ff=function(){function $(B,G){this.validator=function(X){var D,z;if(X)Tf.ValidateProperties(X,Ef);if(!X)throw new N$.PineconeArgumentError("You must enter a query configuration object to query the index.");if(X&&!X.topK)throw new N$.PineconeArgumentError("You must enter an integer for the `topK` search results to be returned.");if(X&&X.topK&&X.topK<1)throw new N$.PineconeArgumentError("`topK` property must be greater than 0.");if(X&&X.filter){var Z=Object.keys(X.filter);if(Z.length===0)throw new N$.PineconeArgumentError("You must enter a `filter` object with at least one key-value pair.")}if("id"in X){if(!X.id)throw new N$.PineconeArgumentError("You must enter non-empty string for `id` to query by record ID.")}if("vector"in X){if(X.vector.length===0)throw new N$.PineconeArgumentError("You must enter an array of `RecordValues` in order to query by vector values.")}if("sparseVector"in X){if(((D=X.sparseVector)===null||D===void 0?void 0:D.indices.length)===0||((z=X.sparseVector)===null||z===void 0?void 0:z.values.length)===0)throw new N$.PineconeArgumentError("You must enter a `RecordSparseValues` object with `indices` and `values` properties in order to query by sparse vector values.")}},this.apiProvider=B,this.namespace=G}return $.prototype.run=function(B){return Kf(this,void 0,void 0,function(){var G,X,D;return Hf(this,function(z){switch(z.label){case 0:return this.validator(B),[4,this.apiProvider.provide()];case 1:return G=z.sent(),[4,G.queryVectors({queryRequest:SB(SB({},B),{namespace:this.namespace})})];case 2:return X=z.sent(),D=X.matches?X.matches:[],[2,SB({matches:D,namespace:this.namespace},X.usage&&{usage:X.usage})]}})})},$}();m1.QueryCommand=ff});var uY=K((l0)=>{var Cf=l0&&l0.__awaiter||function($,B,G,X){function D(z){return z instanceof G?z:new G(function(Z){Z(z)})}return new(G||(G=Promise))(function(z,Z){function W(w){try{Y(X.next(w))}catch(Q){Z(Q)}}function L(w){try{Y(X.throw(w))}catch(Q){Z(Q)}}function Y(w){w.done?z(w.value):D(w.value).then(W,L)}Y((X=X.apply($,B||[])).next())})},If=l0&&l0.__generator||function($,B){var G={label:0,sent:function(){if(z[0]&1)throw z[1];return z[1]},trys:[],ops:[]},X,D,z,Z;return Z={next:W(0),throw:W(1),return:W(2)},typeof Symbol==="function"&&(Z[Symbol.iterator]=function(){return this}),Z;function W(Y){return function(w){return L([Y,w])}}function L(Y){if(X)throw new TypeError("Generator is already executing.");while(Z&&(Z=0,Y[0]&&(G=0)),G)try{if(X=1,D&&(z=Y[0]&2?D.return:Y[0]?D.throw||((z=D.return)&&z.call(D),0):D.next)&&!(z=z.call(D,Y[1])).done)return z;if(D=0,z)Y=[Y[0]&2,z.value];switch(Y[0]){case 0:case 1:z=Y;break;case 4:return G.label++,{value:Y[1],done:!1};case 5:G.label++,D=Y[1],Y=[0];continue;case 7:Y=G.ops.pop(),G.trys.pop();continue;default:if((z=G.trys,!(z=z.length>0&&z[z.length-1]))&&(Y[0]===6||Y[0]===2)){G=0;continue}if(Y[0]===3&&(!z||Y[1]>z[0]&&Y[1]<z[3])){G.label=Y[1];break}if(Y[0]===6&&G.label<z[1]){G.label=z[1],z=Y;break}if(z&&G.label<z[2]){G.label=z[2],G.ops.push(Y);break}if(z[2])G.ops.pop();G.trys.pop();continue}Y=B.call($,G)}catch(w){Y=[6,w],D=0}finally{X=z=0}if(Y[0]&5)throw Y[1];return{value:Y[0]?Y[1]:void 0,done:!0}}};Object.defineProperty(l0,"__esModule",{value:!0});l0.deleteOne=void 0;var Nf=m(),Uf=function($,B){var G=function(X){if(!X)throw new Nf.PineconeArgumentError("You must pass a non-empty string for `options` in order to delete a record.")};return function(X){return Cf(void 0,void 0,void 0,function(){var D;return If(this,function(z){switch(z.label){case 0:return G(X),[4,$.provide()];case 1:return D=z.sent(),[4,D.deleteVectors({deleteRequest:{ids:[X],namespace:B}})];case 2:return z.sent(),[2]}})})}};l0.deleteOne=Uf});var iY=K((j1)=>{var H6=j1&&j1.__assign||function(){return H6=Object.assign||function($){for(var B,G=1,X=arguments.length;G<X;G++){B=arguments[G];for(var D in B)if(Object.prototype.hasOwnProperty.call(B,D))$[D]=B[D]}return $},H6.apply(this,arguments)},hf=j1&&j1.__awaiter||function($,B,G,X){function D(z){return z instanceof G?z:new G(function(Z){Z(z)})}return new(G||(G=Promise))(function(z,Z){function W(w){try{Y(X.next(w))}catch(Q){Z(Q)}}function L(w){try{Y(X.throw(w))}catch(Q){Z(Q)}}function Y(w){w.done?z(w.value):D(w.value).then(W,L)}Y((X=X.apply($,B||[])).next())})},Vf=j1&&j1.__generator||function($,B){var G={label:0,sent:function(){if(z[0]&1)throw z[1];return z[1]},trys:[],ops:[]},X,D,z,Z;return Z={next:W(0),throw:W(1),return:W(2)},typeof Symbol==="function"&&(Z[Symbol.iterator]=function(){return this}),Z;function W(Y){return function(w){return L([Y,w])}}function L(Y){if(X)throw new TypeError("Generator is already executing.");while(Z&&(Z=0,Y[0]&&(G=0)),G)try{if(X=1,D&&(z=Y[0]&2?D.return:Y[0]?D.throw||((z=D.return)&&z.call(D),0):D.next)&&!(z=z.call(D,Y[1])).done)return z;if(D=0,z)Y=[Y[0]&2,z.value];switch(Y[0]){case 0:case 1:z=Y;break;case 4:return G.label++,{value:Y[1],done:!1};case 5:G.label++,D=Y[1],Y=[0];continue;case 7:Y=G.ops.pop(),G.trys.pop();continue;default:if((z=G.trys,!(z=z.length>0&&z[z.length-1]))&&(Y[0]===6||Y[0]===2)){G=0;continue}if(Y[0]===3&&(!z||Y[1]>z[0]&&Y[1]<z[3])){G.label=Y[1];break}if(Y[0]===6&&G.label<z[1]){G.label=z[1],z=Y;break}if(z&&G.label<z[2]){G.label=z[2],G.ops.push(Y);break}if(z[2])G.ops.pop();G.trys.pop();continue}Y=B.call($,G)}catch(w){Y=[6,w],D=0}finally{X=z=0}if(Y[0]&5)throw Y[1];return{value:Y[0]?Y[1]:void 0,done:!0}}};Object.defineProperty(j1,"__esModule",{value:!0});j1.deleteMany=void 0;var lY=m(),Jf=function($,B){var G=function(D){for(var z in D)if(!D[z])throw new lY.PineconeArgumentError("`filter` property cannot be empty for key ".concat(z))},X=function(D){if(!Array.isArray(D))return G(D);else if(D.length===0)throw new lY.PineconeArgumentError("Must pass in at least 1 record ID.")};return function(D){return hf(void 0,void 0,void 0,function(){var z,Z;return Vf(this,function(W){switch(W.label){case 0:if(X(D),z={},Array.isArray(D))z.ids=D;else z.filter=D;return[4,$.provide()];case 1:return Z=W.sent(),[4,Z.deleteVectors({deleteRequest:H6(H6({},z),{namespace:B})})];case 2:return W.sent(),[2]}})})}};j1.deleteMany=Jf});var _Y=K((i0)=>{var Af=i0&&i0.__awaiter||function($,B,G,X){function D(z){return z instanceof G?z:new G(function(Z){Z(z)})}return new(G||(G=Promise))(function(z,Z){function W(w){try{Y(X.next(w))}catch(Q){Z(Q)}}function L(w){try{Y(X.throw(w))}catch(Q){Z(Q)}}function Y(w){w.done?z(w.value):D(w.value).then(W,L)}Y((X=X.apply($,B||[])).next())})},Ff=i0&&i0.__generator||function($,B){var G={label:0,sent:function(){if(z[0]&1)throw z[1];return z[1]},trys:[],ops:[]},X,D,z,Z;return Z={next:W(0),throw:W(1),return:W(2)},typeof Symbol==="function"&&(Z[Symbol.iterator]=function(){return this}),Z;function W(Y){return function(w){return L([Y,w])}}function L(Y){if(X)throw new TypeError("Generator is already executing.");while(Z&&(Z=0,Y[0]&&(G=0)),G)try{if(X=1,D&&(z=Y[0]&2?D.return:Y[0]?D.throw||((z=D.return)&&z.call(D),0):D.next)&&!(z=z.call(D,Y[1])).done)return z;if(D=0,z)Y=[Y[0]&2,z.value];switch(Y[0]){case 0:case 1:z=Y;break;case 4:return G.label++,{value:Y[1],done:!1};case 5:G.label++,D=Y[1],Y=[0];continue;case 7:Y=G.ops.pop(),G.trys.pop();continue;default:if((z=G.trys,!(z=z.length>0&&z[z.length-1]))&&(Y[0]===6||Y[0]===2)){G=0;continue}if(Y[0]===3&&(!z||Y[1]>z[0]&&Y[1]<z[3])){G.label=Y[1];break}if(Y[0]===6&&G.label<z[1]){G.label=z[1],z=Y;break}if(z&&G.label<z[2]){G.label=z[2],G.ops.push(Y);break}if(z[2])G.ops.pop();G.trys.pop();continue}Y=B.call($,G)}catch(w){Y=[6,w],D=0}finally{X=z=0}if(Y[0]&5)throw Y[1];return{value:Y[0]?Y[1]:void 0,done:!0}}};Object.defineProperty(i0,"__esModule",{value:!0});i0.deleteAll=void 0;var Mf=function($,B){return function(){return Af(void 0,void 0,void 0,function(){var G;return Ff(this,function(X){switch(X.label){case 0:return[4,$.provide()];case 1:return G=X.sent(),[4,G.deleteVectors({deleteRequest:{deleteAll:!0,namespace:B}})];case 2:return X.sent(),[2]}})})}};i0.deleteAll=Mf});var nY=K((x1)=>{var G4=x1&&x1.__assign||function(){return G4=Object.assign||function($){for(var B,G=1,X=arguments.length;G<X;G++){B=arguments[G];for(var D in B)if(Object.prototype.hasOwnProperty.call(B,D))$[D]=B[D]}return $},G4.apply(this,arguments)},Rf=x1&&x1.__awaiter||function($,B,G,X){function D(z){return z instanceof G?z:new G(function(Z){Z(z)})}return new(G||(G=Promise))(function(z,Z){function W(w){try{Y(X.next(w))}catch(Q){Z(Q)}}function L(w){try{Y(X.throw(w))}catch(Q){Z(Q)}}function Y(w){w.done?z(w.value):D(w.value).then(W,L)}Y((X=X.apply($,B||[])).next())})},Of=x1&&x1.__generator||function($,B){var G={label:0,sent:function(){if(z[0]&1)throw z[1];return z[1]},trys:[],ops:[]},X,D,z,Z;return Z={next:W(0),throw:W(1),return:W(2)},typeof Symbol==="function"&&(Z[Symbol.iterator]=function(){return this}),Z;function W(Y){return function(w){return L([Y,w])}}function L(Y){if(X)throw new TypeError("Generator is already executing.");while(Z&&(Z=0,Y[0]&&(G=0)),G)try{if(X=1,D&&(z=Y[0]&2?D.return:Y[0]?D.throw||((z=D.return)&&z.call(D),0):D.next)&&!(z=z.call(D,Y[1])).done)return z;if(D=0,z)Y=[Y[0]&2,z.value];switch(Y[0]){case 0:case 1:z=Y;break;case 4:return G.label++,{value:Y[1],done:!1};case 5:G.label++,D=Y[1],Y=[0];continue;case 7:Y=G.ops.pop(),G.trys.pop();continue;default:if((z=G.trys,!(z=z.length>0&&z[z.length-1]))&&(Y[0]===6||Y[0]===2)){G=0;continue}if(Y[0]===3&&(!z||Y[1]>z[0]&&Y[1]<z[3])){G.label=Y[1];break}if(Y[0]===6&&G.label<z[1]){G.label=z[1],z=Y;break}if(z&&G.label<z[2]){G.label=z[2],G.ops.push(Y);break}if(z[2])G.ops.pop();G.trys.pop();continue}Y=B.call($,G)}catch(w){Y=[6,w],D=0}finally{X=z=0}if(Y[0]&5)throw Y[1];return{value:Y[0]?Y[1]:void 0,done:!0}}};Object.defineProperty(x1,"__esModule",{value:!0});x1.describeIndexStats=void 0;var Sf=m(),bf=P1(),qf=function($){var B=function(G){if(G)bf.ValidateProperties(G,["filter"]);var X=G.filter;for(var D in X)if(!X[D])throw new Sf.PineconeArgumentError("`filter` property cannot be empty for ".concat(D))};return function(G){return Rf(void 0,void 0,void 0,function(){var X,D,z,Z;return Of(this,function(W){switch(W.label){case 0:if(G)B(G);return[4,$.provide()];case 1:return X=W.sent(),[4,X.describeIndexStats({describeIndexStatsRequest:G4({},G)})];case 2:if(D=W.sent(),z={namespaces:{},dimension:D.dimension,indexFullness:D.indexFullness,totalRecordCount:D.totalVectorCount},D.namespaces)for(Z in D.namespaces)z.namespaces[Z]={recordCount:D.namespaces[Z].vectorCount};return[2,z]}})})}};x1.describeIndexStats=qf});var q=K((V)=>{var z4=V&&V.__extends||function(){var $=function(B,G){return $=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(X,D){X.__proto__=D}||function(X,D){for(var z in D)if(Object.prototype.hasOwnProperty.call(D,z))X[z]=D[z]},$(B,G)};return function(B,G){if(typeof G!=="function"&&G!==null)throw new TypeError("Class extends value "+String(G)+" is not a constructor or null");$(B,G);function X(){this.constructor=B}B.prototype=G===null?Object.create(G):(X.prototype=G.prototype,new X)}}(),Z0=V&&V.__assign||function(){return Z0=Object.assign||function($){for(var B,G=1,X=arguments.length;G<X;G++){B=arguments[G];for(var D in B)if(Object.prototype.hasOwnProperty.call(B,D))$[D]=B[D]}return $},Z0.apply(this,arguments)},W0=V&&V.__awaiter||function($,B,G,X){function D(z){return z instanceof G?z:new G(function(Z){Z(z)})}return new(G||(G=Promise))(function(z,Z){function W(w){try{Y(X.next(w))}catch(Q){Z(Q)}}function L(w){try{Y(X.throw(w))}catch(Q){Z(Q)}}function Y(w){w.done?z(w.value):D(w.value).then(W,L)}Y((X=X.apply($,B||[])).next())})},w0=V&&V.__generator||function($,B){var G={label:0,sent:function(){if(z[0]&1)throw z[1];return z[1]},trys:[],ops:[]},X,D,z,Z;return Z={next:W(0),throw:W(1),return:W(2)},typeof Symbol==="function"&&(Z[Symbol.iterator]=function(){return this}),Z;function W(Y){return function(w){return L([Y,w])}}function L(Y){if(X)throw new TypeError("Generator is already executing.");while(Z&&(Z=0,Y[0]&&(G=0)),G)try{if(X=1,D&&(z=Y[0]&2?D.return:Y[0]?D.throw||((z=D.return)&&z.call(D),0):D.next)&&!(z=z.call(D,Y[1])).done)return z;if(D=0,z)Y=[Y[0]&2,z.value];switch(Y[0]){case 0:case 1:z=Y;break;case 4:return G.label++,{value:Y[1],done:!1};case 5:G.label++,D=Y[1],Y=[0];continue;case 7:Y=G.ops.pop(),G.trys.pop();continue;default:if((z=G.trys,!(z=z.length>0&&z[z.length-1]))&&(Y[0]===6||Y[0]===2)){G=0;continue}if(Y[0]===3&&(!z||Y[1]>z[0]&&Y[1]<z[3])){G.label=Y[1];break}if(Y[0]===6&&G.label<z[1]){G.label=z[1],z=Y;break}if(z&&G.label<z[2]){G.label=z[2],G.ops.push(Y);break}if(z[2])G.ops.pop();G.trys.pop();continue}Y=B.call($,G)}catch(w){Y=[6,w],D=0}finally{X=z=0}if(Y[0]&5)throw Y[1];return{value:Y[0]?Y[1]:void 0,done:!0}}};Object.defineProperty(V,"__esModule",{value:!0});V.TextApiResponse=V.BlobApiResponse=V.VoidApiResponse=V.JSONApiResponse=V.canConsumeForm=V.mapValues=V.querystring=V.exists=V.COLLECTION_FORMATS=V.RequiredError=V.FetchError=V.ResponseError=V.BaseAPI=V.DefaultConfig=V.Configuration=V.BASE_PATH=void 0;V.BASE_PATH="https://unknown".replace(/\/+$/,"");var aY=function(){function $(B){if(B===void 0)B={};this.configuration=B}return Object.defineProperty($.prototype,"config",{set:function(B){this.configuration=B},enumerable:!1,configurable:!0}),Object.defineProperty($.prototype,"basePath",{get:function(){return this.configuration.basePath!=null?this.configuration.basePath:V.BASE_PATH},enumerable:!1,configurable:!0}),Object.defineProperty($.prototype,"fetchApi",{get:function(){return this.configuration.fetchApi},enumerable:!1,configurable:!0}),Object.defineProperty($.prototype,"middleware",{get:function(){return this.configuration.middleware||[]},enumerable:!1,configurable:!0}),Object.defineProperty($.prototype,"queryParamsStringify",{get:function(){return this.configuration.queryParamsStringify||X4},enumerable:!1,configurable:!0}),Object.defineProperty($.prototype,"username",{get:function(){return this.configuration.username},enumerable:!1,configurable:!0}),Object.defineProperty($.prototype,"password",{get:function(){return this.configuration.password},enumerable:!1,configurable:!0}),Object.defineProperty($.prototype,"apiKey",{get:function(){var B=this.configuration.apiKey;if(B)return typeof B==="function"?B:function(){return B};return},enumerable:!1,configurable:!0}),Object.defineProperty($.prototype,"accessToken",{get:function(){var B=this,G=this.configuration.accessToken;if(G)return typeof G==="function"?G:function(){return W0(B,void 0,void 0,function(){return w0(this,function(X){return[2,G]})})};return},enumerable:!1,configurable:!0}),Object.defineProperty($.prototype,"headers",{get:function(){return this.configuration.headers},enumerable:!1,configurable:!0}),Object.defineProperty($.prototype,"credentials",{get:function(){return this.configuration.credentials},enumerable:!1,configurable:!0}),$}();V.Configuration=aY;V.DefaultConfig=new aY;var kf=function(){function $(B){if(B===void 0)B=V.DefaultConfig;var G=this;this.configuration=B,this.fetchApi=function(X,D){return W0(G,void 0,void 0,function(){var z,Z,W,H,L,Y,w,Q,H,E,C,H;return w0(this,function(T){switch(T.label){case 0:z={url:X,init:D},Z=0,W=this.middleware,T.label=1;case 1:if(!(Z<W.length))return[3,4];if(H=W[Z],!H.pre)return[3,3];return[4,H.pre(Z0({fetch:this.fetchApi},z))];case 2:z=T.sent()||z,T.label=3;case 3:return Z++,[3,1];case 4:L=void 0,T.label=5;case 5:return T.trys.push([5,7,,12]),[4,(this.configuration.fetchApi||fetch)(z.url,z.init)];case 6:return L=T.sent(),[3,12];case 7:Y=T.sent(),w=0,Q=this.middleware,T.label=8;case 8:if(!(w<Q.length))return[3,11];if(H=Q[w],!H.onError)return[3,10];return[4,H.onError({fetch:this.fetchApi,url:z.url,init:z.init,error:Y,response:L?L.clone():void 0})];case 9:L=T.sent()||L,T.label=10;case 10:return w++,[3,8];case 11:if(L===void 0)if(Y instanceof Error)throw new pY(Y,"The request failed and the interceptors did not return an alternative response");else throw Y;return[3,12];case 12:E=0,C=this.middleware,T.label=13;case 13:if(!(E<C.length))return[3,16];if(H=C[E],!H.post)return[3,15];return[4,H.post({fetch:this.fetchApi,url:z.url,init:z.init,response:L.clone()})];case 14:L=T.sent()||L,T.label=15;case 15:return E++,[3,13];case 16:return[2,L]}})})},this.middleware=B.middleware}return $.prototype.withMiddleware=function(){var B,G=[];for(var X=0;X<arguments.length;X++)G[X]=arguments[X];var D=this.clone();return D.middleware=(B=D.middleware).concat.apply(B,G),D},$.prototype.withPreMiddleware=function(){var B=[];for(var G=0;G<arguments.length;G++)B[G]=arguments[G];var X=B.map(function(D){return{pre:D}});return this.withMiddleware.apply(this,X)},$.prototype.withPostMiddleware=function(){var B=[];for(var G=0;G<arguments.length;G++)B[G]=arguments[G];var X=B.map(function(D){return{post:D}});return this.withMiddleware.apply(this,X)},$.prototype.isJsonMime=function(B){if(!B)return!1;return $.jsonRegex.test(B)},$.prototype.request=function(B,G){return W0(this,void 0,void 0,function(){var X,D,z,Z;return w0(this,function(W){switch(W.label){case 0:return[4,this.createFetchParams(B,G)];case 1:return X=W.sent(),D=X.url,z=X.init,[4,this.fetchApi(D,z)];case 2:if(Z=W.sent(),Z&&(Z.status>=200&&Z.status<300))return[2,Z];throw new tY(Z,"Response returned an error code")}})})},$.prototype.createFetchParams=function(B,G){return W0(this,void 0,void 0,function(){var X,D,z,Z,W,L,Y,w,Q=this;return w0(this,function(E){switch(E.label){case 0:if(X=this.configuration.basePath+B.path,B.query!==void 0&&Object.keys(B.query).length!==0)X+="?"+this.configuration.queryParamsStringify(B.query);return D=Object.assign({},this.configuration.headers,B.headers),Object.keys(D).forEach(function(C){return D[C]===void 0?delete D[C]:{}}),z=typeof G==="function"?G:function(){return W0(Q,void 0,void 0,function(){return w0(this,function(C){return[2,G]})})},Z={method:B.method,headers:D,body:B.body,credentials:this.configuration.credentials},L=[Z0({},Z)],[4,z({init:Z,context:B})];case 1:if(W=Z0.apply(void 0,L.concat([E.sent()])),Pf(W.body)||W.body instanceof URLSearchParams||yf(W.body))Y=W.body;else if(this.isJsonMime(D["Content-Type"]))Y=JSON.stringify(W.body);else Y=W.body;return w=Z0(Z0({},W),{body:Y}),[2,{url:X,init:w}]}})})},$.prototype.clone=function(){var B=this.constructor,G=new B(this.configuration);return G.middleware=this.middleware.slice(),G},$.jsonRegex=new RegExp("^(:?application/json|[^;/ \t]+/[^;/ \t]+[+]json)[ \t]*(:?;.*)?$","i"),$}();V.BaseAPI=kf;function yf($){return typeof Blob!=="undefined"&&$ instanceof Blob}function Pf($){return typeof FormData!=="undefined"&&$ instanceof FormData}var tY=function($){z4(B,$);function B(G,X){var D=$.call(this,X)||this;return D.response=G,D.name="ResponseError",D}return B}(Error);V.ResponseError=tY;var pY=function($){z4(B,$);function B(G,X){var D=$.call(this,X)||this;return D.cause=G,D.name="FetchError",D}return B}(Error);V.FetchError=pY;var gf=function($){z4(B,$);function B(G,X){var D=$.call(this,X)||this;return D.field=G,D.name="RequiredError",D}return B}(Error);V.RequiredError=gf;V.COLLECTION_FORMATS={csv:",",ssv:" ",tsv:"\t",pipes:"|"};function cf($,B){var G=$[B];return G!==null&&G!==void 0}V.exists=cf;function X4($,B){if(B===void 0)B="";return Object.keys($).map(function(G){return sY(G,$[G],B)}).filter(function(G){return G.length>0}).join("&")}V.querystring=X4;function sY($,B,G){if(G===void 0)G="";var X=G+(G.length?"[".concat($,"]"):$);if(B instanceof Array){var D=B.map(function(Z){return encodeURIComponent(String(Z))}).join("&".concat(encodeURIComponent(X),"="));return"".concat(encodeURIComponent(X),"=").concat(D)}if(B instanceof Set){var z=Array.from(B);return sY($,z,G)}if(B instanceof Date)return"".concat(encodeURIComponent(X),"=").concat(encodeURIComponent(B.toISOString()));if(B instanceof Object)return X4(B,X);return"".concat(encodeURIComponent(X),"=").concat(encodeURIComponent(String(B)))}function mf($,B){return Object.keys($).reduce(function(G,X){var D;return Z0(Z0({},G),(D={},D[X]=B($[X]),D))},{})}V.mapValues=mf;function jf($){for(var B=0,G=$;B<G.length;B++){var X=G[B];if(X.contentType==="multipart/form-data")return!0}return!1}V.canConsumeForm=jf;var xf=function(){function $(B,G){if(G===void 0)G=function(X){return X};this.raw=B,this.transformer=G}return $.prototype.value=function(){return W0(this,void 0,void 0,function(){var B;return w0(this,function(G){switch(G.label){case 0:return B=this.transformer,[4,this.raw.json()];case 1:return[2,B.apply(this,[G.sent()])]}})})},$}();V.JSONApiResponse=xf;var vf=function(){function $(B){this.raw=B}return $.prototype.value=function(){return W0(this,void 0,void 0,function(){return w0(this,function(B){return[2,void 0]})})},$}();V.VoidApiResponse=vf;var df=function(){function $(B){this.raw=B}return $.prototype.value=function(){return W0(this,void 0,void 0,function(){return w0(this,function(B){switch(B.label){case 0:return[4,this.raw.blob()];case 1:return[2,B.sent()]}})})},$}();V.BlobApiResponse=df;var uf=function(){function $(B){this.raw=B}return $.prototype.value=function(){return W0(this,void 0,void 0,function(){return w0(this,function(B){switch(B.label){case 0:return[4,this.raw.text()];case 1:return[2,B.sent()]}})})},$}();V.TextApiResponse=uf});var $5=K((oY)=>{Object.defineProperty(oY,"__esModule",{value:!0});oY.DeleteRequestToJSON=oY.DeleteRequestFromJSONTyped=oY.DeleteRequestFromJSON=oY.instanceOfDeleteRequest=void 0;var T6=q();function lf($){var B=!0;return B}oY.instanceOfDeleteRequest=lf;function _f($){return rY($,!1)}oY.DeleteRequestFromJSON=_f;function rY($,B){if($===void 0||$===null)return $;return{ids:!T6.exists($,"ids")?void 0:$.ids,deleteAll:!T6.exists($,"deleteAll")?void 0:$.deleteAll,namespace:!T6.exists($,"namespace")?void 0:$.namespace,filter:!T6.exists($,"filter")?void 0:$.filter}}oY.DeleteRequestFromJSONTyped=rY;function nf($){if($===void 0)return;if($===null)return null;return{ids:$.ids,deleteAll:$.deleteAll,namespace:$.namespace,filter:$.filter}}oY.DeleteRequestToJSON=nf});var X5=K((G5)=>{Object.defineProperty(G5,"__esModule",{value:!0});G5.DescribeIndexStatsRequestToJSON=G5.DescribeIndexStatsRequestFromJSONTyped=G5.DescribeIndexStatsRequestFromJSON=G5.instanceOfDescribeIndexStatsRequest=void 0;var sf=q();function rf($){var B=!0;return B}G5.instanceOfDescribeIndexStatsRequest=rf;function of($){return B5($,!1)}G5.DescribeIndexStatsRequestFromJSON=of;function B5($,B){if($===void 0||$===null)return $;return{filter:!sf.exists($,"filter")?void 0:$.filter}}G5.DescribeIndexStatsRequestFromJSONTyped=B5;function ef($){if($===void 0)return;if($===null)return null;return{filter:$.filter}}G5.DescribeIndexStatsRequestToJSON=ef});var bB=K((Y5)=>{Object.defineProperty(Y5,"__esModule",{value:!0});Y5.UsageToJSON=Y5.UsageFromJSONTyped=Y5.UsageFromJSON=Y5.instanceOfUsage=void 0;var zC=q();function XC($){var B=!0;return B}Y5.instanceOfUsage=XC;function DC($){return D5($,!1)}Y5.UsageFromJSON=DC;function D5($,B){if($===void 0||$===null)return $;return{readUnits:!zC.exists($,"readUnits")?void 0:$.readUnits}}Y5.UsageFromJSONTyped=D5;function YC($){if($===void 0)return;if($===null)return null;return{readUnits:$.readUnits}}Y5.UsageToJSON=YC});var U$=K((w5)=>{Object.defineProperty(w5,"__esModule",{value:!0});w5.SparseValuesToJSON=w5.SparseValuesFromJSONTyped=w5.SparseValuesFromJSON=w5.instanceOfSparseValues=void 0;function LC($){var B=!0;return B=B&&"indices"in $,B=B&&"values"in $,B}w5.instanceOfSparseValues=LC;function QC($){return W5($,!1)}w5.SparseValuesFromJSON=QC;function W5($,B){if($===void 0||$===null)return $;return{indices:$.indices,values:$.values}}w5.SparseValuesFromJSONTyped=W5;function KC($){if($===void 0)return;if($===null)return null;return{indices:$.indices,values:$.values}}w5.SparseValuesToJSON=KC});var E6=K((T5)=>{Object.defineProperty(T5,"__esModule",{value:!0});T5.VectorToJSON=T5.VectorFromJSONTyped=T5.VectorFromJSON=T5.instanceOfVector=void 0;var Q5=q(),K5=U$();function fC($){var B=!0;return B=B&&"id"in $,B=B&&"values"in $,B}T5.instanceOfVector=fC;function CC($){return H5($,!1)}T5.VectorFromJSON=CC;function H5($,B){if($===void 0||$===null)return $;return{id:$.id,values:$.values,sparseValues:!Q5.exists($,"sparseValues")?void 0:K5.SparseValuesFromJSON($.sparseValues),metadata:!Q5.exists($,"metadata")?void 0:$.metadata}}T5.VectorFromJSONTyped=H5;function IC($){if($===void 0)return;if($===null)return null;return{id:$.id,values:$.values,sparseValues:K5.SparseValuesToJSON($.sparseValues),metadata:$.metadata}}T5.VectorToJSON=IC});var h5=K((N5)=>{Object.defineProperty(N5,"__esModule",{value:!0});N5.FetchResponseToJSON=N5.FetchResponseFromJSONTyped=N5.FetchResponseFromJSON=N5.instanceOfFetchResponse=void 0;var qB=q(),f5=bB(),C5=E6();function VC($){var B=!0;return B}N5.instanceOfFetchResponse=VC;function JC($){return I5($,!1)}N5.FetchResponseFromJSON=JC;function I5($,B){if($===void 0||$===null)return $;return{vectors:!qB.exists($,"vectors")?void 0:qB.mapValues($.vectors,C5.VectorFromJSON),namespace:!qB.exists($,"namespace")?void 0:$.namespace,usage:!qB.exists($,"usage")?void 0:f5.UsageFromJSON($.usage)}}N5.FetchResponseFromJSONTyped=I5;function AC($){if($===void 0)return;if($===null)return null;return{vectors:$.vectors===void 0?void 0:qB.mapValues($.vectors,C5.VectorToJSON),namespace:$.namespace,usage:f5.UsageToJSON($.usage)}}N5.FetchResponseToJSON=AC});var D4=K((J5)=>{Object.defineProperty(J5,"__esModule",{value:!0});J5.ImportErrorModeToJSON=J5.ImportErrorModeFromJSONTyped=J5.ImportErrorModeFromJSON=J5.instanceOfImportErrorMode=J5.ImportErrorModeOnErrorEnum=void 0;var OC=q();J5.ImportErrorModeOnErrorEnum={Abort:"abort",Continue:"continue"};function SC($){var B=!0;return B}J5.instanceOfImportErrorMode=SC;function bC($){return V5($,!1)}J5.ImportErrorModeFromJSON=bC;function V5($,B){if($===void 0||$===null)return $;return{onError:!OC.exists($,"onError")?void 0:$.onError}}J5.ImportErrorModeFromJSONTyped=V5;function qC($){if($===void 0)return;if($===null)return null;return{onError:$.onError}}J5.ImportErrorModeToJSON=qC});var Y4=K((M5)=>{Object.defineProperty(M5,"__esModule",{value:!0});M5.ImportModelToJSON=M5.ImportModelFromJSONTyped=M5.ImportModelFromJSON=M5.instanceOfImportModel=M5.ImportModelStatusEnum=void 0;var _0=q();M5.ImportModelStatusEnum={Pending:"Pending",InProgress:"InProgress",Failed:"Failed",Completed:"Completed",Cancelled:"Cancelled"};function cC($){var B=!0;return B}M5.instanceOfImportModel=cC;function mC($){return F5($,!1)}M5.ImportModelFromJSON=mC;function F5($,B){if($===void 0||$===null)return $;return{id:!_0.exists($,"id")?void 0:$.id,uri:!_0.exists($,"uri")?void 0:$.uri,status:!_0.exists($,"status")?void 0:$.status,createdAt:!_0.exists($,"createdAt")?void 0:new Date($.createdAt),finishedAt:!_0.exists($,"finishedAt")?void 0:new Date($.finishedAt),percentComplete:!_0.exists($,"percentComplete")?void 0:$.percentComplete,recordsImported:!_0.exists($,"recordsImported")?void 0:$.recordsImported,error:!_0.exists($,"error")?void 0:$.error}}M5.ImportModelFromJSONTyped=F5;function jC($){if($===void 0)return;if($===null)return null;return{id:$.id,uri:$.uri,status:$.status,createdAt:$.createdAt===void 0?void 0:$.createdAt.toISOString(),finishedAt:$.finishedAt===void 0?void 0:$.finishedAt.toISOString(),percentComplete:$.percentComplete,recordsImported:$.recordsImported,error:$.error}}M5.ImportModelToJSON=jC});var Z4=K((S5)=>{Object.defineProperty(S5,"__esModule",{value:!0});S5.NamespaceSummaryToJSON=S5.NamespaceSummaryFromJSONTyped=S5.NamespaceSummaryFromJSON=S5.instanceOfNamespaceSummary=void 0;var lC=q();function iC($){var B=!0;return B}S5.instanceOfNamespaceSummary=iC;function _C($){return O5($,!1)}S5.NamespaceSummaryFromJSON=_C;function O5($,B){if($===void 0||$===null)return $;return{vectorCount:!lC.exists($,"vectorCount")?void 0:$.vectorCount}}S5.NamespaceSummaryFromJSONTyped=O5;function nC($){if($===void 0)return;if($===null)return null;return{vectorCount:$.vectorCount}}S5.NamespaceSummaryToJSON=nC});var g5=K((y5)=>{Object.defineProperty(y5,"__esModule",{value:!0});y5.IndexDescriptionToJSON=y5.IndexDescriptionFromJSONTyped=y5.IndexDescriptionFromJSON=y5.instanceOfIndexDescription=void 0;var s$=q(),q5=Z4();function sC($){var B=!0;return B}y5.instanceOfIndexDescription=sC;function rC($){return k5($,!1)}y5.IndexDescriptionFromJSON=rC;function k5($,B){if($===void 0||$===null)return $;return{namespaces:!s$.exists($,"namespaces")?void 0:s$.mapValues($.namespaces,q5.NamespaceSummaryFromJSON),dimension:!s$.exists($,"dimension")?void 0:$.dimension,indexFullness:!s$.exists($,"indexFullness")?void 0:$.indexFullness,totalVectorCount:!s$.exists($,"totalVectorCount")?void 0:$.totalVectorCount}}y5.IndexDescriptionFromJSONTyped=k5;function oC($){if($===void 0)return;if($===null)return null;return{namespaces:$.namespaces===void 0?void 0:s$.mapValues($.namespaces,q5.NamespaceSummaryToJSON),dimension:$.dimension,indexFullness:$.indexFullness,totalVectorCount:$.totalVectorCount}}y5.IndexDescriptionToJSON=oC});var f6=K((m5)=>{Object.defineProperty(m5,"__esModule",{value:!0});m5.PaginationToJSON=m5.PaginationFromJSONTyped=m5.PaginationFromJSON=m5.instanceOfPagination=void 0;var GI=q();function zI($){var B=!0;return B}m5.instanceOfPagination=zI;function XI($){return c5($,!1)}m5.PaginationFromJSON=XI;function c5($,B){if($===void 0||$===null)return $;return{next:!GI.exists($,"next")?void 0:$.next}}m5.PaginationFromJSONTyped=c5;function DI($){if($===void 0)return;if($===null)return null;return{next:$.next}}m5.PaginationToJSON=DI});var _5=K((l5)=>{Object.defineProperty(l5,"__esModule",{value:!0});l5.ListImportsResponseToJSON=l5.ListImportsResponseFromJSONTyped=l5.ListImportsResponseFromJSON=l5.instanceOfListImportsResponse=void 0;var x5=q(),v5=Y4(),d5=f6();function wI($){var B=!0;return B}l5.instanceOfListImportsResponse=wI;function LI($){return u5($,!1)}l5.ListImportsResponseFromJSON=LI;function u5($,B){if($===void 0||$===null)return $;return{data:!x5.exists($,"data")?void 0:$.data.map(v5.ImportModelFromJSON),pagination:!x5.exists($,"pagination")?void 0:d5.PaginationFromJSON($.pagination)}}l5.ListImportsResponseFromJSONTyped=u5;function QI($){if($===void 0)return;if($===null)return null;return{data:$.data===void 0?void 0:$.data.map(v5.ImportModelToJSON),pagination:d5.PaginationToJSON($.pagination)}}l5.ListImportsResponseToJSON=QI});var W4=K((a5)=>{Object.defineProperty(a5,"__esModule",{value:!0});a5.ListItemToJSON=a5.ListItemFromJSONTyped=a5.ListItemFromJSON=a5.instanceOfListItem=void 0;var EI=q();function fI($){var B=!0;return B}a5.instanceOfListItem=fI;function CI($){return n5($,!1)}a5.ListItemFromJSON=CI;function n5($,B){if($===void 0||$===null)return $;return{id:!EI.exists($,"id")?void 0:$.id}}a5.ListItemFromJSONTyped=n5;function II($){if($===void 0)return;if($===null)return null;return{id:$.id}}a5.ListItemToJSON=II});var B7=K((e5)=>{Object.defineProperty(e5,"__esModule",{value:!0});e5.ListResponseToJSON=e5.ListResponseFromJSONTyped=e5.ListResponseFromJSON=e5.instanceOfListResponse=void 0;var C6=q(),p5=W4(),s5=f6(),r5=bB();function VI($){var B=!0;return B}e5.instanceOfListResponse=VI;function JI($){return o5($,!1)}e5.ListResponseFromJSON=JI;function o5($,B){if($===void 0||$===null)return $;return{vectors:!C6.exists($,"vectors")?void 0:$.vectors.map(p5.ListItemFromJSON),pagination:!C6.exists($,"pagination")?void 0:s5.PaginationFromJSON($.pagination),namespace:!C6.exists($,"namespace")?void 0:$.namespace,usage:!C6.exists($,"usage")?void 0:r5.UsageFromJSON($.usage)}}e5.ListResponseFromJSONTyped=o5;function AI($){if($===void 0)return;if($===null)return null;return{vectors:$.vectors===void 0?void 0:$.vectors.map(p5.ListItemToJSON),pagination:s5.PaginationToJSON($.pagination),namespace:$.namespace,usage:r5.UsageToJSON($.usage)}}e5.ListResponseToJSON=AI});var w4=K((X7)=>{Object.defineProperty(X7,"__esModule",{value:!0});X7.ProtobufAnyToJSON=X7.ProtobufAnyFromJSONTyped=X7.ProtobufAnyFromJSON=X7.instanceOfProtobufAny=void 0;var G7=q();function OI($){var B=!0;return B}X7.instanceOfProtobufAny=OI;function SI($){return z7($,!1)}X7.ProtobufAnyFromJSON=SI;function z7($,B){if($===void 0||$===null)return $;return{typeUrl:!G7.exists($,"typeUrl")?void 0:$.typeUrl,value:!G7.exists($,"value")?void 0:$.value}}X7.ProtobufAnyFromJSONTyped=z7;function bI($){if($===void 0)return;if($===null)return null;return{typeUrl:$.typeUrl,value:$.value}}X7.ProtobufAnyToJSON=bI});var w7=K((Z7)=>{Object.defineProperty(Z7,"__esModule",{value:!0});Z7.ProtobufNullValueToJSON=Z7.ProtobufNullValueFromJSONTyped=Z7.ProtobufNullValueFromJSON=Z7.ProtobufNullValue=void 0;Z7.ProtobufNullValue={NullValue:"NULL_VALUE"};function PI($){return Y7($,!1)}Z7.ProtobufNullValueFromJSON=PI;function Y7($,B){return $}Z7.ProtobufNullValueFromJSONTyped=Y7;function gI($){return $}Z7.ProtobufNullValueToJSON=gI});var L4=K((K7)=>{Object.defineProperty(K7,"__esModule",{value:!0});K7.QueryVectorToJSON=K7.QueryVectorFromJSONTyped=K7.QueryVectorFromJSON=K7.instanceOfQueryVector=void 0;var I6=q(),L7=U$();function xI($){var B=!0;return B=B&&"values"in $,B}K7.instanceOfQueryVector=xI;function vI($){return Q7($,!1)}K7.QueryVectorFromJSON=vI;function Q7($,B){if($===void 0||$===null)return $;return{values:$.values,sparseValues:!I6.exists($,"sparseValues")?void 0:L7.SparseValuesFromJSON($.sparseValues),topK:!I6.exists($,"topK")?void 0:$.topK,namespace:!I6.exists($,"namespace")?void 0:$.namespace,filter:!I6.exists($,"filter")?void 0:$.filter}}K7.QueryVectorFromJSONTyped=Q7;function dI($){if($===void 0)return;if($===null)return null;return{values:$.values,sparseValues:L7.SparseValuesToJSON($.sparseValues),topK:$.topK,namespace:$.namespace,filter:$.filter}}K7.QueryVectorToJSON=dI});var N7=K((C7)=>{Object.defineProperty(C7,"__esModule",{value:!0});C7.QueryRequestToJSON=C7.QueryRequestFromJSONTyped=C7.QueryRequestFromJSON=C7.instanceOfQueryRequest=void 0;var n0=q(),T7=L4(),E7=U$();function _I($){var B=!0;return B=B&&"topK"in $,B}C7.instanceOfQueryRequest=_I;function nI($){return f7($,!1)}C7.QueryRequestFromJSON=nI;function f7($,B){if($===void 0||$===null)return $;return{namespace:!n0.exists($,"namespace")?void 0:$.namespace,topK:$.topK,filter:!n0.exists($,"filter")?void 0:$.filter,includeValues:!n0.exists($,"includeValues")?void 0:$.includeValues,includeMetadata:!n0.exists($,"includeMetadata")?void 0:$.includeMetadata,queries:!n0.exists($,"queries")?void 0:$.queries.map(T7.QueryVectorFromJSON),vector:!n0.exists($,"vector")?void 0:$.vector,sparseVector:!n0.exists($,"sparseVector")?void 0:E7.SparseValuesFromJSON($.sparseVector),id:!n0.exists($,"id")?void 0:$.id}}C7.QueryRequestFromJSONTyped=f7;function aI($){if($===void 0)return;if($===null)return null;return{namespace:$.namespace,topK:$.topK,filter:$.filter,includeValues:$.includeValues,includeMetadata:$.includeMetadata,queries:$.queries===void 0?void 0:$.queries.map(T7.QueryVectorToJSON),vector:$.vector,sparseVector:E7.SparseValuesToJSON($.sparseVector),id:$.id}}C7.QueryRequestToJSON=aI});var U6=K((V7)=>{Object.defineProperty(V7,"__esModule",{value:!0});V7.ScoredVectorToJSON=V7.ScoredVectorFromJSONTyped=V7.ScoredVectorFromJSON=V7.instanceOfScoredVector=void 0;var N6=q(),U7=U$();function rI($){var B=!0;return B=B&&"id"in $,B}V7.instanceOfScoredVector=rI;function oI($){return h7($,!1)}V7.ScoredVectorFromJSON=oI;function h7($,B){if($===void 0||$===null)return $;return{id:$.id,score:!N6.exists($,"score")?void 0:$.score,values:!N6.exists($,"values")?void 0:$.values,sparseValues:!N6.exists($,"sparseValues")?void 0:U7.SparseValuesFromJSON($.sparseValues),metadata:!N6.exists($,"metadata")?void 0:$.metadata}}V7.ScoredVectorFromJSONTyped=h7;function eI($){if($===void 0)return;if($===null)return null;return{id:$.id,score:$.score,values:$.values,sparseValues:U7.SparseValuesToJSON($.sparseValues),metadata:$.metadata}}V7.ScoredVectorToJSON=eI});var Q4=K((R7)=>{Object.defineProperty(R7,"__esModule",{value:!0});R7.SingleQueryResultsToJSON=R7.SingleQueryResultsFromJSONTyped=R7.SingleQueryResultsFromJSON=R7.instanceOfSingleQueryResults=void 0;var A7=q(),F7=U6();function zN($){var B=!0;return B}R7.instanceOfSingleQueryResults=zN;function XN($){return M7($,!1)}R7.SingleQueryResultsFromJSON=XN;function M7($,B){if($===void 0||$===null)return $;return{matches:!A7.exists($,"matches")?void 0:$.matches.map(F7.ScoredVectorFromJSON),namespace:!A7.exists($,"namespace")?void 0:$.namespace}}R7.SingleQueryResultsFromJSONTyped=M7;function DN($){if($===void 0)return;if($===null)return null;return{matches:$.matches===void 0?void 0:$.matches.map(F7.ScoredVectorToJSON),namespace:$.namespace}}R7.SingleQueryResultsToJSON=DN});var g7=K((y7)=>{Object.defineProperty(y7,"__esModule",{value:!0});y7.QueryResponseToJSON=y7.QueryResponseFromJSONTyped=y7.QueryResponseFromJSON=y7.instanceOfQueryResponse=void 0;var h6=q(),S7=U6(),b7=Q4(),q7=bB();function wN($){var B=!0;return B}y7.instanceOfQueryResponse=wN;function LN($){return k7($,!1)}y7.QueryResponseFromJSON=LN;function k7($,B){if($===void 0||$===null)return $;return{results:!h6.exists($,"results")?void 0:$.results.map(b7.SingleQueryResultsFromJSON),matches:!h6.exists($,"matches")?void 0:$.matches.map(S7.ScoredVectorFromJSON),namespace:!h6.exists($,"namespace")?void 0:$.namespace,usage:!h6.exists($,"usage")?void 0:q7.UsageFromJSON($.usage)}}y7.QueryResponseFromJSONTyped=k7;function QN($){if($===void 0)return;if($===null)return null;return{results:$.results===void 0?void 0:$.results.map(b7.SingleQueryResultsToJSON),matches:$.matches===void 0?void 0:$.matches.map(S7.ScoredVectorToJSON),namespace:$.namespace,usage:q7.UsageToJSON($.usage)}}y7.QueryResponseToJSON=QN});var v7=K((j7)=>{Object.defineProperty(j7,"__esModule",{value:!0});j7.RpcStatusToJSON=j7.RpcStatusFromJSONTyped=j7.RpcStatusFromJSON=j7.instanceOfRpcStatus=void 0;var K4=q(),c7=w4();function EN($){var B=!0;return B}j7.instanceOfRpcStatus=EN;function fN($){return m7($,!1)}j7.RpcStatusFromJSON=fN;function m7($,B){if($===void 0||$===null)return $;return{code:!K4.exists($,"code")?void 0:$.code,message:!K4.exists($,"message")?void 0:$.message,details:!K4.exists($,"details")?void 0:$.details.map(c7.ProtobufAnyFromJSON)}}j7.RpcStatusFromJSONTyped=m7;function CN($){if($===void 0)return;if($===null)return null;return{code:$.code,message:$.message,details:$.details===void 0?void 0:$.details.map(c7.ProtobufAnyToJSON)}}j7.RpcStatusToJSON=CN});var n7=K((i7)=>{Object.defineProperty(i7,"__esModule",{value:!0});i7.StartImportRequestToJSON=i7.StartImportRequestFromJSONTyped=i7.StartImportRequestFromJSON=i7.instanceOfStartImportRequest=void 0;var d7=q(),u7=D4();function hN($){var B=!0;return B=B&&"uri"in $,B}i7.instanceOfStartImportRequest=hN;function VN($){return l7($,!1)}i7.StartImportRequestFromJSON=VN;function l7($,B){if($===void 0||$===null)return $;return{integrationId:!d7.exists($,"integrationId")?void 0:$.integrationId,uri:$.uri,errorMode:!d7.exists($,"errorMode")?void 0:u7.ImportErrorModeFromJSON($.errorMode)}}i7.StartImportRequestFromJSONTyped=l7;function JN($){if($===void 0)return;if($===null)return null;return{integrationId:$.integrationId,uri:$.uri,errorMode:u7.ImportErrorModeToJSON($.errorMode)}}i7.StartImportRequestToJSON=JN});var s7=K((t7)=>{Object.defineProperty(t7,"__esModule",{value:!0});t7.StartImportResponseToJSON=t7.StartImportResponseFromJSONTyped=t7.StartImportResponseFromJSON=t7.instanceOfStartImportResponse=void 0;var RN=q();function ON($){var B=!0;return B}t7.instanceOfStartImportResponse=ON;function SN($){return a7($,!1)}t7.StartImportResponseFromJSON=SN;function a7($,B){if($===void 0||$===null)return $;return{id:!RN.exists($,"id")?void 0:$.id}}t7.StartImportResponseFromJSONTyped=a7;function bN($){if($===void 0)return;if($===null)return null;return{id:$.id}}t7.StartImportResponseToJSON=bN});var BZ=K((e7)=>{Object.defineProperty(e7,"__esModule",{value:!0});e7.UpdateRequestToJSON=e7.UpdateRequestFromJSONTyped=e7.UpdateRequestFromJSON=e7.instanceOfUpdateRequest=void 0;var V6=q(),r7=U$();function PN($){var B=!0;return B=B&&"id"in $,B}e7.instanceOfUpdateRequest=PN;function gN($){return o7($,!1)}e7.UpdateRequestFromJSON=gN;function o7($,B){if($===void 0||$===null)return $;return{id:$.id,values:!V6.exists($,"values")?void 0:$.values,sparseValues:!V6.exists($,"sparseValues")?void 0:r7.SparseValuesFromJSON($.sparseValues),setMetadata:!V6.exists($,"setMetadata")?void 0:$.setMetadata,namespace:!V6.exists($,"namespace")?void 0:$.namespace}}e7.UpdateRequestFromJSONTyped=o7;function cN($){if($===void 0)return;if($===null)return null;return{id:$.id,values:$.values,sparseValues:r7.SparseValuesToJSON($.sparseValues),setMetadata:$.setMetadata,namespace:$.namespace}}e7.UpdateRequestToJSON=cN});var YZ=K((XZ)=>{Object.defineProperty(XZ,"__esModule",{value:!0});XZ.UpsertRequestToJSON=XZ.UpsertRequestFromJSONTyped=XZ.UpsertRequestFromJSON=XZ.instanceOfUpsertRequest=void 0;var vN=q(),GZ=E6();function dN($){var B=!0;return B=B&&"vectors"in $,B}XZ.instanceOfUpsertRequest=dN;function uN($){return zZ($,!1)}XZ.UpsertRequestFromJSON=uN;function zZ($,B){if($===void 0||$===null)return $;return{vectors:$.vectors.map(GZ.VectorFromJSON),namespace:!vN.exists($,"namespace")?void 0:$.namespace}}XZ.UpsertRequestFromJSONTyped=zZ;function lN($){if($===void 0)return;if($===null)return null;return{vectors:$.vectors.map(GZ.VectorToJSON),namespace:$.namespace}}XZ.UpsertRequestToJSON=lN});var LZ=K((WZ)=>{Object.defineProperty(WZ,"__esModule",{value:!0});WZ.UpsertResponseToJSON=WZ.UpsertResponseFromJSONTyped=WZ.UpsertResponseFromJSON=WZ.instanceOfUpsertResponse=void 0;var aN=q();function tN($){var B=!0;return B}WZ.instanceOfUpsertResponse=tN;function pN($){return ZZ($,!1)}WZ.UpsertResponseFromJSON=pN;function ZZ($,B){if($===void 0||$===null)return $;return{upsertedCount:!aN.exists($,"upsertedCount")?void 0:$.upsertedCount}}WZ.UpsertResponseFromJSONTyped=ZZ;function sN($){if($===void 0)return;if($===null)return null;return{upsertedCount:$.upsertedCount}}WZ.UpsertResponseToJSON=sN});var J6=K((F)=>{var $3=F&&F.__createBinding||(Object.create?function($,B,G,X){if(X===void 0)X=G;var D=Object.getOwnPropertyDescriptor(B,G);if(!D||("get"in D?!B.__esModule:D.writable||D.configurable))D={enumerable:!0,get:function(){return B[G]}};Object.defineProperty($,X,D)}:function($,B,G,X){if(X===void 0)X=G;$[X]=B[G]}),y=F&&F.__exportStar||function($,B){for(var G in $)if(G!=="default"&&!Object.prototype.hasOwnProperty.call(B,G))$3(B,$,G)};Object.defineProperty(F,"__esModule",{value:!0});y($5(),F);y(X5(),F);y(h5(),F);y(D4(),F);y(Y4(),F);y(g5(),F);y(_5(),F);y(W4(),F);y(B7(),F);y(Z4(),F);y(f6(),F);y(w4(),F);y(w7(),F);y(N7(),F);y(g7(),F);y(L4(),F);y(v7(),F);y(U6(),F);y(Q4(),F);y(U$(),F);y(n7(),F);y(s7(),F);y(BZ(),F);y(YZ(),F);y(LZ(),F);y(bB(),F);y(E6(),F)});var QZ=K((B1)=>{var B3=B1&&B1.__extends||function(){var $=function(B,G){return $=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(X,D){X.__proto__=D}||function(X,D){for(var z in D)if(Object.prototype.hasOwnProperty.call(D,z))X[z]=D[z]},$(B,G)};return function(B,G){if(typeof G!=="function"&&G!==null)throw new TypeError("Class extends value "+String(G)+" is not a constructor or null");$(B,G);function X(){this.constructor=B}B.prototype=G===null?Object.create(G):(X.prototype=G.prototype,new X)}}(),G3=B1&&B1.__createBinding||(Object.create?function($,B,G,X){if(X===void 0)X=G;var D=Object.getOwnPropertyDescriptor(B,G);if(!D||("get"in D?!B.__esModule:D.writable||D.configurable))D={enumerable:!0,get:function(){return B[G]}};Object.defineProperty($,X,D)}:function($,B,G,X){if(X===void 0)X=G;$[X]=B[G]}),z3=B1&&B1.__setModuleDefault||(Object.create?function($,B){Object.defineProperty($,"default",{enumerable:!0,value:B})}:function($,B){$.default=B}),X3=B1&&B1.__importStar||function($){if($&&$.__esModule)return $;var B={};if($!=null){for(var G in $)if(G!=="default"&&Object.prototype.hasOwnProperty.call($,G))G3(B,$,G)}return z3(B,$),B},a0=B1&&B1.__awaiter||function($,B,G,X){function D(z){return z instanceof G?z:new G(function(Z){Z(z)})}return new(G||(G=Promise))(function(z,Z){function W(w){try{Y(X.next(w))}catch(Q){Z(Q)}}function L(w){try{Y(X.throw(w))}catch(Q){Z(Q)}}function Y(w){w.done?z(w.value):D(w.value).then(W,L)}Y((X=X.apply($,B||[])).next())})},t0=B1&&B1.__generator||function($,B){var G={label:0,sent:function(){if(z[0]&1)throw z[1];return z[1]},trys:[],ops:[]},X,D,z,Z;return Z={next:W(0),throw:W(1),return:W(2)},typeof Symbol==="function"&&(Z[Symbol.iterator]=function(){return this}),Z;function W(Y){return function(w){return L([Y,w])}}function L(Y){if(X)throw new TypeError("Generator is already executing.");while(Z&&(Z=0,Y[0]&&(G=0)),G)try{if(X=1,D&&(z=Y[0]&2?D.return:Y[0]?D.throw||((z=D.return)&&z.call(D),0):D.next)&&!(z=z.call(D,Y[1])).done)return z;if(D=0,z)Y=[Y[0]&2,z.value];switch(Y[0]){case 0:case 1:z=Y;break;case 4:return G.label++,{value:Y[1],done:!1};case 5:G.label++,D=Y[1],Y=[0];continue;case 7:Y=G.ops.pop(),G.trys.pop();continue;default:if((z=G.trys,!(z=z.length>0&&z[z.length-1]))&&(Y[0]===6||Y[0]===2)){G=0;continue}if(Y[0]===3&&(!z||Y[1]>z[0]&&Y[1]<z[3])){G.label=Y[1];break}if(Y[0]===6&&G.label<z[1]){G.label=z[1],z=Y;break}if(z&&G.label<z[2]){G.label=z[2],G.ops.push(Y);break}if(z[2])G.ops.pop();G.trys.pop();continue}Y=B.call($,G)}catch(w){Y=[6,w],D=0}finally{X=z=0}if(Y[0]&5)throw Y[1];return{value:Y[0]?Y[1]:void 0,done:!0}}};Object.defineProperty(B1,"__esModule",{value:!0});B1.BulkOperationsApi=void 0;var p0=X3(q()),A6=J6(),D3=function($){B3(B,$);function B(){return $!==null&&$.apply(this,arguments)||this}return B.prototype.cancelBulkImportRaw=function(G,X){return a0(this,void 0,void 0,function(){var D,z,Z;return t0(this,function(W){switch(W.label){case 0:if(G.id===null||G.id===void 0)throw new p0.RequiredError("id","Required parameter requestParameters.id was null or undefined when calling cancelBulkImport.");if(D={},z={},this.configuration&&this.configuration.apiKey)z["Api-Key"]=this.configuration.apiKey("Api-Key");return[4,this.request({path:"/bulk/imports/{id}".replace("{".concat("id","}"),encodeURIComponent(String(G.id))),method:"DELETE",headers:z,query:D},X)];case 1:return Z=W.sent(),[2,new p0.JSONApiResponse(Z)]}})})},B.prototype.cancelBulkImport=function(G,X){return a0(this,void 0,void 0,function(){var D;return t0(this,function(z){switch(z.label){case 0:return[4,this.cancelBulkImportRaw(G,X)];case 1:return D=z.sent(),[4,D.value()];case 2:return[2,z.sent()]}})})},B.prototype.describeBulkImportRaw=function(G,X){return a0(this,void 0,void 0,function(){var D,z,Z;return t0(this,function(W){switch(W.label){case 0:if(G.id===null||G.id===void 0)throw new p0.RequiredError("id","Required parameter requestParameters.id was null or undefined when calling describeBulkImport.");if(D={},z={},this.configuration&&this.configuration.apiKey)z["Api-Key"]=this.configuration.apiKey("Api-Key");return[4,this.request({path:"/bulk/imports/{id}".replace("{".concat("id","}"),encodeURIComponent(String(G.id))),method:"GET",headers:z,query:D},X)];case 1:return Z=W.sent(),[2,new p0.JSONApiResponse(Z,function(L){return A6.ImportModelFromJSON(L)})]}})})},B.prototype.describeBulkImport=function(G,X){return a0(this,void 0,void 0,function(){var D;return t0(this,function(z){switch(z.label){case 0:return[4,this.describeBulkImportRaw(G,X)];case 1:return D=z.sent(),[4,D.value()];case 2:return[2,z.sent()]}})})},B.prototype.listBulkImportsRaw=function(G,X){return a0(this,void 0,void 0,function(){var D,z,Z;return t0(this,function(W){switch(W.label){case 0:if(D={},G.limit!==void 0)D.limit=G.limit;if(G.paginationToken!==void 0)D.paginationToken=G.paginationToken;if(z={},this.configuration&&this.configuration.apiKey)z["Api-Key"]=this.configuration.apiKey("Api-Key");return[4,this.request({path:"/bulk/imports",method:"GET",headers:z,query:D},X)];case 1:return Z=W.sent(),[2,new p0.JSONApiResponse(Z,function(L){return A6.ListImportsResponseFromJSON(L)})]}})})},B.prototype.listBulkImports=function(G,X){if(G===void 0)G={};return a0(this,void 0,void 0,function(){var D;return t0(this,function(z){switch(z.label){case 0:return[4,this.listBulkImportsRaw(G,X)];case 1:return D=z.sent(),[4,D.value()];case 2:return[2,z.sent()]}})})},B.prototype.startBulkImportRaw=function(G,X){return a0(this,void 0,void 0,function(){var D,z,Z;return t0(this,function(W){switch(W.label){case 0:if(G.startImportRequest===null||G.startImportRequest===void 0)throw new p0.RequiredError("startImportRequest","Required parameter requestParameters.startImportRequest was null or undefined when calling startBulkImport.");if(D={},z={},z["Content-Type"]="application/json",this.configuration&&this.configuration.apiKey)z["Api-Key"]=this.configuration.apiKey("Api-Key");return[4,this.request({path:"/bulk/imports",method:"POST",headers:z,query:D,body:A6.StartImportRequestToJSON(G.startImportRequest)},X)];case 1:return Z=W.sent(),[2,new p0.JSONApiResponse(Z,function(L){return A6.StartImportResponseFromJSON(L)})]}})})},B.prototype.startBulkImport=function(G,X){return a0(this,void 0,void 0,function(){var D;return t0(this,function(z){switch(z.label){case 0:return[4,this.startBulkImportRaw(G,X)];case 1:return D=z.sent(),[4,D.value()];case 2:return[2,z.sent()]}})})},B}(p0.BaseAPI);B1.BulkOperationsApi=D3});var KZ=K((G1)=>{var Y3=G1&&G1.__extends||function(){var $=function(B,G){return $=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(X,D){X.__proto__=D}||function(X,D){for(var z in D)if(Object.prototype.hasOwnProperty.call(D,z))X[z]=D[z]},$(B,G)};return function(B,G){if(typeof G!=="function"&&G!==null)throw new TypeError("Class extends value "+String(G)+" is not a constructor or null");$(B,G);function X(){this.constructor=B}B.prototype=G===null?Object.create(G):(X.prototype=G.prototype,new X)}}(),Z3=G1&&G1.__createBinding||(Object.create?function($,B,G,X){if(X===void 0)X=G;var D=Object.getOwnPropertyDescriptor(B,G);if(!D||("get"in D?!B.__esModule:D.writable||D.configurable))D={enumerable:!0,get:function(){return B[G]}};Object.defineProperty($,X,D)}:function($,B,G,X){if(X===void 0)X=G;$[X]=B[G]}),W3=G1&&G1.__setModuleDefault||(Object.create?function($,B){Object.defineProperty($,"default",{enumerable:!0,value:B})}:function($,B){$.default=B}),w3=G1&&G1.__importStar||function($){if($&&$.__esModule)return $;var B={};if($!=null){for(var G in $)if(G!=="default"&&Object.prototype.hasOwnProperty.call($,G))Z3(B,$,G)}return W3(B,$),B},W1=G1&&G1.__awaiter||function($,B,G,X){function D(z){return z instanceof G?z:new G(function(Z){Z(z)})}return new(G||(G=Promise))(function(z,Z){function W(w){try{Y(X.next(w))}catch(Q){Z(Q)}}function L(w){try{Y(X.throw(w))}catch(Q){Z(Q)}}function Y(w){w.done?z(w.value):D(w.value).then(W,L)}Y((X=X.apply($,B||[])).next())})},w1=G1&&G1.__generator||function($,B){var G={label:0,sent:function(){if(z[0]&1)throw z[1];return z[1]},trys:[],ops:[]},X,D,z,Z;return Z={next:W(0),throw:W(1),return:W(2)},typeof Symbol==="function"&&(Z[Symbol.iterator]=function(){return this}),Z;function W(Y){return function(w){return L([Y,w])}}function L(Y){if(X)throw new TypeError("Generator is already executing.");while(Z&&(Z=0,Y[0]&&(G=0)),G)try{if(X=1,D&&(z=Y[0]&2?D.return:Y[0]?D.throw||((z=D.return)&&z.call(D),0):D.next)&&!(z=z.call(D,Y[1])).done)return z;if(D=0,z)Y=[Y[0]&2,z.value];switch(Y[0]){case 0:case 1:z=Y;break;case 4:return G.label++,{value:Y[1],done:!1};case 5:G.label++,D=Y[1],Y=[0];continue;case 7:Y=G.ops.pop(),G.trys.pop();continue;default:if((z=G.trys,!(z=z.length>0&&z[z.length-1]))&&(Y[0]===6||Y[0]===2)){G=0;continue}if(Y[0]===3&&(!z||Y[1]>z[0]&&Y[1]<z[3])){G.label=Y[1];break}if(Y[0]===6&&G.label<z[1]){G.label=z[1],z=Y;break}if(z&&G.label<z[2]){G.label=z[2],G.ops.push(Y);break}if(z[2])G.ops.pop();G.trys.pop();continue}Y=B.call($,G)}catch(w){Y=[6,w],D=0}finally{X=z=0}if(Y[0]&5)throw Y[1];return{value:Y[0]?Y[1]:void 0,done:!0}}};Object.defineProperty(G1,"__esModule",{value:!0});G1.VectorOperationsApi=void 0;var L1=w3(q()),v1=J6(),L3=function($){Y3(B,$);function B(){return $!==null&&$.apply(this,arguments)||this}return B.prototype.deleteVectorsRaw=function(G,X){return W1(this,void 0,void 0,function(){var D,z,Z;return w1(this,function(W){switch(W.label){case 0:if(G.deleteRequest===null||G.deleteRequest===void 0)throw new L1.RequiredError("deleteRequest","Required parameter requestParameters.deleteRequest was null or undefined when calling deleteVectors.");if(D={},z={},z["Content-Type"]="application/json",this.configuration&&this.configuration.apiKey)z["Api-Key"]=this.configuration.apiKey("Api-Key");return[4,this.request({path:"/vectors/delete",method:"POST",headers:z,query:D,body:v1.DeleteRequestToJSON(G.deleteRequest)},X)];case 1:return Z=W.sent(),[2,new L1.JSONApiResponse(Z)]}})})},B.prototype.deleteVectors=function(G,X){return W1(this,void 0,void 0,function(){var D;return w1(this,function(z){switch(z.label){case 0:return[4,this.deleteVectorsRaw(G,X)];case 1:return D=z.sent(),[4,D.value()];case 2:return[2,z.sent()]}})})},B.prototype.describeIndexStatsRaw=function(G,X){return W1(this,void 0,void 0,function(){var D,z,Z;return w1(this,function(W){switch(W.label){case 0:if(G.describeIndexStatsRequest===null||G.describeIndexStatsRequest===void 0)throw new L1.RequiredError("describeIndexStatsRequest","Required parameter requestParameters.describeIndexStatsRequest was null or undefined when calling describeIndexStats.");if(D={},z={},z["Content-Type"]="application/json",this.configuration&&this.configuration.apiKey)z["Api-Key"]=this.configuration.apiKey("Api-Key");return[4,this.request({path:"/describe_index_stats",method:"POST",headers:z,query:D,body:v1.DescribeIndexStatsRequestToJSON(G.describeIndexStatsRequest)},X)];case 1:return Z=W.sent(),[2,new L1.JSONApiResponse(Z,function(L){return v1.IndexDescriptionFromJSON(L)})]}})})},B.prototype.describeIndexStats=function(G,X){return W1(this,void 0,void 0,function(){var D;return w1(this,function(z){switch(z.label){case 0:return[4,this.describeIndexStatsRaw(G,X)];case 1:return D=z.sent(),[4,D.value()];case 2:return[2,z.sent()]}})})},B.prototype.fetchVectorsRaw=function(G,X){return W1(this,void 0,void 0,function(){var D,z,Z;return w1(this,function(W){switch(W.label){case 0:if(G.ids===null||G.ids===void 0)throw new L1.RequiredError("ids","Required parameter requestParameters.ids was null or undefined when calling fetchVectors.");if(D={},G.ids)D.ids=G.ids;if(G.namespace!==void 0)D.namespace=G.namespace;if(z={},this.configuration&&this.configuration.apiKey)z["Api-Key"]=this.configuration.apiKey("Api-Key");return[4,this.request({path:"/vectors/fetch",method:"GET",headers:z,query:D},X)];case 1:return Z=W.sent(),[2,new L1.JSONApiResponse(Z,function(L){return v1.FetchResponseFromJSON(L)})]}})})},B.prototype.fetchVectors=function(G,X){return W1(this,void 0,void 0,function(){var D;return w1(this,function(z){switch(z.label){case 0:return[4,this.fetchVectorsRaw(G,X)];case 1:return D=z.sent(),[4,D.value()];case 2:return[2,z.sent()]}})})},B.prototype.listVectorsRaw=function(G,X){return W1(this,void 0,void 0,function(){var D,z,Z;return w1(this,function(W){switch(W.label){case 0:if(D={},G.prefix!==void 0)D.prefix=G.prefix;if(G.limit!==void 0)D.limit=G.limit;if(G.paginationToken!==void 0)D.paginationToken=G.paginationToken;if(G.namespace!==void 0)D.namespace=G.namespace;if(z={},this.configuration&&this.configuration.apiKey)z["Api-Key"]=this.configuration.apiKey("Api-Key");return[4,this.request({path:"/vectors/list",method:"GET",headers:z,query:D},X)];case 1:return Z=W.sent(),[2,new L1.JSONApiResponse(Z,function(L){return v1.ListResponseFromJSON(L)})]}})})},B.prototype.listVectors=function(G,X){if(G===void 0)G={};return W1(this,void 0,void 0,function(){var D;return w1(this,function(z){switch(z.label){case 0:return[4,this.listVectorsRaw(G,X)];case 1:return D=z.sent(),[4,D.value()];case 2:return[2,z.sent()]}})})},B.prototype.queryVectorsRaw=function(G,X){return W1(this,void 0,void 0,function(){var D,z,Z;return w1(this,function(W){switch(W.label){case 0:if(G.queryRequest===null||G.queryRequest===void 0)throw new L1.RequiredError("queryRequest","Required parameter requestParameters.queryRequest was null or undefined when calling queryVectors.");if(D={},z={},z["Content-Type"]="application/json",this.configuration&&this.configuration.apiKey)z["Api-Key"]=this.configuration.apiKey("Api-Key");return[4,this.request({path:"/query",method:"POST",headers:z,query:D,body:v1.QueryRequestToJSON(G.queryRequest)},X)];case 1:return Z=W.sent(),[2,new L1.JSONApiResponse(Z,function(L){return v1.QueryResponseFromJSON(L)})]}})})},B.prototype.queryVectors=function(G,X){return W1(this,void 0,void 0,function(){var D;return w1(this,function(z){switch(z.label){case 0:return[4,this.queryVectorsRaw(G,X)];case 1:return D=z.sent(),[4,D.value()];case 2:return[2,z.sent()]}})})},B.prototype.updateVectorRaw=function(G,X){return W1(this,void 0,void 0,function(){var D,z,Z;return w1(this,function(W){switch(W.label){case 0:if(G.updateRequest===null||G.updateRequest===void 0)throw new L1.RequiredError("updateRequest","Required parameter requestParameters.updateRequest was null or undefined when calling updateVector.");if(D={},z={},z["Content-Type"]="application/json",this.configuration&&this.configuration.apiKey)z["Api-Key"]=this.configuration.apiKey("Api-Key");return[4,this.request({path:"/vectors/update",method:"POST",headers:z,query:D,body:v1.UpdateRequestToJSON(G.updateRequest)},X)];case 1:return Z=W.sent(),[2,new L1.JSONApiResponse(Z)]}})})},B.prototype.updateVector=function(G,X){return W1(this,void 0,void 0,function(){var D;return w1(this,function(z){switch(z.label){case 0:return[4,this.updateVectorRaw(G,X)];case 1:return D=z.sent(),[4,D.value()];case 2:return[2,z.sent()]}})})},B.prototype.upsertVectorsRaw=function(G,X){return W1(this,void 0,void 0,function(){var D,z,Z;return w1(this,function(W){switch(W.label){case 0:if(G.upsertRequest===null||G.upsertRequest===void 0)throw new L1.RequiredError("upsertRequest","Required parameter requestParameters.upsertRequest was null or undefined when calling upsertVectors.");if(D={},z={},z["Content-Type"]="application/json",this.configuration&&this.configuration.apiKey)z["Api-Key"]=this.configuration.apiKey("Api-Key");return[4,this.request({path:"/vectors/upsert",method:"POST",headers:z,query:D,body:v1.UpsertRequestToJSON(G.upsertRequest)},X)];case 1:return Z=W.sent(),[2,new L1.JSONApiResponse(Z,function(L){return v1.UpsertResponseFromJSON(L)})]}})})},B.prototype.upsertVectors=function(G,X){return W1(this,void 0,void 0,function(){var D;return w1(this,function(z){switch(z.label){case 0:return[4,this.upsertVectorsRaw(G,X)];case 1:return D=z.sent(),[4,D.value()];case 2:return[2,z.sent()]}})})},B}(L1.BaseAPI);G1.VectorOperationsApi=L3});var TZ=K((s0)=>{var Q3=s0&&s0.__createBinding||(Object.create?function($,B,G,X){if(X===void 0)X=G;var D=Object.getOwnPropertyDescriptor(B,G);if(!D||("get"in D?!B.__esModule:D.writable||D.configurable))D={enumerable:!0,get:function(){return B[G]}};Object.defineProperty($,X,D)}:function($,B,G,X){if(X===void 0)X=G;$[X]=B[G]}),HZ=s0&&s0.__exportStar||function($,B){for(var G in $)if(G!=="default"&&!Object.prototype.hasOwnProperty.call(B,G))Q3(B,$,G)};Object.defineProperty(s0,"__esModule",{value:!0});HZ(QZ(),s0);HZ(KZ(),s0)});var CZ=K((EZ)=>{Object.defineProperty(EZ,"__esModule",{value:!0});EZ.X_PINECONE_API_VERSION=void 0;EZ.X_PINECONE_API_VERSION="2024-10"});var M6=K((d1)=>{var K3=d1&&d1.__createBinding||(Object.create?function($,B,G,X){if(X===void 0)X=G;var D=Object.getOwnPropertyDescriptor(B,G);if(!D||("get"in D?!B.__esModule:D.writable||D.configurable))D={enumerable:!0,get:function(){return B[G]}};Object.defineProperty($,X,D)}:function($,B,G,X){if(X===void 0)X=G;$[X]=B[G]}),F6=d1&&d1.__exportStar||function($,B){for(var G in $)if(G!=="default"&&!Object.prototype.hasOwnProperty.call(B,G))K3(B,$,G)};Object.defineProperty(d1,"__esModule",{value:!0});F6(q(),d1);F6(TZ(),d1);F6(J6(),d1);F6(CZ(),d1)});var IZ=K((u1)=>{var T4=u1&&u1.__assign||function(){return T4=Object.assign||function($){for(var B,G=1,X=arguments.length;G<X;G++){B=arguments[G];for(var D in B)if(Object.prototype.hasOwnProperty.call(B,D))$[D]=B[D]}return $},T4.apply(this,arguments)},H3=u1&&u1.__awaiter||function($,B,G,X){function D(z){return z instanceof G?z:new G(function(Z){Z(z)})}return new(G||(G=Promise))(function(z,Z){function W(w){try{Y(X.next(w))}catch(Q){Z(Q)}}function L(w){try{Y(X.throw(w))}catch(Q){Z(Q)}}function Y(w){w.done?z(w.value):D(w.value).then(W,L)}Y((X=X.apply($,B||[])).next())})},T3=u1&&u1.__generator||function($,B){var G={label:0,sent:function(){if(z[0]&1)throw z[1];return z[1]},trys:[],ops:[]},X,D,z,Z;return Z={next:W(0),throw:W(1),return:W(2)},typeof Symbol==="function"&&(Z[Symbol.iterator]=function(){return this}),Z;function W(Y){return function(w){return L([Y,w])}}function L(Y){if(X)throw new TypeError("Generator is already executing.");while(Z&&(Z=0,Y[0]&&(G=0)),G)try{if(X=1,D&&(z=Y[0]&2?D.return:Y[0]?D.throw||((z=D.return)&&z.call(D),0):D.next)&&!(z=z.call(D,Y[1])).done)return z;if(D=0,z)Y=[Y[0]&2,z.value];switch(Y[0]){case 0:case 1:z=Y;break;case 4:return G.label++,{value:Y[1],done:!1};case 5:G.label++,D=Y[1],Y=[0];continue;case 7:Y=G.ops.pop(),G.trys.pop();continue;default:if((z=G.trys,!(z=z.length>0&&z[z.length-1]))&&(Y[0]===6||Y[0]===2)){G=0;continue}if(Y[0]===3&&(!z||Y[1]>z[0]&&Y[1]<z[3])){G.label=Y[1];break}if(Y[0]===6&&G.label<z[1]){G.label=z[1],z=Y;break}if(z&&G.label<z[2]){G.label=z[2],G.ops.push(Y);break}if(z[2])G.ops.pop();G.trys.pop();continue}Y=B.call($,G)}catch(w){Y=[6,w],D=0}finally{X=z=0}if(Y[0]&5)throw Y[1];return{value:Y[0]?Y[1]:void 0,done:!0}}};Object.defineProperty(u1,"__esModule",{value:!0});u1.VectorOperationsProvider=void 0;var H4=M6(),R6=k1(),E3=Q6(),f3=OB(),C3=function(){function $(B,G,X,D){this.config=B,this.indexName=G,this.indexHostUrl=R6.normalizeUrl(X),this.additionalHeaders=D}return $.prototype.provide=function(){return H3(this,void 0,void 0,function(){var B;return T3(this,function(G){switch(G.label){case 0:if(this.vectorOperations)return[2,this.vectorOperations];if(!this.indexHostUrl)return[3,1];return this.vectorOperations=this.buildDataOperationsConfig(),[3,3];case 1:return B=this,[4,E3.IndexHostSingleton.getHostUrl(this.config,this.indexName)];case 2:B.indexHostUrl=G.sent(),this.vectorOperations=this.buildDataOperationsConfig(),G.label=3;case 3:return[2,this.vectorOperations]}})})},$.prototype.buildDataOperationsConfig=function(){var B=this.additionalHeaders||null,G={basePath:this.indexHostUrl,apiKey:this.config.apiKey,queryParamsStringify:R6.queryParamsStringify,headers:T4({"User-Agent":R6.buildUserAgent(this.config),"X-Pinecone-Api-Version":H4.X_PINECONE_API_VERSION},B),fetchApi:R6.getFetch(this.config),middleware:f3.middleware},X=new H4.Configuration(G);return new H4.VectorOperationsApi(X)},$}();u1.VectorOperationsProvider=C3});var NZ=K((l1)=>{var O6=l1&&l1.__assign||function(){return O6=Object.assign||function($){for(var B,G=1,X=arguments.length;G<X;G++){B=arguments[G];for(var D in B)if(Object.prototype.hasOwnProperty.call(B,D))$[D]=B[D]}return $},O6.apply(this,arguments)},I3=l1&&l1.__awaiter||function($,B,G,X){function D(z){return z instanceof G?z:new G(function(Z){Z(z)})}return new(G||(G=Promise))(function(z,Z){function W(w){try{Y(X.next(w))}catch(Q){Z(Q)}}function L(w){try{Y(X.throw(w))}catch(Q){Z(Q)}}function Y(w){w.done?z(w.value):D(w.value).then(W,L)}Y((X=X.apply($,B||[])).next())})},N3=l1&&l1.__generator||function($,B){var G={label:0,sent:function(){if(z[0]&1)throw z[1];return z[1]},trys:[],ops:[]},X,D,z,Z;return Z={next:W(0),throw:W(1),return:W(2)},typeof Symbol==="function"&&(Z[Symbol.iterator]=function(){return this}),Z;function W(Y){return function(w){return L([Y,w])}}function L(Y){if(X)throw new TypeError("Generator is already executing.");while(Z&&(Z=0,Y[0]&&(G=0)),G)try{if(X=1,D&&(z=Y[0]&2?D.return:Y[0]?D.throw||((z=D.return)&&z.call(D),0):D.next)&&!(z=z.call(D,Y[1])).done)return z;if(D=0,z)Y=[Y[0]&2,z.value];switch(Y[0]){case 0:case 1:z=Y;break;case 4:return G.label++,{value:Y[1],done:!1};case 5:G.label++,D=Y[1],Y=[0];continue;case 7:Y=G.ops.pop(),G.trys.pop();continue;default:if((z=G.trys,!(z=z.length>0&&z[z.length-1]))&&(Y[0]===6||Y[0]===2)){G=0;continue}if(Y[0]===3&&(!z||Y[1]>z[0]&&Y[1]<z[3])){G.label=Y[1];break}if(Y[0]===6&&G.label<z[1]){G.label=z[1],z=Y;break}if(z&&G.label<z[2]){G.label=z[2],G.ops.push(Y);break}if(z[2])G.ops.pop();G.trys.pop();continue}Y=B.call($,G)}catch(w){Y=[6,w],D=0}finally{X=z=0}if(Y[0]&5)throw Y[1];return{value:Y[0]?Y[1]:void 0,done:!0}}};Object.defineProperty(l1,"__esModule",{value:!0});l1.listPaginated=void 0;var U3=P1(),h3=["prefix","limit","paginationToken"],V3=function($,B){var G=function(X){if(X)U3.ValidateProperties(X,h3);if(X.limit&&X.limit<0)throw new Error("`limit` property must be greater than 0")};return function(X){return I3(void 0,void 0,void 0,function(){var D,z;return N3(this,function(Z){switch(Z.label){case 0:if(X)G(X);return D=O6(O6({},X),{namespace:B}),[4,$.provide()];case 1:return z=Z.sent(),[4,z.listVectors(D)];case 2:return[2,Z.sent()]}})})}};l1.listPaginated=V3});var VZ=K((r0)=>{var J3=r0&&r0.__awaiter||function($,B,G,X){function D(z){return z instanceof G?z:new G(function(Z){Z(z)})}return new(G||(G=Promise))(function(z,Z){function W(w){try{Y(X.next(w))}catch(Q){Z(Q)}}function L(w){try{Y(X.throw(w))}catch(Q){Z(Q)}}function Y(w){w.done?z(w.value):D(w.value).then(W,L)}Y((X=X.apply($,B||[])).next())})},A3=r0&&r0.__generator||function($,B){var G={label:0,sent:function(){if(z[0]&1)throw z[1];return z[1]},trys:[],ops:[]},X,D,z,Z;return Z={next:W(0),throw:W(1),return:W(2)},typeof Symbol==="function"&&(Z[Symbol.iterator]=function(){return this}),Z;function W(Y){return function(w){return L([Y,w])}}function L(Y){if(X)throw new TypeError("Generator is already executing.");while(Z&&(Z=0,Y[0]&&(G=0)),G)try{if(X=1,D&&(z=Y[0]&2?D.return:Y[0]?D.throw||((z=D.return)&&z.call(D),0):D.next)&&!(z=z.call(D,Y[1])).done)return z;if(D=0,z)Y=[Y[0]&2,z.value];switch(Y[0]){case 0:case 1:z=Y;break;case 4:return G.label++,{value:Y[1],done:!1};case 5:G.label++,D=Y[1],Y=[0];continue;case 7:Y=G.ops.pop(),G.trys.pop();continue;default:if((z=G.trys,!(z=z.length>0&&z[z.length-1]))&&(Y[0]===6||Y[0]===2)){G=0;continue}if(Y[0]===3&&(!z||Y[1]>z[0]&&Y[1]<z[3])){G.label=Y[1];break}if(Y[0]===6&&G.label<z[1]){G.label=z[1],z=Y;break}if(z&&G.label<z[2]){G.label=z[2],G.ops.push(Y);break}if(z[2])G.ops.pop();G.trys.pop();continue}Y=B.call($,G)}catch(w){Y=[6,w],D=0}finally{X=z=0}if(Y[0]&5)throw Y[1];return{value:Y[0]?Y[1]:void 0,done:!0}}};Object.defineProperty(r0,"__esModule",{value:!0});r0.StartImportCommand=void 0;var UZ=M6(),hZ=m(),F3=function(){function $(B,G){this.apiProvider=B,this.namespace=G}return $.prototype.run=function(B,G,X){return J3(this,void 0,void 0,function(){var D,z,Z;return A3(this,function(W){switch(W.label){case 0:if(!B)throw new hZ.PineconeArgumentError("`uri` field is required and must start with the scheme of a supported storage provider.");if(D=UZ.ImportErrorModeOnErrorEnum.Continue,G){if(G.toLowerCase()!=="continue"&&G.toLowerCase()!=="abort")throw new hZ.PineconeArgumentError('`errorMode` must be one of "Continue" or "Abort"');if((G===null||G===void 0?void 0:G.toLowerCase())=="abort")D=UZ.ImportErrorModeOnErrorEnum.Abort}return z={startImportRequest:{uri:B,errorMode:{onError:D},integrationId:X}},[4,this.apiProvider.provide()];case 1:return Z=W.sent(),[4,Z.startBulkImport(z)];case 2:return[2,W.sent()]}})})},$}();r0.StartImportCommand=F3});var JZ=K((o0)=>{var M3=o0&&o0.__awaiter||function($,B,G,X){function D(z){return z instanceof G?z:new G(function(Z){Z(z)})}return new(G||(G=Promise))(function(z,Z){function W(w){try{Y(X.next(w))}catch(Q){Z(Q)}}function L(w){try{Y(X.throw(w))}catch(Q){Z(Q)}}function Y(w){w.done?z(w.value):D(w.value).then(W,L)}Y((X=X.apply($,B||[])).next())})},R3=o0&&o0.__generator||function($,B){var G={label:0,sent:function(){if(z[0]&1)throw z[1];return z[1]},trys:[],ops:[]},X,D,z,Z;return Z={next:W(0),throw:W(1),return:W(2)},typeof Symbol==="function"&&(Z[Symbol.iterator]=function(){return this}),Z;function W(Y){return function(w){return L([Y,w])}}function L(Y){if(X)throw new TypeError("Generator is already executing.");while(Z&&(Z=0,Y[0]&&(G=0)),G)try{if(X=1,D&&(z=Y[0]&2?D.return:Y[0]?D.throw||((z=D.return)&&z.call(D),0):D.next)&&!(z=z.call(D,Y[1])).done)return z;if(D=0,z)Y=[Y[0]&2,z.value];switch(Y[0]){case 0:case 1:z=Y;break;case 4:return G.label++,{value:Y[1],done:!1};case 5:G.label++,D=Y[1],Y=[0];continue;case 7:Y=G.ops.pop(),G.trys.pop();continue;default:if((z=G.trys,!(z=z.length>0&&z[z.length-1]))&&(Y[0]===6||Y[0]===2)){G=0;continue}if(Y[0]===3&&(!z||Y[1]>z[0]&&Y[1]<z[3])){G.label=Y[1];break}if(Y[0]===6&&G.label<z[1]){G.label=z[1],z=Y;break}if(z&&G.label<z[2]){G.label=z[2],G.ops.push(Y);break}if(z[2])G.ops.pop();G.trys.pop();continue}Y=B.call($,G)}catch(w){Y=[6,w],D=0}finally{X=z=0}if(Y[0]&5)throw Y[1];return{value:Y[0]?Y[1]:void 0,done:!0}}};Object.defineProperty(o0,"__esModule",{value:!0});o0.ListImportsCommand=void 0;var O3=function(){function $(B,G){this.apiProvider=B,this.namespace=G}return $.prototype.run=function(B,G){return M3(this,void 0,void 0,function(){var X,D;return R3(this,function(z){switch(z.label){case 0:return X={limit:B,paginationToken:G},[4,this.apiProvider.provide()];case 1:return D=z.sent(),[4,D.listBulkImports(X)];case 2:return[2,z.sent()]}})})},$}();o0.ListImportsCommand=O3});var AZ=K((e0)=>{var S3=e0&&e0.__awaiter||function($,B,G,X){function D(z){return z instanceof G?z:new G(function(Z){Z(z)})}return new(G||(G=Promise))(function(z,Z){function W(w){try{Y(X.next(w))}catch(Q){Z(Q)}}function L(w){try{Y(X.throw(w))}catch(Q){Z(Q)}}function Y(w){w.done?z(w.value):D(w.value).then(W,L)}Y((X=X.apply($,B||[])).next())})},b3=e0&&e0.__generator||function($,B){var G={label:0,sent:function(){if(z[0]&1)throw z[1];return z[1]},trys:[],ops:[]},X,D,z,Z;return Z={next:W(0),throw:W(1),return:W(2)},typeof Symbol==="function"&&(Z[Symbol.iterator]=function(){return this}),Z;function W(Y){return function(w){return L([Y,w])}}function L(Y){if(X)throw new TypeError("Generator is already executing.");while(Z&&(Z=0,Y[0]&&(G=0)),G)try{if(X=1,D&&(z=Y[0]&2?D.return:Y[0]?D.throw||((z=D.return)&&z.call(D),0):D.next)&&!(z=z.call(D,Y[1])).done)return z;if(D=0,z)Y=[Y[0]&2,z.value];switch(Y[0]){case 0:case 1:z=Y;break;case 4:return G.label++,{value:Y[1],done:!1};case 5:G.label++,D=Y[1],Y=[0];continue;case 7:Y=G.ops.pop(),G.trys.pop();continue;default:if((z=G.trys,!(z=z.length>0&&z[z.length-1]))&&(Y[0]===6||Y[0]===2)){G=0;continue}if(Y[0]===3&&(!z||Y[1]>z[0]&&Y[1]<z[3])){G.label=Y[1];break}if(Y[0]===6&&G.label<z[1]){G.label=z[1],z=Y;break}if(z&&G.label<z[2]){G.label=z[2],G.ops.push(Y);break}if(z[2])G.ops.pop();G.trys.pop();continue}Y=B.call($,G)}catch(w){Y=[6,w],D=0}finally{X=z=0}if(Y[0]&5)throw Y[1];return{value:Y[0]?Y[1]:void 0,done:!0}}};Object.defineProperty(e0,"__esModule",{value:!0});e0.DescribeImportCommand=void 0;var q3=function(){function $(B,G){this.apiProvider=B,this.namespace=G}return $.prototype.run=function(B){return S3(this,void 0,void 0,function(){var G,X;return b3(this,function(D){switch(D.label){case 0:return G={id:B},[4,this.apiProvider.provide()];case 1:return X=D.sent(),[4,X.describeBulkImport(G)];case 2:return[2,D.sent()]}})})},$}();e0.DescribeImportCommand=q3});var FZ=K(($$)=>{var k3=$$&&$$.__awaiter||function($,B,G,X){function D(z){return z instanceof G?z:new G(function(Z){Z(z)})}return new(G||(G=Promise))(function(z,Z){function W(w){try{Y(X.next(w))}catch(Q){Z(Q)}}function L(w){try{Y(X.throw(w))}catch(Q){Z(Q)}}function Y(w){w.done?z(w.value):D(w.value).then(W,L)}Y((X=X.apply($,B||[])).next())})},y3=$$&&$$.__generator||function($,B){var G={label:0,sent:function(){if(z[0]&1)throw z[1];return z[1]},trys:[],ops:[]},X,D,z,Z;return Z={next:W(0),throw:W(1),return:W(2)},typeof Symbol==="function"&&(Z[Symbol.iterator]=function(){return this}),Z;function W(Y){return function(w){return L([Y,w])}}function L(Y){if(X)throw new TypeError("Generator is already executing.");while(Z&&(Z=0,Y[0]&&(G=0)),G)try{if(X=1,D&&(z=Y[0]&2?D.return:Y[0]?D.throw||((z=D.return)&&z.call(D),0):D.next)&&!(z=z.call(D,Y[1])).done)return z;if(D=0,z)Y=[Y[0]&2,z.value];switch(Y[0]){case 0:case 1:z=Y;break;case 4:return G.label++,{value:Y[1],done:!1};case 5:G.label++,D=Y[1],Y=[0];continue;case 7:Y=G.ops.pop(),G.trys.pop();continue;default:if((z=G.trys,!(z=z.length>0&&z[z.length-1]))&&(Y[0]===6||Y[0]===2)){G=0;continue}if(Y[0]===3&&(!z||Y[1]>z[0]&&Y[1]<z[3])){G.label=Y[1];break}if(Y[0]===6&&G.label<z[1]){G.label=z[1],z=Y;break}if(z&&G.label<z[2]){G.label=z[2],G.ops.push(Y);break}if(z[2])G.ops.pop();G.trys.pop();continue}Y=B.call($,G)}catch(w){Y=[6,w],D=0}finally{X=z=0}if(Y[0]&5)throw Y[1];return{value:Y[0]?Y[1]:void 0,done:!0}}};Object.defineProperty($$,"__esModule",{value:!0});$$.CancelImportCommand=void 0;var P3=function(){function $(B,G){this.apiProvider=B,this.namespace=G}return $.prototype.run=function(B){return k3(this,void 0,void 0,function(){var G,X;return y3(this,function(D){switch(D.label){case 0:return G={id:B},[4,this.apiProvider.provide()];case 1:return X=D.sent(),[4,X.cancelBulkImport(G)];case 2:return[2,D.sent()]}})})},$}();$$.CancelImportCommand=P3});var MZ=K((i1)=>{var f4=i1&&i1.__assign||function(){return f4=Object.assign||function($){for(var B,G=1,X=arguments.length;G<X;G++){B=arguments[G];for(var D in B)if(Object.prototype.hasOwnProperty.call(B,D))$[D]=B[D]}return $},f4.apply(this,arguments)},g3=i1&&i1.__awaiter||function($,B,G,X){function D(z){return z instanceof G?z:new G(function(Z){Z(z)})}return new(G||(G=Promise))(function(z,Z){function W(w){try{Y(X.next(w))}catch(Q){Z(Q)}}function L(w){try{Y(X.throw(w))}catch(Q){Z(Q)}}function Y(w){w.done?z(w.value):D(w.value).then(W,L)}Y((X=X.apply($,B||[])).next())})},c3=i1&&i1.__generator||function($,B){var G={label:0,sent:function(){if(z[0]&1)throw z[1];return z[1]},trys:[],ops:[]},X,D,z,Z;return Z={next:W(0),throw:W(1),return:W(2)},typeof Symbol==="function"&&(Z[Symbol.iterator]=function(){return this}),Z;function W(Y){return function(w){return L([Y,w])}}function L(Y){if(X)throw new TypeError("Generator is already executing.");while(Z&&(Z=0,Y[0]&&(G=0)),G)try{if(X=1,D&&(z=Y[0]&2?D.return:Y[0]?D.throw||((z=D.return)&&z.call(D),0):D.next)&&!(z=z.call(D,Y[1])).done)return z;if(D=0,z)Y=[Y[0]&2,z.value];switch(Y[0]){case 0:case 1:z=Y;break;case 4:return G.label++,{value:Y[1],done:!1};case 5:G.label++,D=Y[1],Y=[0];continue;case 7:Y=G.ops.pop(),G.trys.pop();continue;default:if((z=G.trys,!(z=z.length>0&&z[z.length-1]))&&(Y[0]===6||Y[0]===2)){G=0;continue}if(Y[0]===3&&(!z||Y[1]>z[0]&&Y[1]<z[3])){G.label=Y[1];break}if(Y[0]===6&&G.label<z[1]){G.label=z[1],z=Y;break}if(z&&G.label<z[2]){G.label=z[2],G.ops.push(Y);break}if(z[2])G.ops.pop();G.trys.pop();continue}Y=B.call($,G)}catch(w){Y=[6,w],D=0}finally{X=z=0}if(Y[0]&5)throw Y[1];return{value:Y[0]?Y[1]:void 0,done:!0}}};Object.defineProperty(i1,"__esModule",{value:!0});i1.BulkOperationsProvider=void 0;var E4=M6(),S6=k1(),m3=Q6(),j3=OB(),x3=function(){function $(B,G,X,D){this.config=B,this.indexName=G,this.indexHostUrl=S6.normalizeUrl(X),this.additionalHeaders=D}return $.prototype.provide=function(){return g3(this,void 0,void 0,function(){var B;return c3(this,function(G){switch(G.label){case 0:if(this.bulkOperations)return[2,this.bulkOperations];if(!this.indexHostUrl)return[3,1];return this.bulkOperations=this.buildBulkOperationsConfig(),[3,3];case 1:return B=this,[4,m3.IndexHostSingleton.getHostUrl(this.config,this.indexName)];case 2:B.indexHostUrl=G.sent(),this.bulkOperations=this.buildBulkOperationsConfig(),G.label=3;case 3:return[2,this.bulkOperations]}})})},$.prototype.buildBulkOperationsConfig=function(){var B=this.additionalHeaders||null,G={basePath:this.indexHostUrl,apiKey:this.config.apiKey,queryParamsStringify:S6.queryParamsStringify,headers:f4({"User-Agent":S6.buildUserAgent(this.config),"X-Pinecone-Api-Version":E4.X_PINECONE_API_VERSION},B),fetchApi:S6.getFetch(this.config),middleware:j3.middleware},X=new E4.Configuration(G);return new E4.BulkOperationsApi(X)},$}();i1.BulkOperationsProvider=x3});var C4=K((z$)=>{var B$=z$&&z$.__awaiter||function($,B,G,X){function D(z){return z instanceof G?z:new G(function(Z){Z(z)})}return new(G||(G=Promise))(function(z,Z){function W(w){try{Y(X.next(w))}catch(Q){Z(Q)}}function L(w){try{Y(X.throw(w))}catch(Q){Z(Q)}}function Y(w){w.done?z(w.value):D(w.value).then(W,L)}Y((X=X.apply($,B||[])).next())})},G$=z$&&z$.__generator||function($,B){var G={label:0,sent:function(){if(z[0]&1)throw z[1];return z[1]},trys:[],ops:[]},X,D,z,Z;return Z={next:W(0),throw:W(1),return:W(2)},typeof Symbol==="function"&&(Z[Symbol.iterator]=function(){return this}),Z;function W(Y){return function(w){return L([Y,w])}}function L(Y){if(X)throw new TypeError("Generator is already executing.");while(Z&&(Z=0,Y[0]&&(G=0)),G)try{if(X=1,D&&(z=Y[0]&2?D.return:Y[0]?D.throw||((z=D.return)&&z.call(D),0):D.next)&&!(z=z.call(D,Y[1])).done)return z;if(D=0,z)Y=[Y[0]&2,z.value];switch(Y[0]){case 0:case 1:z=Y;break;case 4:return G.label++,{value:Y[1],done:!1};case 5:G.label++,D=Y[1],Y=[0];continue;case 7:Y=G.ops.pop(),G.trys.pop();continue;default:if((z=G.trys,!(z=z.length>0&&z[z.length-1]))&&(Y[0]===6||Y[0]===2)){G=0;continue}if(Y[0]===3&&(!z||Y[1]>z[0]&&Y[1]<z[3])){G.label=Y[1];break}if(Y[0]===6&&G.label<z[1]){G.label=z[1],z=Y;break}if(z&&G.label<z[2]){G.label=z[2],G.ops.push(Y);break}if(z[2])G.ops.pop();G.trys.pop();continue}Y=B.call($,G)}catch(w){Y=[6,w],D=0}finally{X=z=0}if(Y[0]&5)throw Y[1];return{value:Y[0]?Y[1]:void 0,done:!0}}};Object.defineProperty(z$,"__esModule",{value:!0});z$.Index=void 0;var v3=jY(),d3=xY(),u3=vY(),l3=dY(),i3=uY(),_3=iY(),n3=_Y(),a3=nY(),t3=IZ(),p3=NZ(),s3=VZ(),r3=JZ(),o3=AZ(),e3=FZ(),$U=MZ(),BU=function(){function $(B,G,X,D,z){if(X===void 0)X="";this.config=G,this.target={index:B,namespace:X,indexHostUrl:D};var Z=new t3.VectorOperationsProvider(G,B,D,z);this._deleteAll=n3.deleteAll(Z,X),this._deleteMany=_3.deleteMany(Z,X),this._deleteOne=i3.deleteOne(Z,X),this._describeIndexStats=a3.describeIndexStats(Z),this._listPaginated=p3.listPaginated(Z,X),this._fetchCommand=new d3.FetchCommand(Z,X),this._queryCommand=new l3.QueryCommand(Z,X),this._updateCommand=new u3.UpdateCommand(Z,X),this._upsertCommand=new v3.UpsertCommand(Z,X);var W=new $U.BulkOperationsProvider(G,B,D,z);this._startImportCommand=new s3.StartImportCommand(W,X),this._listImportsCommand=new r3.ListImportsCommand(W,X),this._describeImportCommand=new o3.DescribeImportCommand(W,X),this._cancelImportCommand=new e3.CancelImportCommand(W,X)}return $.prototype.deleteAll=function(){return this._deleteAll()},$.prototype.deleteMany=function(B){return this._deleteMany(B)},$.prototype.deleteOne=function(B){return this._deleteOne(B)},$.prototype.describeIndexStats=function(){return this._describeIndexStats()},$.prototype.listPaginated=function(B){return this._listPaginated(B)},$.prototype.namespace=function(B){return new $(this.target.index,this.config,B,this.target.indexHostUrl)},$.prototype.upsert=function(B){return B$(this,void 0,void 0,function(){return G$(this,function(G){switch(G.label){case 0:return[4,this._upsertCommand.run(B,this.config.maxRetries)];case 1:return[2,G.sent()]}})})},$.prototype.fetch=function(B){return B$(this,void 0,void 0,function(){return G$(this,function(G){switch(G.label){case 0:return[4,this._fetchCommand.run(B)];case 1:return[2,G.sent()]}})})},$.prototype.query=function(B){return B$(this,void 0,void 0,function(){return G$(this,function(G){switch(G.label){case 0:return[4,this._queryCommand.run(B)];case 1:return[2,G.sent()]}})})},$.prototype.update=function(B){return B$(this,void 0,void 0,function(){return G$(this,function(G){switch(G.label){case 0:return[4,this._updateCommand.run(B,this.config.maxRetries)];case 1:return[2,G.sent()]}})})},$.prototype.startImport=function(B,G,X){return B$(this,void 0,void 0,function(){return G$(this,function(D){switch(D.label){case 0:return[4,this._startImportCommand.run(B,G,X)];case 1:return[2,D.sent()]}})})},$.prototype.listImports=function(B,G){return B$(this,void 0,void 0,function(){return G$(this,function(X){switch(X.label){case 0:return[4,this._listImportsCommand.run(B,G)];case 1:return[2,X.sent()]}})})},$.prototype.describeImport=function(B){return B$(this,void 0,void 0,function(){return G$(this,function(G){switch(G.label){case 0:return[4,this._describeImportCommand.run(B)];case 1:return[2,G.sent()]}})})},$.prototype.cancelImport=function(B){return B$(this,void 0,void 0,function(){return G$(this,function(G){switch(G.label){case 0:return[4,this._cancelImportCommand.run(B)];case 1:return[2,G.sent()]}})})},$}();z$.Index=BU});var I4=K((X$)=>{var GU=X$&&X$.__extends||function(){var $=function(B,G){return $=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(X,D){X.__proto__=D}||function(X,D){for(var z in D)if(Object.prototype.hasOwnProperty.call(D,z))X[z]=D[z]},$(B,G)};return function(B,G){if(typeof G!=="function"&&G!==null)throw new TypeError("Class extends value "+String(G)+" is not a constructor or null");$(B,G);function X(){this.constructor=B}B.prototype=G===null?Object.create(G):(X.prototype=G.prototype,new X)}}(),r$=X$&&X$.__spreadArray||function($,B,G){if(G||arguments.length===2){for(var X=0,D=B.length,z;X<D;X++)if(z||!(X in B)){if(!z)z=Array.prototype.slice.call(B,0,X);z[X]=B[X]}}return $.concat(z||Array.prototype.slice.call(B))};Object.defineProperty(X$,"__esModule",{value:!0});X$.EmbeddingsList=void 0;var zU=function($){GU(B,$);function B(G,X,D){if(X===void 0)X=[];var z=$.apply(this,X)||this;return Object.setPrototypeOf(z,B.prototype),z.model=G,z.data=X,z.usage=D,z}return B.prototype.toString=function(){var G=this.truncateDataForDisplay(),X=G.map(function(z){var Z;if(typeof z==="string")return"    ".concat(z);var W=JSON.stringify(z,function(w,Q){return w==="values"&&Array.isArray(Q)?Q:Q});W=W.replace(/:/g,": ");var L=((Z=W.match(/"values": \[(.*?)\]/))===null||Z===void 0?void 0:Z[1])||"",Y=L.split(",").join(", ").replace(/"/g,"");return W=W.replace(/("values": )\[(.*?)\]/,"$1[".concat(Y,"]")),"    ".concat(W)}).join(`,
`),D=JSON.stringify(this.usage).replace(/:/g,": ");return`EmbeddingsList({
`+'  "model": "'.concat(this.model,`",
`)+`  "data": [
`+"".concat(X,`
`)+`   ],
`+'  "usage": '.concat(D,`
`)+"  })"},B.prototype.toJSON=function(){return{model:this.model,data:this.truncateDataForDisplay(),usage:this.usage}},B.prototype.get=function(G){return this[G]},B.prototype.indexOf=function(G){return this.data?this.data.indexOf(G):-1},B.prototype.truncateValuesForDisplay=function(G){if(!G||G.length<=4)return G?G:[];return r$(r$(r$([],G.slice(0,2),!0),["..."],!1),G.slice(-2),!0)},B.prototype.truncateDataForDisplay=function(){var G=this;if(!this.data)return[];if(this.data.length<=5)return this.data.map(function(X){return{values:X.values?G.truncateValuesForDisplay(X.values):[]}});return r$(r$(r$([],this.data.slice(0,2).map(function(X){return{values:X.values?G.truncateValuesForDisplay(X.values):[]}}),!0),["   ... (".concat(this.data.length-4," more embeddings) ...")],!1),this.data.slice(-2).map(function(X){return{values:X.values?G.truncateValuesForDisplay(X.values):[]}}),!0)},B}(Array);X$.EmbeddingsList=zU});var RZ=K((N4)=>{Object.defineProperty(N4,"__esModule",{value:!0});N4.EmbeddingsList=void 0;var XU=I4();Object.defineProperty(N4,"EmbeddingsList",{enumerable:!0,get:function(){return XU.EmbeddingsList}})});var bZ=K((D$)=>{var OZ=D$&&D$.__awaiter||function($,B,G,X){function D(z){return z instanceof G?z:new G(function(Z){Z(z)})}return new(G||(G=Promise))(function(z,Z){function W(w){try{Y(X.next(w))}catch(Q){Z(Q)}}function L(w){try{Y(X.throw(w))}catch(Q){Z(Q)}}function Y(w){w.done?z(w.value):D(w.value).then(W,L)}Y((X=X.apply($,B||[])).next())})},SZ=D$&&D$.__generator||function($,B){var G={label:0,sent:function(){if(z[0]&1)throw z[1];return z[1]},trys:[],ops:[]},X,D,z,Z;return Z={next:W(0),throw:W(1),return:W(2)},typeof Symbol==="function"&&(Z[Symbol.iterator]=function(){return this}),Z;function W(Y){return function(w){return L([Y,w])}}function L(Y){if(X)throw new TypeError("Generator is already executing.");while(Z&&(Z=0,Y[0]&&(G=0)),G)try{if(X=1,D&&(z=Y[0]&2?D.return:Y[0]?D.throw||((z=D.return)&&z.call(D),0):D.next)&&!(z=z.call(D,Y[1])).done)return z;if(D=0,z)Y=[Y[0]&2,z.value];switch(Y[0]){case 0:case 1:z=Y;break;case 4:return G.label++,{value:Y[1],done:!1};case 5:G.label++,D=Y[1],Y=[0];continue;case 7:Y=G.ops.pop(),G.trys.pop();continue;default:if((z=G.trys,!(z=z.length>0&&z[z.length-1]))&&(Y[0]===6||Y[0]===2)){G=0;continue}if(Y[0]===3&&(!z||Y[1]>z[0]&&Y[1]<z[3])){G.label=Y[1];break}if(Y[0]===6&&G.label<z[1]){G.label=z[1],z=Y;break}if(z&&G.label<z[2]){G.label=z[2],G.ops.push(Y);break}if(z[2])G.ops.pop();G.trys.pop();continue}Y=B.call($,G)}catch(w){Y=[6,w],D=0}finally{X=z=0}if(Y[0]&5)throw Y[1];return{value:Y[0]?Y[1]:void 0,done:!0}}};Object.defineProperty(D$,"__esModule",{value:!0});D$.Inference=void 0;var YU=RZ(),b6=m(),ZU=function(){function $(B){this._inferenceApi=B}return $.prototype._formatInputs=function(B){return B.map(function(G){return{text:G}})},$.prototype.embed=function(B,G,X){return OZ(this,void 0,void 0,function(){var D,z,Z;return SZ(this,function(W){switch(W.label){case 0:return D=this._formatInputs(G),z={embedRequest:{model:B,inputs:D,parameters:X}},[4,this._inferenceApi.embed(z)];case 1:return Z=W.sent(),[2,new YU.EmbeddingsList(Z.model,Z.data,Z.usage)]}})})},$.prototype.rerank=function(B,G,X,D){if(D===void 0)D={};return OZ(this,void 0,void 0,function(){var z,Z,W,L,Y,w,Q,E,C,H;return SZ(this,function(T){switch(T.label){case 0:if(X.length==0)throw new b6.PineconeArgumentError("You must pass at least one document to rerank");if(G.length==0)throw new b6.PineconeArgumentError("You must pass a query to rerank");if(B.length==0)throw new b6.PineconeArgumentError("You must pass the name of a supported reranking model in order to rerank documents. See https://docs.pinecone.io/models for supported models.");if(z=D.topN,Z=z===void 0?X.length:z,W=D.returnDocuments,L=W===void 0?!0:W,Y=D.parameters,w=Y===void 0?{}:Y,Q=D.rankFields,E=Q===void 0?["text"]:Q,C=X.map(function(P){return typeof P==="string"?{text:P}:P}),!D.rankFields){if(!C.every(function(P){return typeof P==="object"&&P.text}))throw new b6.PineconeArgumentError('Documents must be a list of strings or objects containing the "text" field')}if(D.rankFields)E=D.rankFields;return H={rerankRequest:{model:B,query:G,documents:C,topN:Z,returnDocuments:L,rankFields:E,parameters:w}},[4,this._inferenceApi.rerank(H)];case 1:return[2,T.sent()]}})})},$}();D$.Inference=ZU});var qZ=K((h$)=>{var WU=h$&&h$.__createBinding||(Object.create?function($,B,G,X){if(X===void 0)X=G;var D=Object.getOwnPropertyDescriptor(B,G);if(!D||("get"in D?!B.__esModule:D.writable||D.configurable))D={enumerable:!0,get:function(){return B[G]}};Object.defineProperty($,X,D)}:function($,B,G,X){if(X===void 0)X=G;$[X]=B[G]}),wU=h$&&h$.__exportStar||function($,B){for(var G in $)if(G!=="default"&&!Object.prototype.hasOwnProperty.call(B,G))WU(B,$,G)};Object.defineProperty(h$,"__esModule",{value:!0});wU(bZ(),h$)});var I1=K((J)=>{var U4=J&&J.__extends||function(){var $=function(B,G){return $=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(X,D){X.__proto__=D}||function(X,D){for(var z in D)if(Object.prototype.hasOwnProperty.call(D,z))X[z]=D[z]},$(B,G)};return function(B,G){if(typeof G!=="function"&&G!==null)throw new TypeError("Class extends value "+String(G)+" is not a constructor or null");$(B,G);function X(){this.constructor=B}B.prototype=G===null?Object.create(G):(X.prototype=G.prototype,new X)}}(),L0=J&&J.__assign||function(){return L0=Object.assign||function($){for(var B,G=1,X=arguments.length;G<X;G++){B=arguments[G];for(var D in B)if(Object.prototype.hasOwnProperty.call(B,D))$[D]=B[D]}return $},L0.apply(this,arguments)},Q0=J&&J.__awaiter||function($,B,G,X){function D(z){return z instanceof G?z:new G(function(Z){Z(z)})}return new(G||(G=Promise))(function(z,Z){function W(w){try{Y(X.next(w))}catch(Q){Z(Q)}}function L(w){try{Y(X.throw(w))}catch(Q){Z(Q)}}function Y(w){w.done?z(w.value):D(w.value).then(W,L)}Y((X=X.apply($,B||[])).next())})},K0=J&&J.__generator||function($,B){var G={label:0,sent:function(){if(z[0]&1)throw z[1];return z[1]},trys:[],ops:[]},X,D,z,Z;return Z={next:W(0),throw:W(1),return:W(2)},typeof Symbol==="function"&&(Z[Symbol.iterator]=function(){return this}),Z;function W(Y){return function(w){return L([Y,w])}}function L(Y){if(X)throw new TypeError("Generator is already executing.");while(Z&&(Z=0,Y[0]&&(G=0)),G)try{if(X=1,D&&(z=Y[0]&2?D.return:Y[0]?D.throw||((z=D.return)&&z.call(D),0):D.next)&&!(z=z.call(D,Y[1])).done)return z;if(D=0,z)Y=[Y[0]&2,z.value];switch(Y[0]){case 0:case 1:z=Y;break;case 4:return G.label++,{value:Y[1],done:!1};case 5:G.label++,D=Y[1],Y=[0];continue;case 7:Y=G.ops.pop(),G.trys.pop();continue;default:if((z=G.trys,!(z=z.length>0&&z[z.length-1]))&&(Y[0]===6||Y[0]===2)){G=0;continue}if(Y[0]===3&&(!z||Y[1]>z[0]&&Y[1]<z[3])){G.label=Y[1];break}if(Y[0]===6&&G.label<z[1]){G.label=z[1],z=Y;break}if(z&&G.label<z[2]){G.label=z[2],G.ops.push(Y);break}if(z[2])G.ops.pop();G.trys.pop();continue}Y=B.call($,G)}catch(w){Y=[6,w],D=0}finally{X=z=0}if(Y[0]&5)throw Y[1];return{value:Y[0]?Y[1]:void 0,done:!0}}};Object.defineProperty(J,"__esModule",{value:!0});J.TextApiResponse=J.BlobApiResponse=J.VoidApiResponse=J.JSONApiResponse=J.canConsumeForm=J.mapValues=J.querystring=J.exists=J.COLLECTION_FORMATS=J.RequiredError=J.FetchError=J.ResponseError=J.BaseAPI=J.DefaultConfig=J.Configuration=J.BASE_PATH=void 0;J.BASE_PATH="https://api.pinecone.io".replace(/\/+$/,"");var kZ=function(){function $(B){if(B===void 0)B={};this.configuration=B}return Object.defineProperty($.prototype,"config",{set:function(B){this.configuration=B},enumerable:!1,configurable:!0}),Object.defineProperty($.prototype,"basePath",{get:function(){return this.configuration.basePath!=null?this.configuration.basePath:J.BASE_PATH},enumerable:!1,configurable:!0}),Object.defineProperty($.prototype,"fetchApi",{get:function(){return this.configuration.fetchApi},enumerable:!1,configurable:!0}),Object.defineProperty($.prototype,"middleware",{get:function(){return this.configuration.middleware||[]},enumerable:!1,configurable:!0}),Object.defineProperty($.prototype,"queryParamsStringify",{get:function(){return this.configuration.queryParamsStringify||h4},enumerable:!1,configurable:!0}),Object.defineProperty($.prototype,"username",{get:function(){return this.configuration.username},enumerable:!1,configurable:!0}),Object.defineProperty($.prototype,"password",{get:function(){return this.configuration.password},enumerable:!1,configurable:!0}),Object.defineProperty($.prototype,"apiKey",{get:function(){var B=this.configuration.apiKey;if(B)return typeof B==="function"?B:function(){return B};return},enumerable:!1,configurable:!0}),Object.defineProperty($.prototype,"accessToken",{get:function(){var B=this,G=this.configuration.accessToken;if(G)return typeof G==="function"?G:function(){return Q0(B,void 0,void 0,function(){return K0(this,function(X){return[2,G]})})};return},enumerable:!1,configurable:!0}),Object.defineProperty($.prototype,"headers",{get:function(){return this.configuration.headers},enumerable:!1,configurable:!0}),Object.defineProperty($.prototype,"credentials",{get:function(){return this.configuration.credentials},enumerable:!1,configurable:!0}),$}();J.Configuration=kZ;J.DefaultConfig=new kZ;var LU=function(){function $(B){if(B===void 0)B=J.DefaultConfig;var G=this;this.configuration=B,this.fetchApi=function(X,D){return Q0(G,void 0,void 0,function(){var z,Z,W,H,L,Y,w,Q,H,E,C,H;return K0(this,function(T){switch(T.label){case 0:z={url:X,init:D},Z=0,W=this.middleware,T.label=1;case 1:if(!(Z<W.length))return[3,4];if(H=W[Z],!H.pre)return[3,3];return[4,H.pre(L0({fetch:this.fetchApi},z))];case 2:z=T.sent()||z,T.label=3;case 3:return Z++,[3,1];case 4:L=void 0,T.label=5;case 5:return T.trys.push([5,7,,12]),[4,(this.configuration.fetchApi||fetch)(z.url,z.init)];case 6:return L=T.sent(),[3,12];case 7:Y=T.sent(),w=0,Q=this.middleware,T.label=8;case 8:if(!(w<Q.length))return[3,11];if(H=Q[w],!H.onError)return[3,10];return[4,H.onError({fetch:this.fetchApi,url:z.url,init:z.init,error:Y,response:L?L.clone():void 0})];case 9:L=T.sent()||L,T.label=10;case 10:return w++,[3,8];case 11:if(L===void 0)if(Y instanceof Error)throw new PZ(Y,"The request failed and the interceptors did not return an alternative response");else throw Y;return[3,12];case 12:E=0,C=this.middleware,T.label=13;case 13:if(!(E<C.length))return[3,16];if(H=C[E],!H.post)return[3,15];return[4,H.post({fetch:this.fetchApi,url:z.url,init:z.init,response:L.clone()})];case 14:L=T.sent()||L,T.label=15;case 15:return E++,[3,13];case 16:return[2,L]}})})},this.middleware=B.middleware}return $.prototype.withMiddleware=function(){var B,G=[];for(var X=0;X<arguments.length;X++)G[X]=arguments[X];var D=this.clone();return D.middleware=(B=D.middleware).concat.apply(B,G),D},$.prototype.withPreMiddleware=function(){var B=[];for(var G=0;G<arguments.length;G++)B[G]=arguments[G];var X=B.map(function(D){return{pre:D}});return this.withMiddleware.apply(this,X)},$.prototype.withPostMiddleware=function(){var B=[];for(var G=0;G<arguments.length;G++)B[G]=arguments[G];var X=B.map(function(D){return{post:D}});return this.withMiddleware.apply(this,X)},$.prototype.isJsonMime=function(B){if(!B)return!1;return $.jsonRegex.test(B)},$.prototype.request=function(B,G){return Q0(this,void 0,void 0,function(){var X,D,z,Z;return K0(this,function(W){switch(W.label){case 0:return[4,this.createFetchParams(B,G)];case 1:return X=W.sent(),D=X.url,z=X.init,[4,this.fetchApi(D,z)];case 2:if(Z=W.sent(),Z&&(Z.status>=200&&Z.status<300))return[2,Z];throw new yZ(Z,"Response returned an error code")}})})},$.prototype.createFetchParams=function(B,G){return Q0(this,void 0,void 0,function(){var X,D,z,Z,W,L,Y,w,Q=this;return K0(this,function(E){switch(E.label){case 0:if(X=this.configuration.basePath+B.path,B.query!==void 0&&Object.keys(B.query).length!==0)X+="?"+this.configuration.queryParamsStringify(B.query);return D=Object.assign({},this.configuration.headers,B.headers),Object.keys(D).forEach(function(C){return D[C]===void 0?delete D[C]:{}}),z=typeof G==="function"?G:function(){return Q0(Q,void 0,void 0,function(){return K0(this,function(C){return[2,G]})})},Z={method:B.method,headers:D,body:B.body,credentials:this.configuration.credentials},L=[L0({},Z)],[4,z({init:Z,context:B})];case 1:if(W=L0.apply(void 0,L.concat([E.sent()])),KU(W.body)||W.body instanceof URLSearchParams||QU(W.body))Y=W.body;else if(this.isJsonMime(D["Content-Type"]))Y=JSON.stringify(W.body);else Y=W.body;return w=L0(L0({},W),{body:Y}),[2,{url:X,init:w}]}})})},$.prototype.clone=function(){var B=this.constructor,G=new B(this.configuration);return G.middleware=this.middleware.slice(),G},$.jsonRegex=new RegExp("^(:?application/json|[^;/ \t]+/[^;/ \t]+[+]json)[ \t]*(:?;.*)?$","i"),$}();J.BaseAPI=LU;function QU($){return typeof Blob!=="undefined"&&$ instanceof Blob}function KU($){return typeof FormData!=="undefined"&&$ instanceof FormData}var yZ=function($){U4(B,$);function B(G,X){var D=$.call(this,X)||this;return D.response=G,D.name="ResponseError",D}return B}(Error);J.ResponseError=yZ;var PZ=function($){U4(B,$);function B(G,X){var D=$.call(this,X)||this;return D.cause=G,D.name="FetchError",D}return B}(Error);J.FetchError=PZ;var HU=function($){U4(B,$);function B(G,X){var D=$.call(this,X)||this;return D.field=G,D.name="RequiredError",D}return B}(Error);J.RequiredError=HU;J.COLLECTION_FORMATS={csv:",",ssv:" ",tsv:"\t",pipes:"|"};function TU($,B){var G=$[B];return G!==null&&G!==void 0}J.exists=TU;function h4($,B){if(B===void 0)B="";return Object.keys($).map(function(G){return gZ(G,$[G],B)}).filter(function(G){return G.length>0}).join("&")}J.querystring=h4;function gZ($,B,G){if(G===void 0)G="";var X=G+(G.length?"[".concat($,"]"):$);if(B instanceof Array){var D=B.map(function(Z){return encodeURIComponent(String(Z))}).join("&".concat(encodeURIComponent(X),"="));return"".concat(encodeURIComponent(X),"=").concat(D)}if(B instanceof Set){var z=Array.from(B);return gZ($,z,G)}if(B instanceof Date)return"".concat(encodeURIComponent(X),"=").concat(encodeURIComponent(B.toISOString()));if(B instanceof Object)return h4(B,X);return"".concat(encodeURIComponent(X),"=").concat(encodeURIComponent(String(B)))}function EU($,B){return Object.keys($).reduce(function(G,X){var D;return L0(L0({},G),(D={},D[X]=B($[X]),D))},{})}J.mapValues=EU;function fU($){for(var B=0,G=$;B<G.length;B++){var X=G[B];if(X.contentType==="multipart/form-data")return!0}return!1}J.canConsumeForm=fU;var CU=function(){function $(B,G){if(G===void 0)G=function(X){return X};this.raw=B,this.transformer=G}return $.prototype.value=function(){return Q0(this,void 0,void 0,function(){var B;return K0(this,function(G){switch(G.label){case 0:return B=this.transformer,[4,this.raw.json()];case 1:return[2,B.apply(this,[G.sent()])]}})})},$}();J.JSONApiResponse=CU;var IU=function(){function $(B){this.raw=B}return $.prototype.value=function(){return Q0(this,void 0,void 0,function(){return K0(this,function(B){return[2,void 0]})})},$}();J.VoidApiResponse=IU;var NU=function(){function $(B){this.raw=B}return $.prototype.value=function(){return Q0(this,void 0,void 0,function(){return K0(this,function(B){switch(B.label){case 0:return[4,this.raw.blob()];case 1:return[2,B.sent()]}})})},$}();J.BlobApiResponse=NU;var UU=function(){function $(B){this.raw=B}return $.prototype.value=function(){return Q0(this,void 0,void 0,function(){return K0(this,function(B){switch(B.label){case 0:return[4,this.raw.text()];case 1:return[2,B.sent()]}})})},$}();J.TextApiResponse=UU});var V4=K((mZ)=>{Object.defineProperty(mZ,"__esModule",{value:!0});mZ.EmbedRequestInputsInnerToJSON=mZ.EmbedRequestInputsInnerFromJSONTyped=mZ.EmbedRequestInputsInnerFromJSON=mZ.instanceOfEmbedRequestInputsInner=void 0;var hU=I1();function VU($){var B=!0;return B}mZ.instanceOfEmbedRequestInputsInner=VU;function JU($){return cZ($,!1)}mZ.EmbedRequestInputsInnerFromJSON=JU;function cZ($,B){if($===void 0||$===null)return $;return{text:!hU.exists($,"text")?void 0:$.text}}mZ.EmbedRequestInputsInnerFromJSONTyped=cZ;function AU($){if($===void 0)return;if($===null)return null;return{text:$.text}}mZ.EmbedRequestInputsInnerToJSON=AU});var J4=K((dZ)=>{Object.defineProperty(dZ,"__esModule",{value:!0});dZ.EmbedRequestParametersToJSON=dZ.EmbedRequestParametersFromJSONTyped=dZ.EmbedRequestParametersFromJSON=dZ.instanceOfEmbedRequestParameters=void 0;var xZ=I1();function OU($){var B=!0;return B}dZ.instanceOfEmbedRequestParameters=OU;function SU($){return vZ($,!1)}dZ.EmbedRequestParametersFromJSON=SU;function vZ($,B){if($===void 0||$===null)return $;return{inputType:!xZ.exists($,"input_type")?void 0:$.input_type,truncate:!xZ.exists($,"truncate")?void 0:$.truncate}}dZ.EmbedRequestParametersFromJSONTyped=vZ;function bU($){if($===void 0)return;if($===null)return null;return{input_type:$.inputType,truncate:$.truncate}}dZ.EmbedRequestParametersToJSON=bU});var tZ=K((nZ)=>{Object.defineProperty(nZ,"__esModule",{value:!0});nZ.EmbedRequestToJSON=nZ.EmbedRequestFromJSONTyped=nZ.EmbedRequestFromJSON=nZ.instanceOfEmbedRequest=void 0;var PU=I1(),lZ=V4(),iZ=J4();function gU($){var B=!0;return B=B&&"model"in $,B=B&&"inputs"in $,B}nZ.instanceOfEmbedRequest=gU;function cU($){return _Z($,!1)}nZ.EmbedRequestFromJSON=cU;function _Z($,B){if($===void 0||$===null)return $;return{model:$.model,parameters:!PU.exists($,"parameters")?void 0:iZ.EmbedRequestParametersFromJSON($.parameters),inputs:$.inputs.map(lZ.EmbedRequestInputsInnerFromJSON)}}nZ.EmbedRequestFromJSONTyped=_Z;function mU($){if($===void 0)return;if($===null)return null;return{model:$.model,parameters:iZ.EmbedRequestParametersToJSON($.parameters),inputs:$.inputs.map(lZ.EmbedRequestInputsInnerToJSON)}}nZ.EmbedRequestToJSON=mU});var A4=K((sZ)=>{Object.defineProperty(sZ,"__esModule",{value:!0});sZ.EmbeddingToJSON=sZ.EmbeddingFromJSONTyped=sZ.EmbeddingFromJSON=sZ.instanceOfEmbedding=void 0;var dU=I1();function uU($){var B=!0;return B}sZ.instanceOfEmbedding=uU;function lU($){return pZ($,!1)}sZ.EmbeddingFromJSON=lU;function pZ($,B){if($===void 0||$===null)return $;return{values:!dU.exists($,"values")?void 0:$.values}}sZ.EmbeddingFromJSONTyped=pZ;function iU($){if($===void 0)return;if($===null)return null;return{values:$.values}}sZ.EmbeddingToJSON=iU});var F4=K((eZ)=>{Object.defineProperty(eZ,"__esModule",{value:!0});eZ.EmbeddingsListUsageToJSON=eZ.EmbeddingsListUsageFromJSONTyped=eZ.EmbeddingsListUsageFromJSON=eZ.instanceOfEmbeddingsListUsage=void 0;var tU=I1();function pU($){var B=!0;return B}eZ.instanceOfEmbeddingsListUsage=pU;function sU($){return oZ($,!1)}eZ.EmbeddingsListUsageFromJSON=sU;function oZ($,B){if($===void 0||$===null)return $;return{totalTokens:!tU.exists($,"total_tokens")?void 0:$.total_tokens}}eZ.EmbeddingsListUsageFromJSONTyped=oZ;function rU($){if($===void 0)return;if($===null)return null;return{total_tokens:$.totalTokens}}eZ.EmbeddingsListUsageToJSON=rU});var YW=K((XW)=>{Object.defineProperty(XW,"__esModule",{value:!0});XW.EmbeddingsListToJSON=XW.EmbeddingsListFromJSONTyped=XW.EmbeddingsListFromJSON=XW.instanceOfEmbeddingsList=void 0;var BW=A4(),GW=F4();function Bh($){var B=!0;return B=B&&"model"in $,B=B&&"data"in $,B=B&&"usage"in $,B}XW.instanceOfEmbeddingsList=Bh;function Gh($){return zW($,!1)}XW.EmbeddingsListFromJSON=Gh;function zW($,B){if($===void 0||$===null)return $;return{model:$.model,data:$.data.map(BW.EmbeddingFromJSON),usage:GW.EmbeddingsListUsageFromJSON($.usage)}}XW.EmbeddingsListFromJSONTyped=zW;function zh($){if($===void 0)return;if($===null)return null;return{model:$.model,data:$.data.map(BW.EmbeddingToJSON),usage:GW.EmbeddingsListUsageToJSON($.usage)}}XW.EmbeddingsListToJSON=zh});var M4=K((WW)=>{Object.defineProperty(WW,"__esModule",{value:!0});WW.ErrorResponseErrorToJSON=WW.ErrorResponseErrorFromJSONTyped=WW.ErrorResponseErrorFromJSON=WW.instanceOfErrorResponseError=WW.ErrorResponseErrorCodeEnum=void 0;var Zh=I1();WW.ErrorResponseErrorCodeEnum={Ok:"OK",Unknown:"UNKNOWN",InvalidArgument:"INVALID_ARGUMENT",DeadlineExceeded:"DEADLINE_EXCEEDED",QuotaExceeded:"QUOTA_EXCEEDED",NotFound:"NOT_FOUND",AlreadyExists:"ALREADY_EXISTS",PermissionDenied:"PERMISSION_DENIED",Unauthenticated:"UNAUTHENTICATED",ResourceExhausted:"RESOURCE_EXHAUSTED",FailedPrecondition:"FAILED_PRECONDITION",Aborted:"ABORTED",OutOfRange:"OUT_OF_RANGE",Unimplemented:"UNIMPLEMENTED",Internal:"INTERNAL",Unavailable:"UNAVAILABLE",DataLoss:"DATA_LOSS",Forbidden:"FORBIDDEN"};function Wh($){var B=!0;return B=B&&"code"in $,B=B&&"message"in $,B}WW.instanceOfErrorResponseError=Wh;function wh($){return ZW($,!1)}WW.ErrorResponseErrorFromJSON=wh;function ZW($,B){if($===void 0||$===null)return $;return{code:$.code,message:$.message,details:!Zh.exists($,"details")?void 0:$.details}}WW.ErrorResponseErrorFromJSONTyped=ZW;function Lh($){if($===void 0)return;if($===null)return null;return{code:$.code,message:$.message,details:$.details}}WW.ErrorResponseErrorToJSON=Lh});var TW=K((KW)=>{Object.defineProperty(KW,"__esModule",{value:!0});KW.ErrorResponseToJSON=KW.ErrorResponseFromJSONTyped=KW.ErrorResponseFromJSON=KW.instanceOfErrorResponse=void 0;var LW=M4();function Eh($){var B=!0;return B=B&&"status"in $,B=B&&"error"in $,B}KW.instanceOfErrorResponse=Eh;function fh($){return QW($,!1)}KW.ErrorResponseFromJSON=fh;function QW($,B){if($===void 0||$===null)return $;return{status:$.status,error:LW.ErrorResponseErrorFromJSON($.error)}}KW.ErrorResponseFromJSONTyped=QW;function Ch($){if($===void 0)return;if($===null)return null;return{status:$.status,error:LW.ErrorResponseErrorToJSON($.error)}}KW.ErrorResponseToJSON=Ch});var R4=K((fW)=>{Object.defineProperty(fW,"__esModule",{value:!0});fW.RankedDocumentToJSON=fW.RankedDocumentFromJSONTyped=fW.RankedDocumentFromJSON=fW.instanceOfRankedDocument=void 0;var hh=I1();function Vh($){var B=!0;return B=B&&"index"in $,B=B&&"score"in $,B}fW.instanceOfRankedDocument=Vh;function Jh($){return EW($,!1)}fW.RankedDocumentFromJSON=Jh;function EW($,B){if($===void 0||$===null)return $;return{index:$.index,score:$.score,document:!hh.exists($,"document")?void 0:$.document}}fW.RankedDocumentFromJSONTyped=EW;function Ah($){if($===void 0)return;if($===null)return null;return{index:$.index,score:$.score,document:$.document}}fW.RankedDocumentToJSON=Ah});var hW=K((NW)=>{Object.defineProperty(NW,"__esModule",{value:!0});NW.RerankRequestToJSON=NW.RerankRequestFromJSONTyped=NW.RerankRequestFromJSON=NW.instanceOfRerankRequest=void 0;var q6=I1();function Oh($){var B=!0;return B=B&&"model"in $,B=B&&"query"in $,B=B&&"documents"in $,B}NW.instanceOfRerankRequest=Oh;function Sh($){return IW($,!1)}NW.RerankRequestFromJSON=Sh;function IW($,B){if($===void 0||$===null)return $;return{model:$.model,query:$.query,topN:!q6.exists($,"top_n")?void 0:$.top_n,returnDocuments:!q6.exists($,"return_documents")?void 0:$.return_documents,rankFields:!q6.exists($,"rank_fields")?void 0:$.rank_fields,documents:$.documents,parameters:!q6.exists($,"parameters")?void 0:$.parameters}}NW.RerankRequestFromJSONTyped=IW;function bh($){if($===void 0)return;if($===null)return null;return{model:$.model,query:$.query,top_n:$.topN,return_documents:$.returnDocuments,rank_fields:$.rankFields,documents:$.documents,parameters:$.parameters}}NW.RerankRequestToJSON=bh});var O4=K((JW)=>{Object.defineProperty(JW,"__esModule",{value:!0});JW.RerankResultUsageToJSON=JW.RerankResultUsageFromJSONTyped=JW.RerankResultUsageFromJSON=JW.instanceOfRerankResultUsage=void 0;var Ph=I1();function gh($){var B=!0;return B}JW.instanceOfRerankResultUsage=gh;function ch($){return VW($,!1)}JW.RerankResultUsageFromJSON=ch;function VW($,B){if($===void 0||$===null)return $;return{rerankUnits:!Ph.exists($,"rerank_units")?void 0:$.rerank_units}}JW.RerankResultUsageFromJSONTyped=VW;function mh($){if($===void 0)return;if($===null)return null;return{rerank_units:$.rerankUnits}}JW.RerankResultUsageToJSON=mh});var bW=K((OW)=>{Object.defineProperty(OW,"__esModule",{value:!0});OW.RerankResultToJSON=OW.RerankResultFromJSONTyped=OW.RerankResultFromJSON=OW.instanceOfRerankResult=void 0;var FW=R4(),MW=O4();function dh($){var B=!0;return B=B&&"model"in $,B=B&&"data"in $,B=B&&"usage"in $,B}OW.instanceOfRerankResult=dh;function uh($){return RW($,!1)}OW.RerankResultFromJSON=uh;function RW($,B){if($===void 0||$===null)return $;return{model:$.model,data:$.data.map(FW.RankedDocumentFromJSON),usage:MW.RerankResultUsageFromJSON($.usage)}}OW.RerankResultFromJSONTyped=RW;function lh($){if($===void 0)return;if($===null)return null;return{model:$.model,data:$.data.map(FW.RankedDocumentToJSON),usage:MW.RerankResultUsageToJSON($.usage)}}OW.RerankResultToJSON=lh});var S4=K((p)=>{var ah=p&&p.__createBinding||(Object.create?function($,B,G,X){if(X===void 0)X=G;var D=Object.getOwnPropertyDescriptor(B,G);if(!D||("get"in D?!B.__esModule:D.writable||D.configurable))D={enumerable:!0,get:function(){return B[G]}};Object.defineProperty($,X,D)}:function($,B,G,X){if(X===void 0)X=G;$[X]=B[G]}),N1=p&&p.__exportStar||function($,B){for(var G in $)if(G!=="default"&&!Object.prototype.hasOwnProperty.call(B,G))ah(B,$,G)};Object.defineProperty(p,"__esModule",{value:!0});N1(tZ(),p);N1(V4(),p);N1(J4(),p);N1(A4(),p);N1(YW(),p);N1(F4(),p);N1(TW(),p);N1(M4(),p);N1(R4(),p);N1(hW(),p);N1(bW(),p);N1(O4(),p)});var qW=K((z1)=>{var th=z1&&z1.__extends||function(){var $=function(B,G){return $=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(X,D){X.__proto__=D}||function(X,D){for(var z in D)if(Object.prototype.hasOwnProperty.call(D,z))X[z]=D[z]},$(B,G)};return function(B,G){if(typeof G!=="function"&&G!==null)throw new TypeError("Class extends value "+String(G)+" is not a constructor or null");$(B,G);function X(){this.constructor=B}B.prototype=G===null?Object.create(G):(X.prototype=G.prototype,new X)}}(),ph=z1&&z1.__createBinding||(Object.create?function($,B,G,X){if(X===void 0)X=G;var D=Object.getOwnPropertyDescriptor(B,G);if(!D||("get"in D?!B.__esModule:D.writable||D.configurable))D={enumerable:!0,get:function(){return B[G]}};Object.defineProperty($,X,D)}:function($,B,G,X){if(X===void 0)X=G;$[X]=B[G]}),sh=z1&&z1.__setModuleDefault||(Object.create?function($,B){Object.defineProperty($,"default",{enumerable:!0,value:B})}:function($,B){$.default=B}),rh=z1&&z1.__importStar||function($){if($&&$.__esModule)return $;var B={};if($!=null){for(var G in $)if(G!=="default"&&Object.prototype.hasOwnProperty.call($,G))ph(B,$,G)}return sh(B,$),B},k6=z1&&z1.__awaiter||function($,B,G,X){function D(z){return z instanceof G?z:new G(function(Z){Z(z)})}return new(G||(G=Promise))(function(z,Z){function W(w){try{Y(X.next(w))}catch(Q){Z(Q)}}function L(w){try{Y(X.throw(w))}catch(Q){Z(Q)}}function Y(w){w.done?z(w.value):D(w.value).then(W,L)}Y((X=X.apply($,B||[])).next())})},y6=z1&&z1.__generator||function($,B){var G={label:0,sent:function(){if(z[0]&1)throw z[1];return z[1]},trys:[],ops:[]},X,D,z,Z;return Z={next:W(0),throw:W(1),return:W(2)},typeof Symbol==="function"&&(Z[Symbol.iterator]=function(){return this}),Z;function W(Y){return function(w){return L([Y,w])}}function L(Y){if(X)throw new TypeError("Generator is already executing.");while(Z&&(Z=0,Y[0]&&(G=0)),G)try{if(X=1,D&&(z=Y[0]&2?D.return:Y[0]?D.throw||((z=D.return)&&z.call(D),0):D.next)&&!(z=z.call(D,Y[1])).done)return z;if(D=0,z)Y=[Y[0]&2,z.value];switch(Y[0]){case 0:case 1:z=Y;break;case 4:return G.label++,{value:Y[1],done:!1};case 5:G.label++,D=Y[1],Y=[0];continue;case 7:Y=G.ops.pop(),G.trys.pop();continue;default:if((z=G.trys,!(z=z.length>0&&z[z.length-1]))&&(Y[0]===6||Y[0]===2)){G=0;continue}if(Y[0]===3&&(!z||Y[1]>z[0]&&Y[1]<z[3])){G.label=Y[1];break}if(Y[0]===6&&G.label<z[1]){G.label=z[1],z=Y;break}if(z&&G.label<z[2]){G.label=z[2],G.ops.push(Y);break}if(z[2])G.ops.pop();G.trys.pop();continue}Y=B.call($,G)}catch(w){Y=[6,w],D=0}finally{X=z=0}if(Y[0]&5)throw Y[1];return{value:Y[0]?Y[1]:void 0,done:!0}}};Object.defineProperty(z1,"__esModule",{value:!0});z1.InferenceApi=void 0;var b4=rh(I1()),P6=S4(),oh=function($){th(B,$);function B(){return $!==null&&$.apply(this,arguments)||this}return B.prototype.embedRaw=function(G,X){return k6(this,void 0,void 0,function(){var D,z,Z;return y6(this,function(W){switch(W.label){case 0:if(D={},z={},z["Content-Type"]="application/json",this.configuration&&this.configuration.apiKey)z["Api-Key"]=this.configuration.apiKey("Api-Key");return[4,this.request({path:"/embed",method:"POST",headers:z,query:D,body:P6.EmbedRequestToJSON(G.embedRequest)},X)];case 1:return Z=W.sent(),[2,new b4.JSONApiResponse(Z,function(L){return P6.EmbeddingsListFromJSON(L)})]}})})},B.prototype.embed=function(G,X){if(G===void 0)G={};return k6(this,void 0,void 0,function(){var D;return y6(this,function(z){switch(z.label){case 0:return[4,this.embedRaw(G,X)];case 1:return D=z.sent(),[4,D.value()];case 2:return[2,z.sent()]}})})},B.prototype.rerankRaw=function(G,X){return k6(this,void 0,void 0,function(){var D,z,Z;return y6(this,function(W){switch(W.label){case 0:if(D={},z={},z["Content-Type"]="application/json",this.configuration&&this.configuration.apiKey)z["Api-Key"]=this.configuration.apiKey("Api-Key");return[4,this.request({path:"/rerank",method:"POST",headers:z,query:D,body:P6.RerankRequestToJSON(G.rerankRequest)},X)];case 1:return Z=W.sent(),[2,new b4.JSONApiResponse(Z,function(L){return P6.RerankResultFromJSON(L)})]}})})},B.prototype.rerank=function(G,X){if(G===void 0)G={};return k6(this,void 0,void 0,function(){var D;return y6(this,function(z){switch(z.label){case 0:return[4,this.rerankRaw(G,X)];case 1:return D=z.sent(),[4,D.value()];case 2:return[2,z.sent()]}})})},B}(b4.BaseAPI);z1.InferenceApi=oh});var kW=K((V$)=>{var eh=V$&&V$.__createBinding||(Object.create?function($,B,G,X){if(X===void 0)X=G;var D=Object.getOwnPropertyDescriptor(B,G);if(!D||("get"in D?!B.__esModule:D.writable||D.configurable))D={enumerable:!0,get:function(){return B[G]}};Object.defineProperty($,X,D)}:function($,B,G,X){if(X===void 0)X=G;$[X]=B[G]}),$V=V$&&V$.__exportStar||function($,B){for(var G in $)if(G!=="default"&&!Object.prototype.hasOwnProperty.call(B,G))eh(B,$,G)};Object.defineProperty(V$,"__esModule",{value:!0});$V(qW(),V$)});var gW=K((yW)=>{Object.defineProperty(yW,"__esModule",{value:!0});yW.X_PINECONE_API_VERSION=void 0;yW.X_PINECONE_API_VERSION="2024-10"});var cW=K((_1)=>{var BV=_1&&_1.__createBinding||(Object.create?function($,B,G,X){if(X===void 0)X=G;var D=Object.getOwnPropertyDescriptor(B,G);if(!D||("get"in D?!B.__esModule:D.writable||D.configurable))D={enumerable:!0,get:function(){return B[G]}};Object.defineProperty($,X,D)}:function($,B,G,X){if(X===void 0)X=G;$[X]=B[G]}),g6=_1&&_1.__exportStar||function($,B){for(var G in $)if(G!=="default"&&!Object.prototype.hasOwnProperty.call(B,G))BV(B,$,G)};Object.defineProperty(_1,"__esModule",{value:!0});g6(I1(),_1);g6(kW(),_1);g6(S4(),_1);g6(gW(),_1)});var mW=K((o$)=>{var k4=o$&&o$.__assign||function(){return k4=Object.assign||function($){for(var B,G=1,X=arguments.length;G<X;G++){B=arguments[G];for(var D in B)if(Object.prototype.hasOwnProperty.call(B,D))$[D]=B[D]}return $},k4.apply(this,arguments)};Object.defineProperty(o$,"__esModule",{value:!0});o$.inferenceOperationsBuilder=void 0;var q4=cW(),c6=k1(),GV=OB(),zV=function($){var B=$.apiKey,G=c6.normalizeUrl($.controllerHostUrl)||"https://api.pinecone.io",X=$.additionalHeaders||null,D={basePath:G,apiKey:B,queryParamsStringify:c6.queryParamsStringify,headers:k4({"User-Agent":c6.buildUserAgent($),"X-Pinecone-Api-Version":q4.X_PINECONE_API_VERSION},X),fetchApi:c6.getFetch($),middleware:GV.middleware};return new q4.InferenceApi(new q4.Configuration(D))};o$.inferenceOperationsBuilder=zV});var jW=K((Y$)=>{var y4=Y$&&Y$.__awaiter||function($,B,G,X){function D(z){return z instanceof G?z:new G(function(Z){Z(z)})}return new(G||(G=Promise))(function(z,Z){function W(w){try{Y(X.next(w))}catch(Q){Z(Q)}}function L(w){try{Y(X.throw(w))}catch(Q){Z(Q)}}function Y(w){w.done?z(w.value):D(w.value).then(W,L)}Y((X=X.apply($,B||[])).next())})},P4=Y$&&Y$.__generator||function($,B){var G={label:0,sent:function(){if(z[0]&1)throw z[1];return z[1]},trys:[],ops:[]},X,D,z,Z;return Z={next:W(0),throw:W(1),return:W(2)},typeof Symbol==="function"&&(Z[Symbol.iterator]=function(){return this}),Z;function W(Y){return function(w){return L([Y,w])}}function L(Y){if(X)throw new TypeError("Generator is already executing.");while(Z&&(Z=0,Y[0]&&(G=0)),G)try{if(X=1,D&&(z=Y[0]&2?D.return:Y[0]?D.throw||((z=D.return)&&z.call(D),0):D.next)&&!(z=z.call(D,Y[1])).done)return z;if(D=0,z)Y=[Y[0]&2,z.value];switch(Y[0]){case 0:case 1:z=Y;break;case 4:return G.label++,{value:Y[1],done:!1};case 5:G.label++,D=Y[1],Y=[0];continue;case 7:Y=G.ops.pop(),G.trys.pop();continue;default:if((z=G.trys,!(z=z.length>0&&z[z.length-1]))&&(Y[0]===6||Y[0]===2)){G=0;continue}if(Y[0]===3&&(!z||Y[1]>z[0]&&Y[1]<z[3])){G.label=Y[1];break}if(Y[0]===6&&G.label<z[1]){G.label=z[1],z=Y;break}if(z&&G.label<z[2]){G.label=z[2],G.ops.push(Y);break}if(z[2])G.ops.pop();G.trys.pop();continue}Y=B.call($,G)}catch(w){Y=[6,w],D=0}finally{X=z=0}if(Y[0]&5)throw Y[1];return{value:Y[0]?Y[1]:void 0,done:!0}}};Object.defineProperty(Y$,"__esModule",{value:!0});Y$.Pinecone=void 0;var n1=o8(),g4=Q6(),c4=m(),XV=C4(),DV=qZ(),YV=mW(),ZV=v8(),WV=P1(),wV=e8(),LV=function(){function $(B){if(B===void 0)B=this._readEnvironmentConfig();if(!B.apiKey)throw new c4.PineconeConfigurationError("The client configuration must have required property: apiKey.");WV.ValidateProperties(B,wV.PineconeConfigurationProperties),this.config=B,this._checkForBrowser();var G=n1.indexOperationsBuilder(this.config),X=YV.inferenceOperationsBuilder(this.config);this._configureIndex=n1.configureIndex(G),this._createCollection=n1.createCollection(G),this._createIndex=n1.createIndex(G),this._describeCollection=n1.describeCollection(G),this._deleteCollection=n1.deleteCollection(G),this._describeIndex=n1.describeIndex(G),this._deleteIndex=n1.deleteIndex(G),this._listCollections=n1.listCollections(G),this._listIndexes=n1.listIndexes(G),this.inference=new DV.Inference(X)}return $.prototype._readEnvironmentConfig=function(){if(typeof process==="undefined"||!process||!process.env)throw new c4.PineconeEnvironmentVarsNotSupportedError("Your execution environment does not support reading environment variables from process.env, so a configuration object is required when calling new Pinecone().");var B={},G={apiKey:"PINECONE_API_KEY"},X=[];for(var D=0,z=Object.entries(G);D<z.length;D++){var Z=z[D],W=Z[0],L=Z[1],Y=process.env[L]||"";if(!Y)X.push(L);B[W]=Y}if(X.length>0)throw new c4.PineconeConfigurationError("Since you called 'new Pinecone()' with no configuration object, we attempted to find client configuration in environment variables but the required environment variables were not set. Missing variables: ".concat(X.join(", "),"."));var w={controllerHostUrl:"PINECONE_CONTROLLER_HOST"};for(var Q=0,E=Object.entries(w);Q<E.length;Q++){var C=E[Q],W=C[0],L=C[1],Y=process.env[L];if(Y!==void 0)B[W]=Y}return B},$.prototype.describeIndex=function(B){return y4(this,void 0,void 0,function(){var G;return P4(this,function(X){switch(X.label){case 0:return[4,this._describeIndex(B)];case 1:if(G=X.sent(),G.host)g4.IndexHostSingleton._set(this.config,B,G.host);return[2,Promise.resolve(G)]}})})},$.prototype.listIndexes=function(){return y4(this,void 0,void 0,function(){var B,G,X;return P4(this,function(D){switch(D.label){case 0:return[4,this._listIndexes()];case 1:if(B=D.sent(),B.indexes&&B.indexes.length>0)for(G=0;G<B.indexes.length;G++)X=B.indexes[G],g4.IndexHostSingleton._set(this.config,X.name,X.host);return[2,Promise.resolve(B)]}})})},$.prototype.createIndex=function(B){return this._createIndex(B)},$.prototype.deleteIndex=function(B){return y4(this,void 0,void 0,function(){return P4(this,function(G){switch(G.label){case 0:return[4,this._deleteIndex(B)];case 1:return G.sent(),g4.IndexHostSingleton._delete(this.config,B),[2,Promise.resolve()]}})})},$.prototype.configureIndex=function(B,G){return this._configureIndex(B,G,this.config.maxRetries)},$.prototype.createCollection=function(B){return this._createCollection(B)},$.prototype.listCollections=function(){return this._listCollections()},$.prototype.deleteCollection=function(B){return this._deleteCollection(B)},$.prototype.describeCollection=function(B){return this._describeCollection(B)},$.prototype._checkForBrowser=function(){if(ZV.isBrowser())console.warn("The Pinecone SDK is intended for server-side use only. Using the SDK within a browser context can expose your API key(s). If you have deployed the SDK to production in a browser, please rotate your API keys.")},$.prototype.getConfig=function(){return this.config},$.prototype.index=function(B,G,X){return new XV.Index(B,this.config,void 0,G,X)},$.prototype.Index=function(B,G,X){return this.index(B,G,X)},$}();Y$.Pinecone=LV});var xW=K((X1)=>{var QV=X1&&X1.__createBinding||(Object.create?function($,B,G,X){if(X===void 0)X=G;var D=Object.getOwnPropertyDescriptor(B,G);if(!D||("get"in D?!B.__esModule:D.writable||D.configurable))D={enumerable:!0,get:function(){return B[G]}};Object.defineProperty($,X,D)}:function($,B,G,X){if(X===void 0)X=G;$[X]=B[G]}),KV=X1&&X1.__setModuleDefault||(Object.create?function($,B){Object.defineProperty($,"default",{enumerable:!0,value:B})}:function($,B){$.default=B}),HV=X1&&X1.__importStar||function($){if($&&$.__esModule)return $;var B={};if($!=null){for(var G in $)if(G!=="default"&&Object.prototype.hasOwnProperty.call($,G))QV(B,$,G)}return KV(B,$),B};Object.defineProperty(X1,"__esModule",{value:!0});X1.EmbeddingsList=X1.Errors=X1.Index=X1.Pinecone=void 0;var TV=jW();Object.defineProperty(X1,"Pinecone",{enumerable:!0,get:function(){return TV.Pinecone}});var EV=C4();Object.defineProperty(X1,"Index",{enumerable:!0,get:function(){return EV.Index}});X1.Errors=HV(m());var fV=I4();Object.defineProperty(X1,"EmbeddingsList",{enumerable:!0,get:function(){return fV.EmbeddingsList}})});import{Client as hV,GatewayIntentBits as j4}from"discord.js";import{AttachmentBuilder as zw}from"discord.js";var u4="1165975291638857778",l4="1322320049750675487";var i4=25,M1=2,O=100,_4=["autoayuda","aventuras","biograf\xEDa","ciencia ficci\xF3n","cocina","contempor\xE1neo","deporte","distop\xEDa","fantas\xEDa","ficci\xF3n","hist\xF3rica","infantil","juvenil","magia","manga","manhwa","negra","paranormal","poes\xEDa","romance","salud","suspense","terror","thriller","viajes"];import{EmbedBuilder as tW}from"discord.js";function pW($,B,G,X){let D=[{name:"Generos",value:$.Generos,inline:!0},{name:"P\xE1ginas",value:$.Paginas.toString(),inline:!0}];if(B&&B.count!==0)D.push({name:"Nota media",value:`${B.media.toString()} segun ${B.count} persona${B.count==1?"":"s"}`,inline:!0});if(G&&G!=-1)D.push({name:"P\xE1ginas leidas",value:G.toString(),inline:!0});if(X&&X!=-1)D.push({name:"Nota personal",value:X.toString(),inline:!0});return D}function sW($,B){return new tW().setColor("#a0522d").setTitle($.Titulo).setDescription($.Sinopsis).setAuthor({name:$.Autor,iconURL:"attachment://imagen.jpg"}).setImage("attachment://imagen.jpg").setFooter({text:B})}function u($,B,G,X,D){let z=sW($,B);return z.addFields(pW($,G,X,D)),z}function W$($,B){return $.member&&$.member.roles.cache.some((G)=>G.id==B)}function PB($){if(typeof $!=="string")throw new TypeError("Expected input to be a string");if($.length%2!==0)throw new RangeError("Expected string to be an even number of characters");let B=new Uint8Array($.length/2);for(let G=0;G<$.length;G+=2)B[G/2]=parseInt($.substring(G,G+2),16);return B.buffer}function x6($){if(typeof $!=="object"||$===null||typeof $.byteLength!=="number")throw new TypeError("Expected input to be an ArrayBuffer");var B=new Uint8Array($),G="",X;for(var D=0;D<B.length;D++)X=B[D].toString(16),G+=X.length===1?"0"+X:X;return G}import{StringSelectMenuOptionBuilder as rW}from"discord.js";function $B(){let $=[];for(let B=0;B<25;B++){let G=_4[B];$.push(new rW().setLabel(`${G}`).setValue(`${G}`))}return $}function BB($,B){let G=$.split(`
`);return`${G[0]?G[0]:""}
${B}
${G[2]?G[2]:""}`}function GB($){return $.split(`
`)[1].split(": ")[1]}import f0 from"@tensorflow/tfjs-node";class n4{value;TTL;initialTTL;constructor($,B){this.value=$,this.TTL=B,this.initialTTL=B}resetTTL(){this.TTL=this.initialTTL}}var oW=1,eW=oW*60*60*1000;class M{capacity;cache;defaultTTL;interval;constructor($,B=1){this.capacity=$,this.cache=new Map,this.defaultTTL=B}get($){if(!this.cache.has($))return;let B=this.cache.get($);return B.resetTTL(),this.cache.delete($),this.cache.set($,B),B.value}put($,B){if(this.cache.has($))this.delete($);else if(this.cache.size>=this.capacity){let G=this.cache.keys().next().value;this.delete(G)}if(this.cache.set($,new n4(B,this.defaultTTL)),!this.interval)this.interval=setInterval(()=>{this.updateTTL()},eW)}delete($){if(this.cache.delete($),this.cache.size==0)clearInterval(this.interval),this.interval=null}deleteAll($){for(let B of this.cache.keys())if($.test(B.toString()))this.cache.delete(B)}updateTTL(){for(let $ of this.cache.keys()){let B=this.cache.get($);if(B.TTL--,B.TTL<=0)this.delete($)}}}class E0{static instance;embedQuerys=new M(O);embedPassages=new M(O);querys=new M(O);fetches=new M(O);static getInstance(){if(!E0.instance)E0.instance=new E0;return E0.instance}embedQuery($){let B=$.toLowerCase().trim();return this.embedQuerys.get(B)}saveEmbedQuery($,B){let G=$.toLowerCase().trim();this.embedQuerys.put(G,B)}saveEmbedPassage($,B){let G=$.toLowerCase().trim();this.embedPassages.put(G,B)}embedPassage($){let B=$.toLowerCase().trim();return this.embedPassages.get(B)}saveQuery($,B,G){let X=`${$}|${B.topK}|${B.includeMetadata}`;if(B.filter)X+=`|${B.filter.toString()}`;this.querys.put(X,G)}query($,B){let G=`${$}|${B.topK}|${B.includeMetadata}`;if(B.filter)G+=`|${B.filter.toString()}`;return this.querys.get(G)}fetch($){return this.fetches.get($)}saveFetch($,B){this.fetches.put($,B)}delete($){this.querys.deleteAll(new RegExp(`${$}$\\|`)),this.fetches.delete($)}}class A{bookbytitle;booksnameautocomplete;exitsbook;AllBooks;existslist;ListCount;List;ListNoOffset;existslistBook;UserBookInfo;notaMedia;static instance;static getInstance(){if(!A.instance)A.instance=new A;return A.instance}constructor(){this.bookbytitle=new M(O),this.booksnameautocomplete=new M(O),this.exitsbook=new M(O),this.List=new M(O),this.existslist=new M(O),this.ListCount=new M(O),this.existslistBook=new M(O),this.UserBookInfo=new M(O),this.notaMedia=new M(O),this.ListNoOffset=new M(O),this.AllBooks=void 0}getBookByTitle($){return this.bookbytitle.get($)}saveBookByTitle($,B){this.bookbytitle.put($,B)}getAllBooks(){return this.AllBooks}setAllBooks($){this.AllBooks=$}getBooksNameAutocomplete($){return this.booksnameautocomplete.get($)}saveBooksNameAutocomplete($,B){this.booksnameautocomplete.put($,B)}getExistsBook($){return this.exitsbook.get($)}saveExistsBook($,B){this.exitsbook.put($,B)}getExistsListBook($,B){return this.existslistBook.get(`${$}|${B}`)}saveExistsListBook($,B,G){this.existslistBook.put(`${$}|${B}`,G)}getExistsList($){return this.existslist.get($)}saveExistsList($,B){this.existslist.put($,B)}resetExistsList($){this.existslist.delete($)}getListCount($,B){return this.ListCount.get(`${$}|${B}`)}saveListCount($,B,G){this.ListCount.put(`${$}|${B}`,G)}getList($,B,G){return this.List.get(`${$}|${B}|${G}`)}saveList($,B,G,X){this.List.put(`${$}|${B}|${G}`,X)}resetList($){this.List.deleteAll(new RegExp(`${$}\\|`))}getListNoOffset($,B){return this.ListNoOffset.get(`${$}|${B}`)}saveListNoOffset($,B,G){this.ListNoOffset.put(`${$}|${B}`,G)}resetListNoOffset($){this.ListNoOffset.deleteAll(new RegExp(`${$}\\|`))}getNotaMedia($){return this.notaMedia.get($)}saveNotaMedia($,B){this.notaMedia.put($,B)}resetNotaMedia($){this.notaMedia.delete($)}deleteNota($,B){this.UserBookInfo.delete(`${$}|${B}`),this.resetNotaMedia(B)}getUserBookInfo($,B){return this.UserBookInfo.get(`${$}|${B}`)}saveUserBookInfo($,B,G){this.UserBookInfo.put(`${$}|${B}`,G)}resetUserBookInfo($,B){this.UserBookInfo.delete(`${$}|${B}`)}updateCachesInsert($){if(this.AllBooks)this.AllBooks.push($)}updateCachesDelete($){this.bookbytitle.delete($),this.booksnameautocomplete.delete($),this.exitsbook.delete($),this.notaMedia.delete($),this.existslistBook.deleteAll(new RegExp(`\\|${$}$`)),this.UserBookInfo.deleteAll(new RegExp(`\\|${$}$`)),this.existslist=new M(O),this.ListCount=new M(O),this.List=new M(O),this.ListNoOffset=new M(O),this.AllBooks=void 0}totalReset(){A.instance=void 0}}import $w from"@tensorflow/tfjs-node";class p1{static instance;encoded=new M(O);static getInstance(){if(!p1.instance)p1.instance=new p1;return p1.instance}constructor(){}getEncoded($){let B=$.dataSync(),G=this.encoded.get(B);if(G)return $w.tensor(G);return}saveEncoded($,B){this.encoded.put($.dataSync(),B.arraySync())}}import Bw from"@tensorflow/tfjs-node";class s1{static instance;predicts=new M(O);static getInstance(){if(!s1.instance)s1.instance=new s1;return s1.instance}constructor(){}getPredict($){let B=$.dataSync(),G=this.predicts.get(B);if(G)return Bw.tensor(G);return}savePredict($,B){this.predicts.put($.dataSync(),B.arraySync())}}import Gw from"@tensorflow/tfjs-node";class h1{static instance;cache=new M(O);static getInstance(){if(!h1.instance)h1.instance=new h1;return h1.instance}constructor(){}getTensor($){let B=this.cache.get($);if(B)return Gw.tensor(B);return}setTensor($,B){this.cache.put($,B.arraySync())}resetTensor($){this.cache.delete($)}reset($){this.cache.delete($)}resetAll(){this.cache=new M(O)}}class K1{static instance;cache=new M(O);static getInstance(){if(!K1.instance)K1.instance=new K1;return K1.instance}constructor(){}getNotas($){let B=this.cache.get($);if(B)return B;return}setNotas($,B){this.cache.put($,B)}resetNota($){this.cache.delete($)}resetAll(){this.cache=new M(O)}}async function v6($){let B=h1.getInstance().getTensor($);if(B)return B;let[G,X,D]=await Promise.all([f.getInstance().getList($,0),f.getInstance().getList($,1),f.getInstance().getList($,2)]),[z,Z,W]=await Promise.all([i.getInstance().getEmbeddings(G),i.getInstance().getEmbeddings(X),i.getInstance().getEmbeddings(D)]),L=z.length==0?f0.zeros([1024]):f0.tensor(z).mean(0),Y=Z.length==0?f0.zeros([1024]):f0.tensor(Z).mean(0),w=W.length==0?f0.zeros([1024]):f0.tensor(W).mean(0),Q=f0.concat([L,Y,w]);return L.dispose(),Y.dispose(),w.dispose(),h1.getInstance().setTensor($,Q),Q}async function d6($){return f0.tensor(await i.getInstance().getEmbedding($))}class H1{static instance;client;stagedEvents=[];static getInstance(){if(!H1.instance)H1.instance=new H1;return H1.instance}setClient($){this.client=$}eventBook($,B){if(this.stagedEvents.push({book:$,message:B}),!this.client)return;this.ConsumeStaged()}async ConsumeStaged(){let $=[...this.stagedEvents];this.stagedEvents=[];let B=await this.client.channels.fetch(l4);for(let G of $)if(B){let X=Buffer.from(G.book.Imagen),D=new zw(X,{name:"imagen.jpg"});B.send({content:G.message,embeds:[u(G.book,"Puedes buscar mas informacion sobre este libro con el comando /verlibro")],files:[D]})}}}import{Collection as Z9}from"discord.js";import{ActionRowBuilder as a4,ButtonBuilder as p4,ButtonStyle as Xw,MessageFlags as Dw,SlashCommandBuilder as Yw,StringSelectMenuBuilder as Zw}from"discord.js";var u6={guildOnly:!0,data:new Yw().setName("actualizar").setDescription("Actualizar informaci\xF3n de un libro").addSubcommand(($)=>$.setName("titulo").setDescription("Actualizar el titulo de un libro").addStringOption((B)=>B.setName("titulo").setDescription("El titulo del libro").setRequired(!0).setAutocomplete(!0)).addStringOption((B)=>B.setName("nuevotitulo").setDescription("El nuevo titulo del libro").setRequired(!0))).addSubcommand(($)=>$.setName("imagen").setDescription("Actualizar la imagen de un libro").addStringOption((B)=>B.setName("titulo").setDescription("El titulo del libro").setRequired(!0).setAutocomplete(!0)).addAttachmentOption((B)=>B.setName("nuevaimagen").setDescription("La nueva imagen del libro").setRequired(!0))).addSubcommand(($)=>$.setName("autor").setDescription("Actualizar el autor de un libro").addStringOption((B)=>B.setName("titulo").setDescription("El titulo del libro").setRequired(!0).setAutocomplete(!0)).addStringOption((B)=>B.setName("nuevoautor").setDescription("El nuevo autor del libro").setRequired(!0))).addSubcommand(($)=>$.setName("sinopsis").setDescription("Actualizar la sinopsis de un libro").addStringOption((B)=>B.setName("titulo").setDescription("El titulo del libro").setRequired(!0).setAutocomplete(!0)).addStringOption((B)=>B.setName("nuevasinopsis").setDescription("La nueva sinopsis del libro").setRequired(!0))).addSubcommand(($)=>$.setName("paginas").setDescription("Actualizar el numero de paginas de un libro").addStringOption((B)=>B.setName("titulo").setDescription("El titulo del libro").setRequired(!0).setAutocomplete(!0)).addIntegerOption((B)=>B.setName("nuevaspaginas").setDescription("El nuevo numero de paginas del libro").setRequired(!0))).addSubcommand(($)=>$.setName("generos").setDescription("Actualizar los generos de un libro").addStringOption((B)=>B.setName("titulo").setDescription("El titulo del libro").setRequired(!0).setAutocomplete(!0))),execute:async($)=>{if(await $.deferReply({flags:Dw.Ephemeral}),!W$($,"1321948892090339452")){await $.editReply({content:"No tienes permiso para usar este comando"});return}let B=$.options,G=B.getSubcommand(),X=B.getString("titulo");if(!await I.getInstance().getBookByTitle(X)){await $.editReply({content:"Libro no encontrado"});return}switch(G){case"titulo":await Ww($,X);break;case"autor":await ww($,X);break;case"sinopsis":await Lw($,X);break;case"paginas":await Qw($,X);break;case"imagen":await Kw($,X);break;case"generos":await Hw($,X);break;default:await $.editReply({content:"Comando no reconocido"})}},autoComplete:async($)=>{let B=$.options,X=(await I.getInstance().getBooksNameAutocomplete(B.getFocused(),!0)).map((D)=>({name:D,value:D}));await $.respond(X)},selectMenu:async($)=>{if($.user.id!==$.customId.split("|")[1])return;let B=$.values.sort().join(","),G=$.message.components[0],X=$.message.components[1];if($.message.components[1].components[0].disabled)X.components[0]=p4.from(X.components[0]).setDisabled(!1);await $.update({content:BB($.message.content,`generos seleccionados: ${B}`),components:[G,X]})},buttons:async($)=>{if($.customId.split("|")[0]==="Continuar"){if($.user.id!==$.customId.split("|")[1])return;await Tw($)}}},s4=u6;async function Ww($,B){let X=$.options.getString("nuevotitulo");if(!X&&X.trim().length==0){await $.editReply({content:"El nuevo titulo no puede ser vacio"});return}if(await I.getInstance().getBookByTitle(X)){await $.editReply({content:"Ya existe un libro con el nuevo titulo."});return}await I.getInstance().updateBookField(B,"Titulo",X),await $.editReply({content:"Titulo actualizado con exito"})}async function ww($,B){let X=$.options.getString("nuevoautor");if(!X&&X.trim().length==0){await $.editReply({content:"El nuevo autor no puede ser vacio"});return}await I.getInstance().updateBookField(B,"Autor",X),await $.editReply({content:"Autor actualizado con exito"})}async function Lw($,B){let X=$.options.getString("nuevasinopsis");if(!X&&X.trim().length==0){await $.editReply({content:"La nueva sinopsis no puede ser vacia"});return}await I.getInstance().updateBookField(B,"Sinopsis",X),await $.editReply({content:"Sinopsis actualizada con exito"})}async function Qw($,B){let X=$.options.getInteger("nuevaspaginas");if(!X){await $.editReply({content:"El nuevo numero de paginas no puede ser vacio"});return}if(X<=0){await $.editReply({content:"El nuevo numero de paginas debe ser mayor que 0"});return}await I.getInstance().updateBookField(B,"Paginas",X),await $.editReply({content:"Paginas actualizadas con exito"})}async function Kw($,B){let X=$.options.getAttachment("nuevaimagen");if(!X){await $.editReply({content:"La nueva imagen no puede ser vacia"});return}if(!X.contentType||!X.contentType.startsWith("image/")){await $.editReply({content:"El archivo debe ser una imagen"});return}let z=await(await fetch(X.url)).arrayBuffer();await I.getInstance().updateBookField(B,"Imagen",z),await $.editReply({content:"Imagen actualizada con exito"})}async function Hw($,B){let G=new Zw().setCustomId(`${u6.data.name}|generos|${$.user.id}`).setPlaceholder("Elige los generos del libro").setMinValues(1).setMaxValues(25).addOptions($B()),X=new p4().setCustomId(`${u6.data.name}|Continuar|${$.user.id}`).setLabel("Continuar").setStyle(Xw.Primary).setDisabled(!0),D=new a4().addComponents(G),z=new a4().addComponents(X);await $.editReply({content:`Elige los generos del libro y pulsa Continuar

|${B}`,components:[D,z]})}async function Tw($){if(await $.deferUpdate(),$.user.id!==$.customId.split("|")[1])return;let B=GB($.message.content);await I.getInstance().updateBookField($.message.content.split("|")[1],"Generos",B),await $.editReply({content:"Generos actualizados con exito",components:[]})}import{ActionRowBuilder as Ew,ApplicationCommandType as fw,AttachmentBuilder as Cw,ButtonBuilder as Iw,ButtonStyle as Nw,ContextMenuCommandBuilder as Uw,MessageFlags as hw}from"discord.js";var o4={data:new Uw().setName("analizar").setType(fw.Message),execute:async($)=>{await $.deferReply({flags:hw.Ephemeral});let B=$.targetMessage;if(!B.content||B.content.trim().length==0){await $.editReply("No hay contenido en el mensaje");return}let G=await I.getInstance().getBooksNameAutocomplete(B.content,!1,2),X=r4(G[0],1),D=r4(G[1],2),z=new Ew().addComponents(X,D);await $.editReply({content:`Los dos libros mas cercanos encontrados son: ${G[0]} y ${G[1]}`,components:[z]})},buttons:async($)=>{let B=$.customId.split("|");if(B[0]=="vermas"){if(await $.deferUpdate(),B[1]==$.message.embeds[0].title)return;let G=B[1],X=await I.getInstance().getBookByTitle(G),D=u(X,"para mas informaci\xF3n usa el comando /verlibro",await f.getInstance().getNotaMedia(X.Titulo)),z=Buffer.from(X.Imagen),Z=new Cw(z,{name:"imagen.jpg"});await $.editReply({content:"",embeds:[D],files:[Z]})}}},e4=o4;function r4($,B){return new Iw().setCustomId(`${o4.data.name}|vermas|${$}`).setLabel(`Ver m\xE1s ${B}`).setStyle(Nw.Primary)}import{SlashCommandBuilder as Vw,MessageFlags as $G,ButtonBuilder as gB,ButtonStyle as _6,ActionRowBuilder as M$,ModalBuilder as Jw,TextInputStyle as l6,TextInputBuilder as i6,AttachmentBuilder as Aw,StringSelectMenuBuilder as Fw}from"discord.js";var zB={data:new Vw().setName("a\xF1adirlibro").setDescription(" a\xF1adir un libro a la biblioteca").addStringOption(($)=>$.setName("titulo").setDescription("El titulo del libro").setRequired(!0)).addAttachmentOption(($)=>$.setName("imagen").setDescription("La imagen del libro").setRequired(!0)),execute:async($)=>{await $.deferReply();let B=$.options,G=B.getString("titulo").trim(),X=B.getAttachment("imagen");if(G.indexOf("|")!==-1||G.indexOf(`
`)!==-1){await $.editReply({content:"El titulo no debe contener '|' ni saltos de linea"});return}if(await I.getInstance().getBookByTitle(G)){await $.editReply({content:"Ya existe un libro con ese titulo"});return}if(!X.contentType||!X.contentType.startsWith("image/")){await $.editReply({content:"El archivo debe ser una imagen"});return}let D=new Fw().setCustomId(`${zB.data.name}|generos|${$.user.id}`).setPlaceholder("Elige los generos del libro").setMinValues(1).setMaxValues(25).addOptions($B()),z=new gB().setCustomId(`${zB.data.name}|Continuar|${$.user.id}`).setLabel("Continuar").setStyle(_6.Primary).setDisabled(!0),Z=new M$().addComponents(D),W=new M$().addComponents(z);await $.editReply({content:`Elige los generos del libro y pulsa Continuar

|${G}|${X.url}`,components:[Z,W]})},buttons:async($)=>{if($.customId.split("|")[0]==="Continuar"){if($.user.id!==$.customId.split("|")[1])return;await Mw($)}if(W$($,"1321908587814981692")){if($.customId==="Confirm")await Sw($);else if($.customId==="Cancel")await bw($)}},selectMenu:async($)=>{if($.user.id!==$.customId.split("|")[1])return;let B=$.values.join(","),G=$.message.components[0],X=$.message.components[1];if($.message.components[1].components[0].disabled)X.components[0]=gB.from(X.components[0]).setDisabled(!1);await $.update({content:BB($.message.content,`generos seleccionados: ${B}`),components:[G,X]})}},BG=zB;async function Mw($){if($.user.id!==$.customId.split("|")[1])return;let B=$.message,X=B.content.split(`
`)[2].split("|"),D=X[1],z=X[2],Z=GB(B.content),W=Rw();await $.showModal(W);let L=(Y)=>{return Y.user.id===$.user.id};$.awaitModalSubmit({time:600000,filter:L}).then(async(Y)=>{await Ow($,Y,D,z,Z)}).catch((Y)=>{console.log(Y)})}function Rw(){let $=new Jw().setTitle("A\xF1adir libro").setCustomId("sugerirlibroModal"),B=new i6().setCustomId("paginas").setLabel("P\xE1ginas").setStyle(l6.Short).setRequired(!0).setPlaceholder("El numero de p\xE1ginas del libro").setMaxLength(1024),G=new i6().setCustomId("sinopsis").setLabel("Sinopsis").setStyle(l6.Paragraph).setRequired(!0).setPlaceholder("La sinopsis del libro"),X=new i6().setCustomId("autor").setLabel("Autor").setStyle(l6.Short).setRequired(!0).setPlaceholder("El autor del libro").setMaxLength(1024),D=new M$().addComponents(B),z=new M$().addComponents(G),Z=new M$().addComponents(X);return $.addComponents(z,Z,D),$}async function Ow($,B,G,X,D){await B.deferReply({flags:$G.Ephemeral});let z=B.fields.getTextInputValue("sinopsis"),Z=B.fields.getTextInputValue("autor"),W;try{if(W=parseInt(B.fields.getTextInputValue("paginas").trim()),W<=0)throw new Error}catch(s){await B.editReply({content:"El numero de p\xE1ginas debe ser un numero entero mayor que 0"});return}let Y=await(await fetch(X)).arrayBuffer(),w={Titulo:G,Sinopsis:z.trim(),Autor:Z.trim(),Generos:D,Paginas:W,Imagen:Y},Q=u(w,`Enviado por: ${B.user.tag} | ID:${B.user.id}`,{media:-1,count:0}),E=new gB().setCustomId(`${zB.data.name}|Confirm`).setLabel("Confirmar").setStyle(_6.Success),C=new gB().setCustomId(`${zB.data.name}|Cancel`).setLabel("Cancelar").setStyle(_6.Danger),H=new M$().addComponents(C,E);await B.editReply({content:"Gracias por tu sugerencia"});let[T,P]=await Promise.all([$.client.channels.fetch($.channelId),B.client.channels.fetch(u4)]);if(T.messages.fetch($.message.id).then((s)=>{if(s.deletable)s.delete()}),P){let s=Buffer.from(w.Imagen),a1=new Aw(s,{name:"imagen.jpg"});await P.send({embeds:[Q],components:[H],files:[a1]})}}async function Sw($){let G=await(await $.client.channels.fetch($.channelId)).messages.fetch($.message.id);if(G.deletable){let X=G.embeds[0].title;if(await I.getInstance().getBookByTitle(X)){await $.reply({content:"Ya existe un libro con ese titulo, eliminado de sugerencias.",flags:$G.Ephemeral}),await G.delete();return}let z=G.embeds[0].author.name,Z=G.embeds[0].fields[0].value,W=G.embeds[0].description,L=G.embeds[0].image.url,w=await(await fetch(L)).arrayBuffer(),Q=parseInt(G.embeds[0].fields[1].value),E={Titulo:X,Autor:z,Generos:Z.split(",").map((C)=>C.trim()).join(","),Paginas:Q,Sinopsis:W,Imagen:w};await Promise.all([I.getInstance().insertBook(E),G.delete()]),H1.getInstance().eventBook(E,`Libro Aceptado por <@${$.user.id}>`)}}async function bw($){let G=await(await $.client.channels.fetch($.channelId)).messages.fetch($.message.id);if(G.deletable)await G.delete()}import{MessageFlags as qw,SlashCommandBuilder as kw}from"discord.js";var yw={guildOnly:!0,data:new kw().setName("borrarlibro").setDescription("Elimina un libro").addStringOption(($)=>$.setName("busqueda").setDescription("El nombre del libro o una descripci\xF3n").setRequired(!0).setAutocomplete(!0)),execute:async($)=>{if(await $.deferReply({flags:qw.Ephemeral}),!W$($,"1321948892090339452")){await $.editReply({content:"No tienes permiso para usar este comando"});return}let G=$.options.getString("busqueda"),X=await I.getInstance().getBookByTitle(G);if(!X){await $.editReply({content:"Libro no encontrado"});return}await $.editReply({content:"Libro eliminado correctamente"}),await I.getInstance().removeBook(X.Titulo),H1.getInstance().eventBook(X,`Libro eliminado por <${$.user.id}>`)},autoComplete:async($)=>{let B=$.options,X=(await I.getInstance().getBooksNameAutocomplete(B.getFocused(),!0)).map((D)=>({name:D,value:D}));await $.respond(X)}},GG=yw;import{MessageFlags as Pw,SlashCommandBuilder as gw}from"discord.js";var cw={data:new gw().setName("calificar").setDescription("Pones una nota a un libro").addStringOption(($)=>$.setName("t\xEDtulo").setDescription("El nombre del libro").setRequired(!0).setAutocomplete(!0)).addIntegerOption(($)=>$.setName("nota").setDescription("La nota que le das al libro").setRequired(!1).setAutocomplete(!0)),execute:async($)=>{await $.deferReply({flags:Pw.Ephemeral});let B=$.options,G=B.getString("t\xEDtulo"),X=await I.getInstance().getBookByTitle(G);if(!X){await $.editReply({content:"Libro no encontrado"});return}if(!await f.getInstance().existsList($.user.id,X.Titulo)){await $.editReply({content:"Libro no encontrado en ninguna lista"});return}let D=B.getInteger("nota");if(!D&&(await f.getInstance().getUserBookInfo($.user.id,G)).Nota!=-1){await f.getInstance().deleteNota($.user.id,G),await $.editReply({content:"Nota borrada con exito"});return}let z=mw(D);if(z){await $.editReply({content:z});return}await $.editReply({content:"Nota puesta con exito"}),await f.getInstance().setNota($.user.id,G,D)},autoComplete:async($)=>{let G=$.options.getFocused(!0);if(G.name=="t\xEDtulo"){let D=(await I.getInstance().getBooksNameAutocomplete(G.value,!0)).map((z)=>({name:z,value:z}));await $.respond(D)}else if(G.name=="nota")await $.respond([{name:"0",value:0},{name:"1",value:1},{name:"2",value:2},{name:"3",value:3},{name:"4",value:4},{name:"5",value:5},{name:"6",value:6},{name:"7",value:7},{name:"8",value:8},{name:"9",value:9},{name:"10",value:10}])}},zG=cw;function mw($){if(isNaN($))return"Nota no valida";if($<0)return"Nota no valida debe ser un numero positivo";if($>10)return"Nota no valida debe ser menor o igual que 10";return null}import{ActionRowBuilder as dw,AttachmentBuilder as uw,ButtonBuilder as s6,ButtonStyle as r6,MessageFlags as lw,SlashCommandBuilder as iw}from"discord.js";async function n6($){try{o.getInstance().selectMenu($)}catch(B){console.error(B)}}import{MessageFlags as jw}from"discord.js";async function a6($){try{o.getInstance().execute($)}catch(B){console.error(B),await $.reply({content:"Error al ejecutar el comando",flags:jw.Ephemeral})}}async function t6($){try{o.getInstance().autoComplete($)}catch(B){console.error(B)}}async function p6($){try{o.getInstance().buttons($)}catch(B){console.error(B)}}import{MessageFlags as xw}from"discord.js";var vw=["leido","enprogreso","planeandoleer"];async function r1($,B){await $.deferReply({flags:xw.Ephemeral});let D=(await(await $.client.channels.fetch($.channelId)).messages.fetch($.message.id)).embeds[0].title;if(!D){await $.editReply({content:"Libro no encontrado"});return}let z=vw.indexOf($.customId);await $.editReply({content:B}),await f.getInstance().markBook($.user.id,D,z)}var XG={data:new iw().setName("libroaleatorio").setDescription("Muestra un libro aleatorio"),execute:async($)=>{await $.deferReply();let B=await I.getInstance().randomBooks(1);if(!B[0]){await $.followUp({content:"No hay libros disponibles",flags:lw.Ephemeral});return}let G=u(B[0],"Libro aleatorio",await f.getInstance().getNotaMedia(B[0].Titulo)),X=Buffer.from(B[0].Imagen),D=new uw(X,{name:"imagen.jpg"}),z=_w(XG.data.name);await $.editReply({embeds:[G],files:[D],components:[z]})},buttons:async($)=>{if($.customId==="planeandoleer")r1($,"Libro marcado como planeando leer");else if($.customId==="enprogreso")r1($,"Libro marcado como en progreso");else if($.customId==="leido")r1($,"Libro marcado como leido")}},DG=XG;function _w($){let B=new s6().setCustomId(`${$}|leido`).setLabel("Leido").setStyle(r6.Success),G=new s6().setCustomId(`${$}|enprogreso`).setLabel("En progreso").setStyle(r6.Primary),X=new s6().setCustomId(`${$}|planeandoleer`).setLabel("Planeando leer").setStyle(r6.Secondary);return new dw().addComponents(B,G,X)}import{ActionRowBuilder as YG,AttachmentBuilder as ZG,ButtonBuilder as w$,ButtonStyle as o6,EmbedBuilder as WG,MessageFlags as cB,SlashCommandBuilder as nw,StringSelectMenuBuilder as wG,StringSelectMenuOptionBuilder as aw}from"discord.js";var DB=["leidos","en progreso","planeandos para leer"],LG=["leidos","enprogreso","planeandoleer"];async function mB($,B,G,X,D){let W=new WG($.message.embeds[0]).data.footer.text.split(" | ");if(W[2].trim().split(" ")[1]!==$.user.id)return;let L=LG.indexOf(X),Y=await f.getInstance().getList($.user.id,L,G*M1);if(Y.length==0&&!D){await $.editReply({content:`No tienes libros ${DB[L]}`});return}else if(D&&Y.length==0){await $.editReply({content:`Ya no te quedan libros ${DB[L]}`,embeds:[],components:[],files:[]});return}let w=await f.getInstance().getListCount($.user.id,L),Q=Math.ceil(w/M1);if(parseInt(W[1].trim().split(" ")[1].split("/")[1])!=Q&&!D)return;let C=parseInt(W[1].trim().split(" ")[1].split("/")[0])-1;if(C>Q)C=Q;let H=$.message.components[0];if(H.components[2]=w$.from(H.components[2]).setDisabled(!1),H.components[0]=w$.from(H.components[0]).setDisabled(!1),B==0&&G==0)H.components[0]=w$.from(H.components[0]).setDisabled(!0);if(B+G*M1==w-1)H.components[2]=w$.from(H.components[2]).setDisabled(!0);let T=await I.getInstance().getBookByTitle(Y[B]),P=Buffer.from(T.Imagen),s=new ZG(P,{name:"imagen.jpg"}),[a1,J$]=await Promise.all([f.getInstance().getNotaMedia(T.Titulo),f.getInstance().getUserBookInfo($.user.id,T.Titulo)]),U1=u(T,`Libro: ${B+1}/${Y.length} | Pagina: ${G+1}/${Q} | userid: ${$.user.id}`,a1,J$.Pagina,J$.Nota),A$=$.message.components[1],t1=wG.from(A$.components[0]);t1.options.forEach((T0,kB)=>{if(T0.data.default)T0.setDefault(!1);if(kB==G)T0.setDefault(!0)}),A$.components[0]=t1,await $.editReply({content:D?"Libro eliminado de la lista":void 0,embeds:[U1],files:[s],components:[H,A$]})}var XB={data:new nw().setName("listas").setDescription("Muestra tus listas de libros").addStringOption(($)=>$.setName("categoria").setDescription("Categoria de la lista").setRequired(!0).setAutocomplete(!0)),execute:async($)=>{await $.deferReply();let G=$.options.getString("categoria").toLowerCase().split(" ").join(""),X=LG.indexOf(G);if(X==-1){await $.followUp({content:"Categoria no encontrada",flags:cB.Ephemeral});return}if(!await f.getInstance().existsList($.user.id)){await $.followUp({content:`No tienes libros ${DB[X]}`,flags:cB.Ephemeral});return}let D=await f.getInstance().getList($.user.id,X,0);if(D.length==0){await $.followUp({content:`No tienes libros ${DB[X]}`,flags:cB.Ephemeral});return}let z=await I.getInstance().getBookByTitle(D[0]),Z=Buffer.from(z.Imagen),W=new ZG(Z,{name:"imagen.jpg"}),L=await f.getInstance().getListCount($.user.id,X),Y=Math.ceil(L/M1),[w,Q]=await Promise.all([f.getInstance().getNotaMedia(z.Titulo),f.getInstance().getUserBookInfo($.user.id,z.Titulo)]),E=u(z,`Libro: 1/${D.length} | Pagina: 1/${Y} | userid: ${$.user.id}`,w,Q.Pagina,Q.Nota),C=new w$().setCustomId(`${XB.data.name}|${G}|atras`).setLabel("Anterior").setStyle(o6.Secondary).setDisabled(!0),H=[];for(let U1=0;U1<Y&&U1<i4;U1++)H.push(new aw().setLabel(`Pagina ${U1+1}`).setValue(`${U1+1}`));H[0].setDefault(!0);let T=new wG().setCustomId(`${XB.data.name}|${G}|pagina`).setPlaceholder("Pagina").addOptions(...H),P=new w$().setCustomId(`${XB.data.name}|${G}|siguiente`).setLabel("Siguiente").setStyle(o6.Success),s=new w$().setCustomId(`${XB.data.name}|eliminarlista|${G}`).setLabel("Eliminar de la lista").setStyle(o6.Danger);if(L==1)P.setDisabled(!0);let a1=new YG().addComponents(C,s,P);if(T.options.length==1)T.setDisabled(!0);let J$=new YG().addComponents(T);await $.editReply({embeds:[E],files:[W],components:[a1,J$]})},autoComplete:async($)=>{let B=$.options,D=["Leidos","En progreso","Planeando leer"].filter((z)=>{return z.toLowerCase().startsWith(B.getFocused().toLowerCase())}).map((z)=>({name:z,value:z.toLowerCase().split(" ").join("")}));await $.respond(D)},buttons:async($)=>{await $.deferUpdate();try{let B=$.customId.split("|");if(B[0]==="eliminarlista"){if(!B[1])return;let X=await(await $.client.channels.fetch($.channelId)).messages.fetch($.message.id),D=X.embeds[0].title;if(X.embeds[0].footer.text.split(" | ")[2].trim().split(" ")[1]!==$.user.id)return;await f.getInstance().unmarkBook($.user.id,D),await mB($,0,0,B[1],!0)}else{let G=DB.indexOf(B[0]);if(G==-1)return;if((await f.getInstance().getList($.user.id,G,0)).length==0){await $.reply({content:"No tienes libros "+B[0],flags:cB.Ephemeral});return}let Z=new WG($.message.embeds[0]).data.footer.text.split(" | "),W=await f.getInstance().getListCount($.user.id,G),L=Math.ceil(W/M1);if(parseInt(Z[1].trim().split(" ")[1].split("/")[1])!=L)return;let w=parseInt(Z[0].trim().split(" ")[1].split("/")[0])-1,Q=parseInt(Z[1].trim().split(" ")[1].split("/")[0])-1;if(B[1]=="siguiente"){if(w==M1-1){if(w=0,Q++,Q>L)return}else w++;await mB($,w,Q,B[0])}else if(B[1]=="atras"){if(w==0){if(w=M1-1,Q--,Q<0)return}else w--;await mB($,w,Q,B[0])}}}catch(B){console.error(B)}},selectMenu:async($)=>{let B=$.customId.split("|"),G=parseInt($.values[0])-1;await mB($,0,G,B[0])}},QG=XB;import{MessageFlags as tw,SlashCommandBuilder as pw}from"discord.js";var sw={data:new pw().setName("marcapaginas").setDescription("Marca la p\xE1gina por la que vas de un libro").addStringOption(($)=>$.setName("t\xEDtulo").setDescription("El nombre del libro").setRequired(!0).setAutocomplete(!0)).addIntegerOption(($)=>$.setName("p\xE1gina").setDescription("La p\xE1gina por la que vas").setRequired(!0).setAutocomplete(!0)),execute:async($)=>{await $.deferReply({flags:tw.Ephemeral});let B=$.options,G=B.getString("t\xEDtulo"),X=await I.getInstance().getBookByTitle(G);if(!X){await $.editReply({content:"Libro no encontrado"});return}if(!await f.getInstance().existsList($.user.id,X.Titulo)){await $.editReply({content:"Libro no encontrado en ninguna lista"});return}let D=B.getInteger("p\xE1gina"),z=rw(D,X.Paginas);if(z){await $.editReply({content:z});return}await $.editReply({content:"P\xE1gina marcada con exito"}),await f.getInstance().markPage($.user.id,G,D)},autoComplete:async($)=>{let B=$.options,G=B.getFocused(!0);if(G.name=="t\xEDtulo"){let D=(await I.getInstance().getBooksNameAutocomplete(G.value,!0)).map((z)=>({name:z,value:z}));await $.respond(D)}else if(G.name=="p\xE1gina"){let X=[];setTimeout(async()=>{if(!$.responded)await $.respond(X)},2000);let D=await I.getInstance().getBookByTitle(B.getString("t\xEDtulo"));if(!D&&!$.responded){await $.respond([]);return}try{let z=G.value.trim().length==0?0:parseInt(G.value);for(let Z=z;Z<=D.Paginas&&X.length<25;Z++)X.push({name:`${Z}`,value:Z})}catch(z){if(!$.responded)await $.respond([])}}}},KG=sw;function rw($,B){return isNaN($)||$<0||$>B?`P\xE1gina no valida (debe ser un numero entre 1 y ${B})`:null}import{AttachmentBuilder as HG,MessageFlags as ow,SlashCommandBuilder as ew}from"discord.js";import e6 from"@tensorflow/tfjs-node";class C0{capas;modelo;static instance;static async getInstance(){if(!C0.instance)C0.instance=await this.loadModel("./models/recommender");return C0.instance}constructor(){this.capas=[1218,304,76,19,1],this.modelo=this.createModelo(),this.compile()}setModelo($){this.modelo=$}createModelo(){let $=e6.sequential();for(let B=1;B<this.capas.length;B++)$.add(e6.layers.dense({units:this.capas[B],inputShape:B==1?[this.capas[B-1]]:void 0,activation:B==this.capas.length-1?"sigmoid":void 0}));return $}compile(){this.modelo.compile({optimizer:"adam",loss:"meanSquaredError"})}async train($,B){await this.modelo.fit($,B,{epochs:100})}async predict($){let B=s1.getInstance().getPredict($);if(B)return B;let G=this.modelo.predict($);return s1.getInstance().savePredict($,G),G}async saveModel($){await this.modelo.save(`file://${$}`)}static async loadModel($){let B=await e6.loadLayersModel(`file://${$}/model.json`),G=new C0;return G.setModelo(B),G.compile(),G}}import R$ from"@tensorflow/tfjs-node";class I0{capas;encoder;decoder;autoencoder;static instance;static async getInstance(){if(!I0.instance)I0.instance=await this.loadModel("./models/autoencoder");return I0.instance}constructor(){this.capas=[3072,774,194],this.encoder=this.createEncoder(),this.decoder=this.createDecoder(),this.autoencoder=this.createAutoEncoder(),this.compile()}compile(){this.autoencoder.compile({optimizer:"adam",loss:"meanSquaredError"})}setEncoder($){this.encoder=$}setDecoder($){this.decoder=$}setAutoEncoder($){this.autoencoder=$}createEncoder(){let $=R$.sequential();for(let B=1;B<this.capas.length;B++)$.add(R$.layers.dense({units:this.capas[B],inputShape:B==1?[this.capas[B-1]]:void 0}));return $}createDecoder(){let $=R$.sequential(),B=this.capas.length-2;for(let G=B;G>=0;G--)$.add(R$.layers.dense({units:this.capas[G],inputShape:G==B?[this.capas[G+1]]:void 0}));return $}createAutoEncoder(){let $=R$.sequential();return $.add(this.encoder),$.add(this.decoder),$}async train($){await this.autoencoder.fit($,$,{epochs:100})}async encode($){let B=p1.getInstance().getEncoded($);if(B)return B;let G=this.encoder.predict($);return p1.getInstance().saveEncoded($,G),G}async decode($){return this.decoder.predict($)}async encodeDecode($){return this.autoencoder.predict($)}async saveModel($){await this.autoencoder.save(`file://${$}`)}static async loadModel($){let B=await R$.loadLayersModel(`file://${$}/model.json`),G=new I0;return G.setAutoEncoder(B),G.setEncoder(B.layers[0]),G.setDecoder(B.layers[1]),G.compile(),G}}import $9 from"@tensorflow/tfjs-node";var B9={data:new ew().setName("recomiendame").setDescription("Te recomienda un libro").addSubcommand(($)=>$.setName("similares").setDescription("Te recomienda libros en base a los libros que has leido")).addSubcommand(($)=>$.setName("inteligente").setDescription("(BETA) Te recomienda libros en base a los libros que has leido usando IA")),execute:async($)=>{switch(await $.deferReply({flags:ow.Ephemeral}),$.options.getSubcommand()){case"similares":await TG($);break;case"inteligente":await G9($);break}}},EG=B9;async function TG($){let B=$.user.id,[G,X,D]=await Promise.all([f.getInstance().getList(B,0),f.getInstance().getList(B,1),f.getInstance().getList(B,2)]),z=[...G,...X,...D],Z=G;if(Z.length==0)Z=X;if(Z.length==0)Z=D;if(Z.length==0){await $.editReply({content:"No has leido ningun libro y no podemos sugerirte similares"});return}let W=await I.getInstance().getBookByTitle(Z[Math.floor(Math.random()*Z.length)]),L=await I.getInstance().getSimilarBooks(W,z);if(!L||L.length==0){await $.editReply({content:"Nos quedan libros por recomendarte"});return}let Y=L[Math.floor(Math.random()*L.length)],w=Buffer.from(Y.Imagen),Q=new HG(w,{name:"imagen.jpg"}),E=u(Y,`Para mas informaci\xF3n usa el comando /verlibro | En base a ${W.Titulo}`,await f.getInstance().getNotaMedia(Y.Titulo));await $.editReply({embeds:[E],files:[Q]})}async function G9($){let B=$.user.id,G=await K1.getInstance().getNotas(B),X=[],D;if(!G){let[Q,E]=await Promise.all([I0.getInstance(),C0.getInstance()]),C=await v6(B),H=C.reshape([1,3072]),T=Q.encode(H);C.dispose();let[P,s,a1]=await Promise.all([f.getInstance().getList(B,0),f.getInstance().getList(B,1),f.getInstance().getList(B,2)]),J$=[...P,...s,...a1],U1=await I.getInstance().getAllBooks();U1=U1.filter((t1)=>!J$.includes(t1));let A$=(await T).reshape([194]);H.dispose();for(let t1 of U1){let T0=await d6(t1),kB=$9.concat([T0,A$]),x4=kB.reshape([1,1218]),v4=await E.predict(x4),lW=v4.dataSync()[0];v4.dispose(),x4.dispose(),kB.dispose(),T0.dispose(),X.push({libro:t1,nota:lW})}if(A$.dispose(),X.length==0){await TG($);return}D=X.sort((t1,T0)=>T0.nota-t1.nota),K1.getInstance().setNotas(B,D)}else D=G;let z=Math.random()<=0.9,Z;if(z)Z=D[Math.floor(Math.random()*D.length/2)];else Z=D[0];let W=await I.getInstance().getBookByTitle(Z.libro),L=Buffer.from(W.Imagen),Y=new HG(L,{name:"imagen.jpg"}),w=u(W,`Para mas informaci\xF3n usa el comando /verlibro | Nota predecida: ${(Z.nota*10).toFixed(2)}`,await f.getInstance().getNotaMedia(W.Titulo));await $.editReply({embeds:[w],files:[Y]})}import{ActionRowBuilder as $8,AttachmentBuilder as B8,ButtonBuilder as N0,ButtonStyle as U0,EmbedBuilder as z9,MessageFlags as fG,SlashCommandBuilder as X9}from"discord.js";var o1={data:new X9().setName("verlibro").setDescription("Ver un libro en concreto").addStringOption(($)=>$.setName("busqueda").setDescription("El nombre del libro o una descripcion empezada por d:").setRequired(!0).setAutocomplete(!0)),execute:async($)=>{await $.deferReply();let G=$.options.getString("busqueda"),X=await I.getInstance().getBookByTitle(G);if(!X){await $.followUp({content:"Libro no encontrado",flags:fG.Ephemeral});return}let D=f.getInstance(),[z,Z]=await Promise.all([D.getNotaMedia(X.Titulo),D.getUserBookInfo($.user.id,X.Titulo)]),W=u(X,"Puedes ayudar a\xF1adiendo libros con el comando /a\xF1adirlibro",z,Z.Pagina,Z.Nota),L=Buffer.from(X.Imagen),Y=new B8(L,{name:"imagen.jpg"}),w=new N0().setCustomId(`${o1.data.name}|leido`).setLabel("Leido").setStyle(U0.Success),Q=new N0().setCustomId(`${o1.data.name}|enprogreso`).setLabel("En progreso").setStyle(U0.Primary),E=new N0().setCustomId(`${o1.data.name}|planeandoleer`).setLabel("Planeando leer").setStyle(U0.Secondary),C=new N0().setCustomId(`${o1.data.name}|similares`).setLabel("Libros similares").setStyle(U0.Danger),H=new $8().addComponents(w,Q,E,C);await $.editReply({embeds:[W],files:[Y],components:[H]})},autoComplete:async($)=>{let G=$.options.getFocused(),X=G.startsWith("d:"),z=(await I.getInstance().getBooksNameAutocomplete(X?G.substring(2):G,!X)).map((Z)=>({name:Z,value:Z}));try{await $.respond(z)}catch(Z){}return},buttons:async($)=>{if($.customId==="planeandoleer")await r1($,"Libro marcado como planeando leer");else if($.customId==="enprogreso")await r1($,"Libro marcado como en progreso");else if($.customId==="leido")await r1($,"Libro marcado como leido");else if($.customId==="similares")await $.deferReply({flags:fG.Ephemeral}),await Y9($);else if($.customId.split("|")[0]==="Similares"){await $.deferUpdate();let B=$.message.embeds[0].footer.text.split(" | ");if(B[1].split(" ")[1]!==$.user.id)return;let G=$.customId.split("|")[1],X=B[2],Z=B[0].split(" ")[1].split("/"),W=parseInt(Z[0]),L=parseInt(Z[1]);if(G==="siguiente"){if(W<L)W++}else if(G==="atras"){if(W>1)W--}await D9($,W-1,X)}}},CG=o1;async function D9($,B,G){if(new z9($.message.embeds[0]).data.footer.text.split(" | ")[1].trim().split(" ")[1]!==$.user.id)return;let Z=await I.getInstance().getBookByTitle(G),W=await I.getInstance().getSimilarBooks(Z),L=u(W[B],`Libro: ${B+1}/${W.length} | userid: ${$.user.id} | ${G}`,await f.getInstance().getNotaMedia(W[B].Titulo)),Y=Buffer.from(W[B].Imagen),w=new B8(Y,{name:"imagen.jpg"}),Q=new N0().setCustomId(`${o1.data.name}|Similares|atras`).setLabel("Anterior").setStyle(U0.Secondary).setDisabled(B===0),E=new N0().setCustomId(`${o1.data.name}|Similares|siguiente`).setLabel("Siguiente").setStyle(U0.Success).setDisabled(B===W.length-1),C=new $8().addComponents([Q,E]);await $.editReply({embeds:[L],files:[w],components:[C]})}async function Y9($){let B=$.message.embeds[0].title;if(!B){await $.editReply({content:"Libro no encontrado"});return}let G=await I.getInstance().getBookByTitle(B);if(!G){await $.editReply({content:"Libro no encontrado"});return}let X=await I.getInstance().getSimilarBooks(G);if(!X){await $.editReply({content:"No se encontraron libros similares"});return}let D=u(X[0],`Libro: 1/${X.length} | userid: ${$.user.id} | ${B}`,await f.getInstance().getNotaMedia(X[0].Titulo)),z=Buffer.from(X[0].Imagen),Z=new B8(z,{name:"imagen.jpg"}),W=new N0().setCustomId(`${o1.data.name}|Similares|atras`).setLabel("Anterior").setStyle(U0.Secondary).setDisabled(!0),L=new N0().setCustomId(`${o1.data.name}|Similares|siguiente`).setLabel("Siguiente").setStyle(U0.Success),Y=new $8().addComponents([W,L]);await $.editReply({embeds:[D],files:[Z],components:[Y]})}var G8={actualizar:s4,analizar:e4,a\u{f1}adirlibro:BG,borrarlibro:GG,calificar:zG,libroaleatorio:DG,listas:QG,marcapaginas:KG,recomiendame:EG,verlibro:CG};class o{static instance;commands=new Z9;static getInstance(){if(!o.instance)o.instance=new o;return o.instance}constructor(){this.loadCommands()}getCommandsJSON(){return this.commands.map(($)=>({data:$.data.toJSON(),guildOnly:$.guildOnly}))}execute($){let B=this.getCommand($.commandName);if(!B)return;try{B.execute($)}catch(G){console.error(G)}}autoComplete($){let B=this.getCommand($.commandName);if(!B)return;try{B.autoComplete($)}catch(G){console.error(G)}}buttons($){let B=$.customId.split("|"),G=this.getCommand(B[0]);if($.customId=B.slice(1).join("|"),!G)return;try{G.buttons($)}catch(X){console.error(X)}}selectMenu($){let B=$.customId.split("|"),G=this.getCommand(B[0]);if($.customId=B.slice(1).join("|"),!G)return;try{G.selectMenu($)}catch(X){console.error(X)}}getCommandNames(){return this.commands.map(($)=>$.data.name)}getCommand($){return this.commands.get($)}loadCommands(){for(let $ of Object.keys(G8)){let B=G8[$];if(!B)return;this.commands.set(B.data.name,B)}}getCommands(){return this.commands.map(($)=>({name:$.data.name,value:$.data.name}))}}class U extends Error{code;rawCode;constructor($,B,G,X){if(B!==void 0)$=`${B}: ${$}`;super($,{cause:X});this.code=B,this.rawCode=G,this.name="LibsqlError"}}function IG($){let B=W9.exec($);if(B===null)throw new U(`The URL '${$}' is not in a valid format`,"URL_INVALID");let G=B.groups,X=G.scheme,D=G.authority!==void 0?w9(G.authority):void 0,z=L$(G.path),Z=G.query!==void 0?Q9(G.query):void 0,W=G.fragment!==void 0?L$(G.fragment):void 0;return{scheme:X,authority:D,path:z,query:Z,fragment:W}}var W9=(()=>{return new RegExp("^(?<scheme>[A-Za-z][A-Za-z.+-]*):(//(?<authority>[^/?#]*))?(?<path>[^?#]*)(\\?(?<query>[^#]*))?(#(?<fragment>.*))?$","su")})();function w9($){let B=L9.exec($);if(B===null)throw new U("The authority part of the URL is not in a valid format","URL_INVALID");let G=B.groups,X=L$(G.host_br??G.host),D=G.port?parseInt(G.port,10):void 0,z=G.username!==void 0?{username:L$(G.username),password:G.password!==void 0?L$(G.password):void 0}:void 0;return{host:X,port:D,userinfo:z}}var L9=(()=>{return new RegExp("^((?<username>[^:]*)(:(?<password>.*))?@)?((?<host>[^:\\[\\]]*)|(\\[(?<host_br>[^\\[\\]]*)\\]))(:(?<port>[0-9]*))?$","su")})();function Q9($){let B=$.split("&"),G=[];for(let X of B){if(X==="")continue;let D,z,Z=X.indexOf("=");if(Z<0)D=X,z="";else D=X.substring(0,Z),z=X.substring(Z+1);G.push({key:L$(D.replaceAll("+"," ")),value:L$(z.replaceAll("+"," "))})}return{pairs:G}}function L$($){try{return decodeURIComponent($)}catch(B){if(B instanceof URIError)throw new U(`URL component has invalid percent encoding: ${B}`,"URL_INVALID",void 0,B);throw B}}function YB($,B,G){if(B===void 0)throw new U(`URL with scheme ${JSON.stringify($+":")} requires authority (the "//" part)`,"URL_INVALID");let X=`${$}:`,D=K9(B.host),z=H9(B.port),W=`//${T9(B.userinfo)}${D}${z}`,L=G.split("/").map(encodeURIComponent).join("/");if(L!==""&&!L.startsWith("/"))L="/"+L;return new URL(`${X}${W}${L}`)}function K9($){return $.includes(":")?`[${encodeURI($)}]`:encodeURI($)}function H9($){return $!==void 0?`:${$}`:""}function T9($){if($===void 0)return"";let B=encodeURIComponent($.username),G=$.password!==void 0?`:${encodeURIComponent($.password)}`:"";return`${B}${G}@`}var S$=typeof Buffer==="function",NG=typeof TextDecoder==="function"?new TextDecoder:void 0,UG=typeof TextEncoder==="function"?new TextEncoder:void 0;var ZB=Array.prototype.slice.call("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="),jB=(($)=>{let B={};return $.forEach((G,X)=>B[G]=X),B})(ZB),E9=/^(?:[A-Za-z\d+\/]{4})*?(?:[A-Za-z\d+\/]{2}(?:==)?|[A-Za-z\d+\/]{3}=?)?$/,r=String.fromCharCode.bind(String),hG=typeof Uint8Array.from==="function"?Uint8Array.from.bind(Uint8Array):($)=>new Uint8Array(Array.prototype.slice.call($,0)),AG=($)=>$.replace(/=/g,"").replace(/[+\/]/g,(B)=>B=="+"?"-":"_"),FG=($)=>$.replace(/[^A-Za-z0-9\+\/]/g,""),MG=($)=>{let B,G,X,D,z="",Z=$.length%3;for(let W=0;W<$.length;){if((G=$.charCodeAt(W++))>255||(X=$.charCodeAt(W++))>255||(D=$.charCodeAt(W++))>255)throw new TypeError("invalid character found");B=G<<16|X<<8|D,z+=ZB[B>>18&63]+ZB[B>>12&63]+ZB[B>>6&63]+ZB[B&63]}return Z?z.slice(0,Z-3)+"===".substring(Z):z},D8=typeof btoa==="function"?($)=>btoa($):S$?($)=>Buffer.from($,"binary").toString("base64"):MG,z8=S$?($)=>Buffer.from($).toString("base64"):($)=>{let G=[];for(let X=0,D=$.length;X<D;X+=4096)G.push(r.apply(null,$.subarray(X,X+4096)));return D8(G.join(""))},xB=($,B=!1)=>B?AG(z8($)):z8($),f9=($)=>{if($.length<2){var B=$.charCodeAt(0);return B<128?$:B<2048?r(192|B>>>6)+r(128|B&63):r(224|B>>>12&15)+r(128|B>>>6&63)+r(128|B&63)}else{var B=65536+($.charCodeAt(0)-55296)*1024+($.charCodeAt(1)-56320);return r(240|B>>>18&7)+r(128|B>>>12&63)+r(128|B>>>6&63)+r(128|B&63)}},C9=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,RG=($)=>$.replace(C9,f9),VG=S$?($)=>Buffer.from($,"utf8").toString("base64"):UG?($)=>z8(UG.encode($)):($)=>D8(RG($)),O$=($,B=!1)=>B?AG(VG($)):VG($),JG=($)=>O$($,!0),I9=/[\xC0-\xDF][\x80-\xBF]|[\xE0-\xEF][\x80-\xBF]{2}|[\xF0-\xF7][\x80-\xBF]{3}/g,N9=($)=>{switch($.length){case 4:var B=(7&$.charCodeAt(0))<<18|(63&$.charCodeAt(1))<<12|(63&$.charCodeAt(2))<<6|63&$.charCodeAt(3),G=B-65536;return r((G>>>10)+55296)+r((G&1023)+56320);case 3:return r((15&$.charCodeAt(0))<<12|(63&$.charCodeAt(1))<<6|63&$.charCodeAt(2));default:return r((31&$.charCodeAt(0))<<6|63&$.charCodeAt(1))}},OG=($)=>$.replace(I9,N9),SG=($)=>{if($=$.replace(/\s+/g,""),!E9.test($))throw new TypeError("malformed base64.");$+="==".slice(2-($.length&3));let B,G="",X,D;for(let z=0;z<$.length;)B=jB[$.charAt(z++)]<<18|jB[$.charAt(z++)]<<12|(X=jB[$.charAt(z++)])<<6|(D=jB[$.charAt(z++)]),G+=X===64?r(B>>16&255):D===64?r(B>>16&255,B>>8&255):r(B>>16&255,B>>8&255,B&255);return G},Y8=typeof atob==="function"?($)=>atob(FG($)):S$?($)=>Buffer.from($,"base64").toString("binary"):SG,bG=S$?($)=>hG(Buffer.from($,"base64")):($)=>hG(Y8($).split("").map((B)=>B.charCodeAt(0))),qG=($)=>bG(kG($)),U9=S$?($)=>Buffer.from($,"base64").toString("utf8"):NG?($)=>NG.decode(bG($)):($)=>OG(Y8($)),kG=($)=>FG($.replace(/[-_]/g,(B)=>B=="-"?"+":"/")),X8=($)=>U9(kG($)),h9=($)=>{if(typeof $!=="string")return!1;let B=$.replace(/\s+/g,"").replace(/={0,2}$/,"");return!/[^\s0-9a-zA-Z\+/]/.test(B)||!/[^\s0-9a-zA-Z\-_]/.test(B)},yG=($)=>{return{value:$,enumerable:!1,writable:!0,configurable:!0}},PG=function(){let $=(B,G)=>Object.defineProperty(String.prototype,B,yG(G));$("fromBase64",function(){return X8(this)}),$("toBase64",function(B){return O$(this,B)}),$("toBase64URI",function(){return O$(this,!0)}),$("toBase64URL",function(){return O$(this,!0)}),$("toUint8Array",function(){return qG(this)})},gG=function(){let $=(B,G)=>Object.defineProperty(Uint8Array.prototype,B,yG(G));$("toBase64",function(B){return xB(this,B)}),$("toBase64URI",function(){return xB(this,!0)}),$("toBase64URL",function(){return xB(this,!0)})},V9=()=>{PG(),gG()},b$={version:"3.7.7",VERSION:"3.7.7",atob:Y8,atobPolyfill:SG,btoa:D8,btoaPolyfill:MG,fromBase64:X8,toBase64:O$,encode:O$,encodeURI:JG,encodeURL:JG,utob:RG,btou:OG,decode:X8,isValid:h9,fromUint8Array:xB,toUint8Array:qG,extendString:PG,extendUint8Array:gG,extendBuiltins:V9};var R1="https://github.com/libsql/libsql-client-ts#supported-urls";function h0($){if($==="write")return"BEGIN IMMEDIATE";else if($==="read")return"BEGIN TRANSACTION READONLY";else if($==="deferred")return"BEGIN DEFERRED";else throw RangeError('Unknown transaction mode, supported values are "write", "read" and "deferred"')}class q${columns;columnTypes;rows;rowsAffected;lastInsertRowid;constructor($,B,G,X,D){this.columns=$,this.columnTypes=B,this.rows=G,this.rowsAffected=X,this.lastInsertRowid=D}toJSON(){return{columns:this.columns,columnTypes:this.columnTypes,rows:this.rows.map(J9),rowsAffected:this.rowsAffected,lastInsertRowid:this.lastInsertRowid!==void 0?""+this.lastInsertRowid:null}}}function J9($){return Array.prototype.map.call($,A9)}function A9($){if(typeof $==="bigint")return""+$;else if($ instanceof ArrayBuffer)return b$.fromUint8Array(new Uint8Array($));else return $}var cG=":memory:";function mG($){return $.scheme==="file"&&($.path===":memory:"||$.path.startsWith(":memory:?"))}function WB($,B){if(typeof $!=="object")throw new TypeError(`Expected client configuration as object, got ${typeof $}`);let{url:G,authToken:X,tls:D,intMode:z,concurrency:Z}=$;Z=Math.max(0,Z||20),z??="number";let W=[];if(G===cG)G="file::memory:";let L=IG(G),Y=L.scheme.toLowerCase(),w=Y==="file"&&L.path===cG&&L.authority===void 0,Q;if(w)Q={cache:{values:["shared","private"],update:(T,P)=>W.push(`${T}=${P}`)}};else Q={tls:{values:["0","1"],update:(T,P)=>D=P==="1"},authToken:{update:(T,P)=>X=P}};for(let{key:T,value:P}of L.query?.pairs??[]){if(!Object.hasOwn(Q,T))throw new U(`Unsupported URL query parameter ${JSON.stringify(T)}`,"URL_PARAM_NOT_SUPPORTED");let s=Q[T];if(s.values!==void 0&&!s.values.includes(P))throw new U(`Unknown value for the "${T}" query argument: ${JSON.stringify(P)}. Supported values are: [${s.values.map((a1)=>'"'+a1+'"').join(", ")}]`,"URL_INVALID");if(s.update!==void 0)s?.update(T,P)}let E=W.length===0?"":`?${W.join("&")}`,C=L.path+E,H;if(Y==="libsql")if(D===!1){if(L.authority?.port===void 0)throw new U('A "libsql:" URL with ?tls=0 must specify an explicit port',"URL_INVALID");H=B?"http":"ws"}else H=B?"https":"wss";else H=Y;if(H==="http"||H==="ws")D??=!1;else D??=!0;if(H!=="http"&&H!=="ws"&&H!=="https"&&H!=="wss"&&H!=="file")throw new U(`The client supports only "libsql:", "wss:", "ws:", "https:", "http:" and "file:" URLs, got ${JSON.stringify(L.scheme+":")}. For more information, please read ${R1}`,"URL_SCHEME_NOT_SUPPORTED");if(z!=="number"&&z!=="bigint"&&z!=="string")throw new TypeError(`Invalid value for intMode, expected "number", "bigint" or "string", got ${JSON.stringify(z)}`);if(L.fragment!==void 0)throw new U(`URL fragments are not supported: ${JSON.stringify("#"+L.fragment)}`,"URL_INVALID");if(w)return{scheme:"file",tls:!1,path:C,intMode:z,concurrency:Z,syncUrl:$.syncUrl,syncInterval:$.syncInterval,fetch:$.fetch,authToken:void 0,encryptionKey:void 0,authority:void 0};return{scheme:H,tls:D,authority:L.authority,path:C,authToken:X,intMode:z,concurrency:Z,encryptionKey:$.encryptionKey,syncUrl:$.syncUrl,syncInterval:$.syncInterval,fetch:$.fetch}}var vB=yB(tG(),1);import{Buffer as sG}from"buffer";function rG($){if($.scheme!=="file")throw new U(`URL scheme ${JSON.stringify($.scheme+":")} is not supported by the local sqlite3 client. For more information, please read ${R1}`,"URL_SCHEME_NOT_SUPPORTED");let B=$.authority;if(B!==void 0){let Z=B.host.toLowerCase();if(Z!==""&&Z!=="localhost")throw new U(`Invalid host in file URL: ${JSON.stringify(B.host)}. A "file:" URL with an absolute path should start with one slash ("file:/absolute/path.db") or with three slashes ("file:///absolute/path.db"). For more information, please read ${R1}`,"URL_INVALID");if(B.port!==void 0)throw new U("File URL cannot have a port","URL_INVALID");if(B.userinfo!==void 0)throw new U("File URL cannot have username and password","URL_INVALID")}let G=mG($);if(G&&$.syncUrl)throw new U(`Embedded replica must use file for local db but URI with in-memory mode were provided instead: ${$.path}`,"URL_INVALID");let X=$.path;if(G)X=`${$.scheme}:${$.path}`;let D={authToken:$.authToken,encryptionKey:$.encryptionKey,syncUrl:$.syncUrl,syncPeriod:$.syncInterval},z=new vB.default(X,D);return l(z,"SELECT 1 AS checkThatTheDatabaseCanBeOpened",$.intMode),new oG(X,D,z,$.intMode)}class oG{#$;#B;#G;#z;closed;protocol;constructor($,B,G,X){this.#$=$,this.#B=B,this.#G=G,this.#z=X,this.closed=!1,this.protocol="file"}async execute($,B){let G;if(typeof $==="string")G={sql:$,args:B||[]};else G=$;return this.#D(),l(this.#X(),G,this.#z)}async batch($,B="deferred"){this.#D();let G=this.#X();try{l(G,h0(B),this.#z);let X=$.map((D)=>{if(!G.inTransaction)throw new U("The transaction has been rolled back","TRANSACTION_CLOSED");return l(G,D,this.#z)});return l(G,"COMMIT",this.#z),X}finally{if(G.inTransaction)l(G,"ROLLBACK",this.#z)}}async migrate($){this.#D();let B=this.#X();try{l(B,"PRAGMA foreign_keys=off",this.#z),l(B,h0("deferred"),this.#z);let G=$.map((X)=>{if(!B.inTransaction)throw new U("The transaction has been rolled back","TRANSACTION_CLOSED");return l(B,X,this.#z)});return l(B,"COMMIT",this.#z),G}finally{if(B.inTransaction)l(B,"ROLLBACK",this.#z);l(B,"PRAGMA foreign_keys=on",this.#z)}}async transaction($="write"){let B=this.#X();return l(B,h0($),this.#z),this.#G=null,new eG(B,this.#z)}async executeMultiple($){this.#D();let B=this.#X();try{return $z(B,$)}finally{if(B.inTransaction)l(B,"ROLLBACK",this.#z)}}async sync(){this.#D();let $=await this.#X().sync();return{frames_synced:$.frames_synced,frame_no:$.frame_no}}close(){if(this.closed=!0,this.#G!==null)this.#G.close()}#D(){if(this.closed)throw new U("The client is closed","CLIENT_CLOSED")}#X(){if(this.#G===null)this.#G=new vB.default(this.#$,this.#B);return this.#G}}class eG{#$;#B;constructor($,B){this.#$=$,this.#B=B}async execute($,B){let G;if(typeof $==="string")G={sql:$,args:B||[]};else G=$;return this.#G(),l(this.#$,G,this.#B)}async batch($){return $.map((B)=>{return this.#G(),l(this.#$,B,this.#B)})}async executeMultiple($){return this.#G(),$z(this.#$,$)}async rollback(){if(!this.#$.open)return;this.#G(),l(this.#$,"ROLLBACK",this.#B)}async commit(){this.#G(),l(this.#$,"COMMIT",this.#B)}close(){if(this.#$.inTransaction)l(this.#$,"ROLLBACK",this.#B)}get closed(){return!this.#$.inTransaction}#G(){if(this.closed)throw new U("The transaction is closed","TRANSACTION_CLOSED")}}function l($,B,G){let X,D;if(typeof B==="string")X=B,D=[];else if(X=B.sql,Array.isArray(B.args))D=B.args.map((z)=>pG(z,G));else{D={};for(let z in B.args){let Z=z[0]==="@"||z[0]==="$"||z[0]===":"?z.substring(1):z;D[Z]=pG(B.args[z],G)}}try{let z=$.prepare(X);z.safeIntegers(!0);let Z=!0;try{z.raw(!0)}catch{Z=!1}if(Z){let W=Array.from(z.columns().map((E)=>E.name)),L=Array.from(z.columns().map((E)=>E.type??"")),Y=z.all(D).map((E)=>{return e9(E,W,G)}),w=0,Q=void 0;return new q$(W,L,Y,0,void 0)}else{let W=z.run(D),L=W.changes,Y=BigInt(W.lastInsertRowid);return new q$([],[],[],L,Y)}}catch(z){throw Bz(z)}}function e9($,B,G){let X={};Object.defineProperty(X,"length",{value:$.length});for(let D=0;D<$.length;++D){let z=$L($[D],G);Object.defineProperty(X,D,{value:z});let Z=B[D];if(!Object.hasOwn(X,Z))Object.defineProperty(X,Z,{value:z,enumerable:!0,configurable:!0,writable:!0})}return X}function $L($,B){if(typeof $==="bigint")if(B==="number"){if($<BL||$>GL)throw new RangeError("Received integer which cannot be safely represented as a JavaScript number");return Number($)}else if(B==="bigint")return $;else if(B==="string")return""+$;else throw new Error("Invalid value for IntMode");else if($ instanceof sG)return $.buffer;return $}var BL=-9007199254740991n,GL=9007199254740991n;function pG($,B){if(typeof $==="number"){if(!Number.isFinite($))throw new RangeError("Only finite numbers (not Infinity or NaN) can be passed as arguments");return $}else if(typeof $==="bigint"){if($<zL||$>XL)throw new RangeError("bigint is too large to be represented as a 64-bit integer and passed as argument");return $}else if(typeof $==="boolean")switch(B){case"bigint":return $?1n:0n;case"string":return $?"1":"0";default:return $?1:0}else if($ instanceof ArrayBuffer)return sG.from($);else if($ instanceof Date)return $.valueOf();else if($===void 0)throw new TypeError("undefined cannot be passed as argument to the database");else return $}var zL=-9223372036854775808n,XL=9223372036854775807n;function $z($,B){try{$.exec(B)}catch(G){throw Bz(G)}}function Bz($){if($ instanceof vB.default.SqliteError)return new U($.message,$.code,$.rawCode,$);return $}var V0;if(typeof WebSocket!=="undefined")V0=WebSocket;else if(typeof global!=="undefined")V0=global.WebSocket;else if(typeof window!=="undefined")V0=window.WebSocket;else if(typeof self!=="undefined")V0=self.WebSocket;class k${constructor(){this.intMode="number"}intMode}class S extends Error{constructor($){super($);this.name="ClientError"}}class N extends S{constructor($){super($);this.name="ProtoError"}}class wB extends S{code;proto;constructor($,B){super($);this.name="ResponseError",this.code=B.code,this.proto=B,this.stack=void 0}}class v extends S{constructor($,B){if(B!==void 0){super(`${$}: ${B}`);this.cause=B}else super($);this.name="ClosedError"}}class LB extends S{constructor($){super($);this.name="WebSocketUnsupportedError"}}class y$ extends S{constructor($){super($);this.name="WebSocketError"}}class K$ extends S{status;constructor($,B){super($);this.status=B,this.name="HttpServerError"}}class V1 extends S{constructor($){super($);this.name="ProtocolVersionError"}}class e extends S{constructor($){super($);this.name="InternalError"}}class O1 extends S{constructor($){super($);this.name="MisuseError"}}function Y1($){if(typeof $==="string")return $;throw P$($,"string")}function Q1($){if($===null||$===void 0)return;else if(typeof $==="string")return $;throw P$($,"string or null")}function e1($){if(typeof $==="number")return $;throw P$($,"number")}function J0($){if(typeof $==="boolean")return $;throw P$($,"boolean")}function QB($){if(Array.isArray($))return $;throw P$($,"array")}function d($){if($!==null&&typeof $==="object"&&!Array.isArray($))return $;throw P$($,"object")}function J1($,B){return QB($).map((G)=>B(d(G)))}function P$($,B){if($===void 0)return new N(`Expected ${B}, but the property was missing`);let G=typeof $;if($===null)G="null";else if(Array.isArray($))G="array";return new N(`Expected ${B}, received ${G}`)}function H$($,B){return B(d($))}class Gz{#$;#B;constructor($){this.#$=$,this.#B=!1}begin(){this.#$.push("{"),this.#B=!0}end(){this.#$.push("}"),this.#B=!1}#G($){if(this.#B)this.#$.push('"'),this.#B=!1;else this.#$.push(',"');this.#$.push($),this.#$.push('":')}string($,B){this.#G($),this.#$.push(JSON.stringify(B))}stringRaw($,B){this.#G($),this.#$.push('"'),this.#$.push(B),this.#$.push('"')}number($,B){this.#G($),this.#$.push(""+B)}boolean($,B){this.#G($),this.#$.push(B?"true":"false")}object($,B,G){this.#G($),this.begin(),G(this,B),this.end()}arrayObjects($,B,G){this.#G($),this.#$.push("[");for(let X=0;X<B.length;++X){if(X!==0)this.#$.push(",");this.begin(),G(this,B[X]),this.end()}this.#$.push("]")}}function KB($,B){let G=[],X=new Gz(G);return X.begin(),B(X,$),X.end(),G.join("")}var T$=0,HB=1,TB=2;var zz=5;class Xz{#$;#B;#G;constructor($){this.#$=$,this.#B=new DataView($.buffer,$.byteOffset,$.byteLength),this.#G=0}varint(){let $=0;for(let B=0;;B+=7){let G=this.#$[this.#G++];if($|=(G&127)<<B,!(G&128))break}return $}varintBig(){let $=0n;for(let B=0n;;B+=7n){let G=this.#$[this.#G++];if($|=BigInt(G&127)<<B,!(G&128))break}return $}bytes($){let B=new Uint8Array(this.#$.buffer,this.#$.byteOffset+this.#G,$);return this.#G+=$,B}double(){let $=this.#B.getFloat64(this.#G,!0);return this.#G+=8,$}skipVarint(){for(;;)if(!(this.#$[this.#G++]&128))break}skip($){this.#G+=$}eof(){return this.#G>=this.#$.byteLength}}class Dz{#$;#B;constructor($){this.#$=$,this.#B=-1}setup($){this.#B=$}#G($){if(this.#B!==$)throw new N(`Expected wire type ${$}, got ${this.#B}`);this.#B=-1}bytes(){this.#G(TB);let $=this.#$.varint();return this.#$.bytes($)}string(){return new TextDecoder().decode(this.bytes())}message($){return A0(this.bytes(),$)}int32(){return this.#G(T$),this.#$.varint()}uint32(){return this.int32()}bool(){return this.int32()!==0}uint64(){return this.#G(T$),this.#$.varintBig()}sint64(){let $=this.uint64();return $>>1n^-($&1n)}double(){return this.#G(HB),this.#$.double()}maybeSkip(){if(this.#B<0)return;else if(this.#B===T$)this.#$.skipVarint();else if(this.#B===HB)this.#$.skip(8);else if(this.#B===TB){let $=this.#$.varint();this.#$.skip($)}else if(this.#B===zz)this.#$.skip(4);else throw new N(`Unexpected wire type ${this.#B}`);this.#B=-1}}function A0($,B){let G=new Xz($),X=new Dz(G),D=B.default();while(!G.eof()){let z=G.varint(),Z=z>>3,W=z&7;X.setup(W);let L=B[Z];if(L!==void 0){let Y=L(X,D);if(Y!==void 0)D=Y}X.maybeSkip()}return D}class L8{#$;#B;#G;#z;constructor(){this.#$=new ArrayBuffer(256),this.#B=new Uint8Array(this.#$),this.#G=new DataView(this.#$),this.#z=0}#D($){if(this.#z+$<=this.#$.byteLength)return;let B=this.#$.byteLength;while(B<this.#z+$)B*=2;let G=new ArrayBuffer(B),X=new Uint8Array(G),D=new DataView(G);X.set(new Uint8Array(this.#$,0,this.#z)),this.#$=G,this.#B=X,this.#G=D}#X($){this.#D(5),$=0|$;do{let B=$&127;$>>>=7,B|=$?128:0,this.#B[this.#z++]=B}while($)}#Z($){this.#D(10),$=$&0xffffffffffffffffn;do{let B=Number($&0x7fn);$>>=7n,B|=$?128:0,this.#B[this.#z++]=B}while($)}#Y($,B){this.#X($<<3|B)}bytes($,B){this.#Y($,TB),this.#X(B.byteLength),this.#D(B.byteLength),this.#B.set(B,this.#z),this.#z+=B.byteLength}string($,B){this.bytes($,new TextEncoder().encode(B))}message($,B,G){let X=new L8;G(X,B),this.bytes($,X.data())}int32($,B){this.#Y($,T$),this.#X(B)}uint32($,B){this.int32($,B)}bool($,B){this.int32($,B?1:0)}sint64($,B){this.#Y($,T$),this.#Z(B<<1n^B>>63n)}double($,B){this.#Y($,HB),this.#D(8),this.#G.setFloat64(this.#z,B,!0),this.#z+=8}data(){return new Uint8Array(this.#$,0,this.#z)}}function EB($,B){let G=new L8;return B(G,$),G.data()}class F0{#$;#B;constructor(){this.#$=new Set,this.#B=new Set}alloc(){for(let B of this.#B){if(this.#B.delete(B),this.#$.add(B),!this.#$.has(this.#$.size-1))this.#B.add(this.#$.size-1);return B}let $=this.#$.size;return this.#$.add($),$}free($){if(!this.#$.delete($))throw new e("Freeing an id that is not allocated");if(this.#B.delete(this.#$.size),$<this.#$.size)this.#B.add($)}}function R($,B){throw new e(B)}function g$($){if($===null)return null;else if(typeof $==="string")return $;else if(typeof $==="number"){if(!Number.isFinite($))throw new RangeError("Only finite numbers (not Infinity or NaN) can be passed as arguments");return $}else if(typeof $==="bigint"){if($<YL||$>ZL)throw new RangeError("This bigint value is too large to be represented as a 64-bit integer and passed as argument");return $}else if(typeof $==="boolean")return $?1n:0n;else if($ instanceof ArrayBuffer)return new Uint8Array($);else if($ instanceof Uint8Array)return $;else if($ instanceof Date)return+$.valueOf();else if(typeof $==="object")return""+$.toString();else throw new TypeError("Unsupported type of value")}var YL=-9223372036854775808n,ZL=9223372036854775807n;function Q8($,B){if($===null)return null;else if(typeof $==="number")return $;else if(typeof $==="string")return $;else if(typeof $==="bigint")if(B==="number"){let G=Number($);if(!Number.isSafeInteger(G))throw new RangeError("Received integer which is too large to be safely represented as a JavaScript number");return G}else if(B==="bigint")return $;else if(B==="string")return""+$;else throw new O1("Invalid value for IntMode");else if($ instanceof Uint8Array)return $.slice().buffer;else if($===void 0)throw new N("Received unrecognized type of Value");else throw R($,"Impossible type of Value")}function E$($){return{affectedRowCount:$.affectedRowCount,lastInsertRowid:$.lastInsertRowid,columnNames:$.cols.map((B)=>B.name),columnDecltypes:$.cols.map((B)=>B.decltype)}}function uB($,B){let G=E$($),X=$.rows.map((D)=>Yz(G.columnNames,D,B));return{...G,rows:X}}function lB($,B){let G=E$($),X;if($.rows.length>0)X=Yz(G.columnNames,$.rows[0],B);return{...G,row:X}}function iB($,B){let G=E$($),X;if($.rows.length>0&&G.columnNames.length>0)X=Q8($.rows[0][0],B);return{...G,value:X}}function Yz($,B,G){let X={};Object.defineProperty(X,"length",{value:B.length});for(let D=0;D<B.length;++D){let z=Q8(B[D],G);Object.defineProperty(X,D,{value:z});let Z=$[D];if(Z!==void 0&&!Object.hasOwn(X,Z))Object.defineProperty(X,Z,{value:z,enumerable:!0,configurable:!0,writable:!0})}return X}function $0($){return new wB($.message,$)}class f${#$;#B;#G;constructor($,B){this.#$=$,this.#B=B,this.#G=void 0}_getSqlId($){if(this.#$!==$)throw new O1("Attempted to use SQL text opened with other object");else if(this.#G!==void 0)throw new v("SQL text is closed",this.#G);return this.#B}close(){this._setClosed(new S("SQL text was manually closed"))}_setClosed($){if(this.#G===void 0)this.#G=$,this.#$._closeSql(this.#B)}get closed(){return this.#G!==void 0}}function fB($,B){if(B instanceof f$)return{sqlId:B._getSqlId($)};else return{sql:""+B}}class M0{#$;#B;constructor(){this.#$=[],this.#B=[]}get length(){return this.#$.length+this.#B.length}push($){this.#$.push($)}shift(){if(this.#B.length===0&&this.#$.length>0)this.#B=this.#$.reverse(),this.#$=[];return this.#B.pop()}first(){return this.#B.length!==0?this.#B[this.#B.length-1]:this.#$[0]}}class c${sql;_args;_namedArgs;constructor($){this.sql=$,this._args=[],this._namedArgs=new Map}bindIndexes($){this._args.length=0;for(let B of $)this._args.push(g$(B));return this}bindIndex($,B){if($!==($|0)||$<=0)throw new RangeError("Index of a positional argument must be positive integer");while(this._args.length<$)this._args.push(null);return this._args[$-1]=g$(B),this}bindName($,B){return this._namedArgs.set($,g$(B)),this}unbindAll(){return this._args.length=0,this._namedArgs.clear(),this}}function _B($,B,G){let X,D=[],z=[];if(B instanceof c$){X=B.sql,D=B._args;for(let[L,Y]of B._namedArgs.entries())z.push({name:L,value:Y})}else if(Array.isArray(B))if(X=B[0],Array.isArray(B[1]))D=B[1].map((L)=>g$(L));else z=Object.entries(B[1]).map(([L,Y])=>{return{name:L,value:g$(Y)}});else X=B;let{sql:Z,sqlId:W}=fB($,X);return{sql:Z,sqlId:W,args:D,namedArgs:z,wantRows:G}}class nB{_stream;#$;_steps;#B;constructor($,B){this._stream=$,this.#$=B,this._steps=[],this.#B=!1}step(){return new K8(this)}execute(){if(this.#B)throw new O1("This batch has already been executed");this.#B=!0;let $={steps:this._steps.map((B)=>B.proto)};if(this.#$)return wL(this._stream,this._steps,$);else return WL(this._stream,this._steps,$)}}function WL($,B,G){return $._batch(G).then((X)=>{for(let D=0;D<B.length;++D){let z=X.stepResults.get(D),Z=X.stepErrors.get(D);B[D].callback(z,Z)}})}async function wL($,B,G){let X=await $._openCursor(G);try{let D=0,z=void 0,Z=[];for(;;){let W=await X.next();if(W===void 0)break;if(W.type==="step_begin"){if(W.step<D||W.step>=B.length)throw new N("Server produced StepBeginEntry for unexpected step");else if(z!==void 0)throw new N("Server produced StepBeginEntry before terminating previous step");for(let L=D;L<W.step;++L)B[L].callback(void 0,void 0);D=W.step+1,z=W,Z=[]}else if(W.type==="step_end"){if(z===void 0)throw new N("Server produced StepEndEntry but no step is active");let L={cols:z.cols,rows:Z,affectedRowCount:W.affectedRowCount,lastInsertRowid:W.lastInsertRowid};B[z.step].callback(L,void 0),z=void 0,Z=[]}else if(W.type==="step_error"){if(z===void 0){if(W.step>=B.length)throw new N("Server produced StepErrorEntry for unexpected step");for(let L=D;L<W.step;++L)B[L].callback(void 0,void 0)}else{if(W.step!==z.step)throw new N("Server produced StepErrorEntry for unexpected step");z=void 0,Z=[]}B[W.step].callback(void 0,W.error),D=W.step+1}else if(W.type==="row"){if(z===void 0)throw new N("Server produced RowEntry but no step is active");Z.push(W.row)}else if(W.type==="error")throw $0(W.error);else if(W.type==="none")throw new N("Server produced unrecognized CursorEntry");else throw R(W,"Impossible CursorEntry")}if(z!==void 0)throw new N("Server closed Cursor before terminating active step");for(let W=D;W<B.length;++W)B[W].callback(void 0,void 0)}finally{X.close()}}class K8{_batch;#$;_index;constructor($){this._batch=$,this.#$=[],this._index=void 0}condition($){return this.#$.push($._proto),this}query($){return this.#B($,!0,uB)}queryRow($){return this.#B($,!0,lB)}queryValue($){return this.#B($,!0,iB)}run($){return this.#B($,!1,E$)}#B($,B,G){if(this._index!==void 0)throw new O1("This BatchStep has already been added to the batch");let X=_B(this._batch._stream._sqlOwner(),$,B),D;if(this.#$.length===0)D=void 0;else if(this.#$.length===1)D=this.#$[0];else D={type:"and",conds:this.#$.slice()};let z={stmt:X,condition:D};return new Promise((Z,W)=>{let L=(Y,w)=>{if(Y!==void 0&&w!==void 0)W(new N("Server returned both result and error"));else if(w!==void 0)W($0(w));else if(Y!==void 0)Z(G(Y,this._batch._stream.intMode));else Z(void 0)};this._index=this._batch._steps.length,this._batch._steps.push({proto:z,callback:L})})}}class j{_batch;_proto;constructor($,B){this._batch=$,this._proto=B}static ok($){return new j($._batch,{type:"ok",step:Zz($)})}static error($){return new j($._batch,{type:"error",step:Zz($)})}static not($){return new j($._batch,{type:"not",cond:$._proto})}static and($,B){for(let G of B)Wz($,G);return new j($,{type:"and",conds:B.map((G)=>G._proto)})}static or($,B){for(let G of B)Wz($,G);return new j($,{type:"or",conds:B.map((G)=>G._proto)})}static isAutocommit($){return $._stream.client()._ensureVersion(3,"BatchCond.isAutocommit()"),new j($,{type:"is_autocommit"})}}function Zz($){if($._index===void 0)throw new O1("Cannot add a condition referencing a step that has not been added to the batch");return $._index}function Wz($,B){if(B._batch!==$)throw new O1("Cannot mix BatchCond objects for different Batch objects")}function wz($){return{paramNames:$.params.map((B)=>B.name),columns:$.cols,isExplain:$.isExplain,isReadonly:$.isReadonly}}class m${constructor($){this.intMode=$}query($){return this.#$($,!0,uB)}queryRow($){return this.#$($,!0,lB)}queryValue($){return this.#$($,!0,iB)}run($){return this.#$($,!1,E$)}#$($,B,G){let X=_B(this._sqlOwner(),$,B);return this._execute(X).then((D)=>G(D,this.intMode))}batch($=!1){return new nB(this,$)}describe($){let B=fB(this._sqlOwner(),$);return this._describe(B).then(wz)}sequence($){let B=fB(this._sqlOwner(),$);return this._sequence(B)}intMode}class CB{}var LL=1000,QL=10;class H8 extends CB{#$;#B;#G;#z;#D;#X;#Z;constructor($,B,G){super();this.#$=$,this.#B=B,this.#G=G,this.#z=new M0,this.#D=new M0,this.#X=void 0,this.#Z=!1}async next(){for(;;){if(this.#X!==void 0)throw new v("Cursor is closed",this.#X);while(!this.#Z&&this.#D.length<QL)this.#D.push(this.#Y());let $=this.#z.shift();if(this.#Z||$!==void 0)return $;await this.#D.shift().then((B)=>{if(B===void 0)return;for(let G of B.entries)this.#z.push(G);this.#Z||=B.done})}}#Y(){return this.#B._sendCursorRequest(this,{type:"fetch_cursor",cursorId:this.#G,maxCount:LL}).then(($)=>$,($)=>{this._setClosed($);return})}_setClosed($){if(this.#X!==void 0)return;this.#X=$,this.#B._sendCursorRequest(this,{type:"close_cursor",cursorId:this.#G}).catch(()=>{return}),this.#B._cursorClosed(this)}close(){this._setClosed(new S("Cursor was manually closed"))}get closed(){return this.#X!==void 0}}class IB extends m${#$;#B;#G;#z;#D;#X;static open($){let B=$._streamIdAlloc.alloc(),G=new IB($,B),X=()=>{return},D=(Z)=>G.#w(Z),z={type:"open_stream",streamId:B};return $._sendRequest(z,{responseCallback:X,errorCallback:D}),G}constructor($,B){super($.intMode);this.#$=$,this.#B=B,this.#G=new M0,this.#z=void 0,this.#D=!1,this.#X=void 0}client(){return this.#$}_sqlOwner(){return this.#$}_execute($){return this.#Z({type:"execute",streamId:this.#B,stmt:$}).then((B)=>{return B.result})}_batch($){return this.#Z({type:"batch",streamId:this.#B,batch:$}).then((B)=>{return B.result})}_describe($){return this.#$._ensureVersion(2,"describe()"),this.#Z({type:"describe",streamId:this.#B,sql:$.sql,sqlId:$.sqlId}).then((B)=>{return B.result})}_sequence($){return this.#$._ensureVersion(2,"sequence()"),this.#Z({type:"sequence",streamId:this.#B,sql:$.sql,sqlId:$.sqlId}).then((B)=>{return})}getAutocommit(){return this.#$._ensureVersion(3,"getAutocommit()"),this.#Z({type:"get_autocommit",streamId:this.#B}).then(($)=>{return $.isAutocommit})}#Z($){return new Promise((B,G)=>{this.#Y({type:"request",request:$,responseCallback:B,errorCallback:G})})}_openCursor($){return this.#$._ensureVersion(3,"cursor"),new Promise((B,G)=>{this.#Y({type:"cursor",batch:$,cursorCallback:B,errorCallback:G})})}_sendCursorRequest($,B){if($!==this.#z)throw new e("Cursor not associated with the stream attempted to execute a request");return new Promise((G,X)=>{if(this.#X!==void 0)X(new v("Stream is closed",this.#X));else this.#$._sendRequest(B,{responseCallback:G,errorCallback:X})})}_cursorClosed($){if($!==this.#z)throw new e("Cursor was closed, but it was not associated with the stream");this.#z=void 0,this.#W()}#Y($){if(this.#X!==void 0)$.errorCallback(new v("Stream is closed",this.#X));else if(this.#D)$.errorCallback(new v("Stream is closing",void 0));else this.#G.push($),this.#W()}#W(){for(;;){let $=this.#G.first();if($===void 0&&this.#z===void 0&&this.#D){this.#w(new S("Stream was gracefully closed"));break}else if($?.type==="request"&&this.#z===void 0){let{request:B,responseCallback:G,errorCallback:X}=$;this.#G.shift(),this.#$._sendRequest(B,{responseCallback:G,errorCallback:X})}else if($?.type==="cursor"&&this.#z===void 0){let{batch:B,cursorCallback:G}=$;this.#G.shift();let X=this.#$._cursorIdAlloc.alloc(),D=new H8(this.#$,this,X),z={type:"open_cursor",streamId:this.#B,cursorId:X,batch:B},Z=()=>{return},W=(L)=>D._setClosed(L);this.#$._sendRequest(z,{responseCallback:Z,errorCallback:W}),this.#z=D,G(D)}else break}}#w($){if(this.#X!==void 0)return;if(this.#X=$,this.#z!==void 0)this.#z._setClosed($);for(;;){let D=this.#G.shift();if(D!==void 0)D.errorCallback($);else break}let B={type:"close_stream",streamId:this.#B},G=()=>this.#$._streamIdAlloc.free(this.#B),X=()=>{return};this.#$._sendRequest(B,{responseCallback:G,errorCallback:X})}close(){this.#w(new S("Stream was manually closed"))}closeGracefully(){this.#D=!0,this.#W()}get closed(){return this.#X!==void 0||this.#D}}function NB($,B){if(B.sql!==void 0)$.string("sql",B.sql);if(B.sqlId!==void 0)$.number("sql_id",B.sqlId);$.arrayObjects("args",B.args,Lz),$.arrayObjects("named_args",B.namedArgs,KL),$.boolean("want_rows",B.wantRows)}function KL($,B){$.string("name",B.name),$.object("value",B.value,Lz)}function j$($,B){$.arrayObjects("steps",B.steps,HL)}function HL($,B){if(B.condition!==void 0)$.object("condition",B.condition,T8);$.object("stmt",B.stmt,NB)}function T8($,B){if($.stringRaw("type",B.type),B.type==="ok"||B.type==="error")$.number("step",B.step);else if(B.type==="not")$.object("cond",B.cond,T8);else if(B.type==="and"||B.type==="or")$.arrayObjects("conds",B.conds,T8);else if(B.type==="is_autocommit");else throw R(B,"Impossible type of BatchCond")}function Lz($,B){if(B===null)$.stringRaw("type","null");else if(typeof B==="bigint")$.stringRaw("type","integer"),$.stringRaw("value",""+B);else if(typeof B==="number")$.stringRaw("type","float"),$.number("value",B);else if(typeof B==="string")$.stringRaw("type","text"),$.string("value",B);else if(B instanceof Uint8Array)$.stringRaw("type","blob"),$.stringRaw("base64",b$.fromUint8Array(B));else if(B===void 0);else throw R(B,"Impossible type of Value")}function Qz($,B){if($.stringRaw("type",B.type),B.type==="hello"){if(B.jwt!==void 0)$.string("jwt",B.jwt)}else if(B.type==="request")$.number("request_id",B.requestId),$.object("request",B.request,TL);else throw R(B,"Impossible type of ClientMsg")}function TL($,B){if($.stringRaw("type",B.type),B.type==="open_stream")$.number("stream_id",B.streamId);else if(B.type==="close_stream")$.number("stream_id",B.streamId);else if(B.type==="execute")$.number("stream_id",B.streamId),$.object("stmt",B.stmt,NB);else if(B.type==="batch")$.number("stream_id",B.streamId),$.object("batch",B.batch,j$);else if(B.type==="open_cursor")$.number("stream_id",B.streamId),$.number("cursor_id",B.cursorId),$.object("batch",B.batch,j$);else if(B.type==="close_cursor")$.number("cursor_id",B.cursorId);else if(B.type==="fetch_cursor")$.number("cursor_id",B.cursorId),$.number("max_count",B.maxCount);else if(B.type==="sequence"){if($.number("stream_id",B.streamId),B.sql!==void 0)$.string("sql",B.sql);if(B.sqlId!==void 0)$.number("sql_id",B.sqlId)}else if(B.type==="describe"){if($.number("stream_id",B.streamId),B.sql!==void 0)$.string("sql",B.sql);if(B.sqlId!==void 0)$.number("sql_id",B.sqlId)}else if(B.type==="store_sql")$.number("sql_id",B.sqlId),$.string("sql",B.sql);else if(B.type==="close_sql")$.number("sql_id",B.sqlId);else if(B.type==="get_autocommit")$.number("stream_id",B.streamId);else throw R(B,"Impossible type of Request")}function UB($,B){if(B.sql!==void 0)$.string(1,B.sql);if(B.sqlId!==void 0)$.int32(2,B.sqlId);for(let G of B.args)$.message(3,G,Hz);for(let G of B.namedArgs)$.message(4,G,EL);$.bool(5,B.wantRows)}function EL($,B){$.string(1,B.name),$.message(2,B.value,Hz)}function x$($,B){for(let G of B.steps)$.message(1,G,fL)}function fL($,B){if(B.condition!==void 0)$.message(1,B.condition,E8);$.message(2,B.stmt,UB)}function E8($,B){if(B.type==="ok")$.uint32(1,B.step);else if(B.type==="error")$.uint32(2,B.step);else if(B.type==="not")$.message(3,B.cond,E8);else if(B.type==="and")$.message(4,B.conds,Kz);else if(B.type==="or")$.message(5,B.conds,Kz);else if(B.type==="is_autocommit")$.message(6,void 0,Tz);else throw R(B,"Impossible type of BatchCond")}function Kz($,B){for(let G of B)$.message(1,G,E8)}function Hz($,B){if(B===null)$.message(1,void 0,Tz);else if(typeof B==="bigint")$.sint64(2,B);else if(typeof B==="number")$.double(3,B);else if(typeof B==="string")$.string(4,B);else if(B instanceof Uint8Array)$.bytes(5,B);else if(B===void 0);else throw R(B,"Impossible type of Value")}function Tz($,B){}function Ez($,B){if(B.type==="hello")$.message(1,B,CL);else if(B.type==="request")$.message(2,B,IL);else throw R(B,"Impossible type of ClientMsg")}function CL($,B){if(B.jwt!==void 0)$.string(1,B.jwt)}function IL($,B){$.int32(1,B.requestId);let G=B.request;if(G.type==="open_stream")$.message(2,G,NL);else if(G.type==="close_stream")$.message(3,G,UL);else if(G.type==="execute")$.message(4,G,hL);else if(G.type==="batch")$.message(5,G,VL);else if(G.type==="open_cursor")$.message(6,G,JL);else if(G.type==="close_cursor")$.message(7,G,AL);else if(G.type==="fetch_cursor")$.message(8,G,FL);else if(G.type==="sequence")$.message(9,G,ML);else if(G.type==="describe")$.message(10,G,RL);else if(G.type==="store_sql")$.message(11,G,OL);else if(G.type==="close_sql")$.message(12,G,SL);else if(G.type==="get_autocommit")$.message(13,G,bL);else throw R(G,"Impossible type of Request")}function NL($,B){$.int32(1,B.streamId)}function UL($,B){$.int32(1,B.streamId)}function hL($,B){$.int32(1,B.streamId),$.message(2,B.stmt,UB)}function VL($,B){$.int32(1,B.streamId),$.message(2,B.batch,x$)}function JL($,B){$.int32(1,B.streamId),$.int32(2,B.cursorId),$.message(3,B.batch,x$)}function AL($,B){$.int32(1,B.cursorId)}function FL($,B){$.int32(1,B.cursorId),$.uint32(2,B.maxCount)}function ML($,B){if($.int32(1,B.streamId),B.sql!==void 0)$.string(2,B.sql);if(B.sqlId!==void 0)$.int32(3,B.sqlId)}function RL($,B){if($.int32(1,B.streamId),B.sql!==void 0)$.string(2,B.sql);if(B.sqlId!==void 0)$.int32(3,B.sqlId)}function OL($,B){$.int32(1,B.sqlId),$.string(2,B.sql)}function SL($,B){$.int32(1,B.sqlId)}function bL($,B){$.int32(1,B.streamId)}function R0($){let B=Y1($.message),G=Q1($.code);return{message:B,code:G}}function hB($){let B=J1($.cols,fz),G=QB($.rows).map((Z)=>J1(Z,Cz)),X=e1($.affected_row_count),D=Q1($.last_insert_rowid),z=D!==void 0?BigInt(D):void 0;return{cols:B,rows:G,affectedRowCount:X,lastInsertRowid:z}}function fz($){let B=Q1($.name),G=Q1($.decltype);return{name:B,decltype:G}}function aB($){let B=new Map;QB($.step_results).forEach((X,D)=>{if(X!==null)B.set(D,hB(d(X)))});let G=new Map;return QB($.step_errors).forEach((X,D)=>{if(X!==null)G.set(D,R0(d(X)))}),{stepResults:B,stepErrors:G}}function tB($){let B=Y1($.type);if(B==="step_begin"){let G=e1($.step),X=J1($.cols,fz);return{type:"step_begin",step:G,cols:X}}else if(B==="step_end"){let G=e1($.affected_row_count),X=Q1($.last_insert_rowid),D=X!==void 0?BigInt(X):void 0;return{type:"step_end",affectedRowCount:G,lastInsertRowid:D}}else if(B==="step_error"){let G=e1($.step),X=R0(d($.error));return{type:"step_error",step:G,error:X}}else if(B==="row")return{type:"row",row:J1($.row,Cz)};else if(B==="error")return{type:"error",error:R0(d($.error))};else throw new N("Unexpected type of CursorEntry")}function pB($){let B=J1($.params,qL),G=J1($.cols,kL),X=J0($.is_explain),D=J0($.is_readonly);return{params:B,cols:G,isExplain:X,isReadonly:D}}function qL($){return{name:Q1($.name)}}function kL($){let B=Y1($.name),G=Q1($.decltype);return{name:B,decltype:G}}function Cz($){let B=Y1($.type);if(B==="null")return null;else if(B==="integer"){let G=Y1($.value);return BigInt(G)}else if(B==="float")return e1($.value);else if(B==="text")return Y1($.value);else if(B==="blob")return b$.toUint8Array(Y1($.base64));else throw new N("Unexpected type of Value")}function Iz($){let B=Y1($.type);if(B==="hello_ok")return{type:"hello_ok"};else if(B==="hello_error")return{type:"hello_error",error:R0(d($.error))};else if(B==="response_ok"){let G=e1($.request_id),X=yL(d($.response));return{type:"response_ok",requestId:G,response:X}}else if(B==="response_error"){let G=e1($.request_id),X=R0(d($.error));return{type:"response_error",requestId:G,error:X}}else throw new N("Unexpected type of ServerMsg")}function yL($){let B=Y1($.type);if(B==="open_stream")return{type:"open_stream"};else if(B==="close_stream")return{type:"close_stream"};else if(B==="execute")return{type:"execute",result:hB(d($.result))};else if(B==="batch")return{type:"batch",result:aB(d($.result))};else if(B==="open_cursor")return{type:"open_cursor"};else if(B==="close_cursor")return{type:"close_cursor"};else if(B==="fetch_cursor"){let G=J1($.entries,tB),X=J0($.done);return{type:"fetch_cursor",entries:G,done:X}}else if(B==="sequence")return{type:"sequence"};else if(B==="describe")return{type:"describe",result:pB(d($.result))};else if(B==="store_sql")return{type:"store_sql"};else if(B==="close_sql")return{type:"close_sql"};else if(B==="get_autocommit")return{type:"get_autocommit",isAutocommit:J0($.is_autocommit)};else throw new N("Unexpected type of Response")}var E1={default(){return{message:"",code:void 0}},1($,B){B.message=$.string()},2($,B){B.code=$.string()}},O0={default(){return{cols:[],rows:[],affectedRowCount:0,lastInsertRowid:void 0}},1($,B){B.cols.push($.message(Nz))},2($,B){B.rows.push($.message(Uz))},3($,B){B.affectedRowCount=Number($.uint64())},4($,B){B.lastInsertRowid=$.sint64()}},Nz={default(){return{name:void 0,decltype:void 0}},1($,B){B.name=$.string()},2($,B){B.decltype=$.string()}},Uz={default(){return[]},1($,B){B.push($.message(dL))}},v$={default(){return{stepResults:new Map,stepErrors:new Map}},1($,B){let[G,X]=$.message(PL);B.stepResults.set(G,X)},2($,B){let[G,X]=$.message(gL);B.stepErrors.set(G,X)}},PL={default(){return[0,O0.default()]},1($,B){B[0]=$.uint32()},2($,B){B[1]=$.message(O0)}},gL={default(){return[0,E1.default()]},1($,B){B[0]=$.uint32()},2($,B){B[1]=$.message(E1)}},sB={default(){return{type:"none"}},1($){return $.message(cL)},2($){return $.message(mL)},3($){return $.message(jL)},4($){return{type:"row",row:$.message(Uz)}},5($){return{type:"error",error:$.message(E1)}}},cL={default(){return{type:"step_begin",step:0,cols:[]}},1($,B){B.step=$.uint32()},2($,B){B.cols.push($.message(Nz))}},mL={default(){return{type:"step_end",affectedRowCount:0,lastInsertRowid:void 0}},1($,B){B.affectedRowCount=$.uint32()},2($,B){B.lastInsertRowid=$.uint64()}},jL={default(){return{type:"step_error",step:0,error:E1.default()}},1($,B){B.step=$.uint32()},2($,B){B.error=$.message(E1)}},d$={default(){return{params:[],cols:[],isExplain:!1,isReadonly:!1}},1($,B){B.params.push($.message(xL))},2($,B){B.cols.push($.message(vL))},3($,B){B.isExplain=$.bool()},4($,B){B.isReadonly=$.bool()}},xL={default(){return{name:void 0}},1($,B){B.name=$.string()}},vL={default(){return{name:"",decltype:void 0}},1($,B){B.name=$.string()},2($,B){B.decltype=$.string()}},dL={default(){return},1($){return null},2($){return $.sint64()},3($){return $.double()},4($){return $.string()},5($){return $.bytes()}};var hz={default(){return{type:"none"}},1($){return{type:"hello_ok"}},2($){return $.message(uL)},3($){return $.message(iL)},4($){return $.message(lL)}},uL={default(){return{type:"hello_error",error:E1.default()}},1($,B){B.error=$.message(E1)}},lL={default(){return{type:"response_error",requestId:0,error:E1.default()}},1($,B){B.requestId=$.int32()},2($,B){B.error=$.message(E1)}},iL={default(){return{type:"response_ok",requestId:0,response:{type:"none"}}},1($,B){B.requestId=$.int32()},2($,B){B.response={type:"open_stream"}},3($,B){B.response={type:"close_stream"}},4($,B){B.response=$.message(_L)},5($,B){B.response=$.message(nL)},6($,B){B.response={type:"open_cursor"}},7($,B){B.response={type:"close_cursor"}},8($,B){B.response=$.message(aL)},9($,B){B.response={type:"sequence"}},10($,B){B.response=$.message(tL)},11($,B){B.response={type:"store_sql"}},12($,B){B.response={type:"close_sql"}},13($,B){B.response=$.message(pL)}},_L={default(){return{type:"execute",result:O0.default()}},1($,B){B.result=$.message(O0)}},nL={default(){return{type:"batch",result:v$.default()}},1($,B){B.result=$.message(v$)}},aL={default(){return{type:"fetch_cursor",entries:[],done:!1}},1($,B){B.entries.push($.message(sB))},2($,B){B.done=$.bool()}},tL={default(){return{type:"describe",result:d$.default()}},1($,B){B.result=$.message(d$)}},pL={default(){return{type:"get_autocommit",isAutocommit:!1}},1($,B){B.isAutocommit=$.bool()}};var Vz=new Map([["hrana2",{version:2,encoding:"json"}],["hrana1",{version:1,encoding:"json"}]]),f8=new Map([["hrana3-protobuf",{version:3,encoding:"protobuf"}],["hrana3",{version:3,encoding:"json"}],["hrana2",{version:2,encoding:"json"}],["hrana1",{version:1,encoding:"json"}]]);class rB extends k${#$;#B;#G;#z;#D;#X;#Z;#Y;#W;_streamIdAlloc;_cursorIdAlloc;#w;constructor($,B){super();this.#$=$,this.#B=[],this.#G=!1,this.#z=void 0,this.#D=!1,this.#X=void 0,this.#Z=!1,this.#Y=new Map,this.#W=new F0,this._streamIdAlloc=new F0,this._cursorIdAlloc=new F0,this.#w=new F0,this.#$.binaryType="arraybuffer",this.#$.addEventListener("open",()=>this.#T()),this.#$.addEventListener("close",(G)=>this.#H(G)),this.#$.addEventListener("error",(G)=>this.#E(G)),this.#$.addEventListener("message",(G)=>this.#C(G)),this.#Q({type:"hello",jwt:B})}#Q($){if(this.#z!==void 0)throw new e("Trying to send a message on a closed client");if(this.#G)this.#K($);else{let B=()=>this.#K($),G=()=>{return};this.#B.push({openCallback:B,errorCallback:G})}}#T(){let $=this.#$.protocol;if($===void 0){this.#L(new S("The `WebSocket.protocol` property is undefined. This most likely means that the WebSocket implementation provided by the environment is broken. If you are using Miniflare 2, please update to Miniflare 3, which fixes this problem."));return}else if($==="")this.#X={version:1,encoding:"json"};else if(this.#X=f8.get($),this.#X===void 0){this.#L(new N(`Unrecognized WebSocket subprotocol: ${JSON.stringify($)}`));return}for(let B of this.#B)B.openCallback();this.#B.length=0,this.#G=!0}#K($){let B=this.#X.encoding;if(B==="json"){let G=KB($,Qz);this.#$.send(G)}else if(B==="protobuf"){let G=EB($,Ez);this.#$.send(G)}else throw R(B,"Impossible encoding")}getVersion(){return new Promise(($,B)=>{if(this.#Z=!0,this.#z!==void 0)B(this.#z);else if(!this.#G){let G=()=>$(this.#X.version);this.#B.push({openCallback:G,errorCallback:B})}else $(this.#X.version)})}_ensureVersion($,B){if(this.#X===void 0||!this.#Z)throw new V1(`${B} is supported only on protocol version ${$} and higher, but the version supported by the WebSocket server is not yet known. Use Client.getVersion() to wait until the version is available.`);else if(this.#X.version<$)throw new V1(`${B} is supported on protocol version ${$} and higher, but the WebSocket server only supports version ${this.#X.version}`)}_sendRequest($,B){if(this.#z!==void 0){B.errorCallback(new v("Client is closed",this.#z));return}let G=this.#W.alloc();this.#Y.set(G,{...B,type:$.type}),this.#Q({type:"request",requestId:G,request:$})}#E($){let G=$.message??"WebSocket was closed due to an error";this.#L(new y$(G))}#H($){let B=`WebSocket was closed with code ${$.code}`;if($.reason)B+=`: ${$.reason}`;this.#L(new y$(B))}#L($){if(this.#z!==void 0)return;this.#z=$;for(let B of this.#B)B.errorCallback($);this.#B.length=0;for(let[B,G]of this.#Y.entries())G.errorCallback($),this.#W.free(B);this.#Y.clear(),this.#$.close()}#C($){if(this.#z!==void 0)return;try{let B,G=this.#X.encoding;if(G==="json"){if(typeof $.data!=="string"){this.#$.close(3003,"Only text messages are accepted with JSON encoding"),this.#L(new N("Received non-text message from server with JSON encoding"));return}B=H$(JSON.parse($.data),Iz)}else if(G==="protobuf"){if(!($.data instanceof ArrayBuffer)){this.#$.close(3003,"Only binary messages are accepted with Protobuf encoding"),this.#L(new N("Received non-binary message from server with Protobuf encoding"));return}B=A0(new Uint8Array($.data),hz)}else throw R(G,"Impossible encoding");this.#f(B)}catch(B){this.#$.close(3007,"Could not handle message"),this.#L(B)}}#f($){if($.type==="none")throw new N("Received an unrecognized ServerMsg");else if($.type==="hello_ok"||$.type==="hello_error"){if(this.#D)throw new N("Received a duplicated hello response");if(this.#D=!0,$.type==="hello_error")throw $0($.error);return}else if(!this.#D)throw new N("Received a non-hello message before a hello response");if($.type==="response_ok"){let B=$.requestId,G=this.#Y.get(B);if(this.#Y.delete(B),G===void 0)throw new N("Received unexpected OK response");this.#W.free(B);try{if(G.type!==$.response.type)throw console.dir({responseState:G,msg:$}),new N("Received unexpected type of response");G.responseCallback($.response)}catch(X){throw G.errorCallback(X),X}}else if($.type==="response_error"){let B=$.requestId,G=this.#Y.get(B);if(this.#Y.delete(B),G===void 0)throw new N("Received unexpected error response");this.#W.free(B),G.errorCallback($0($.error))}else throw R($,"Impossible ServerMsg type")}openStream(){return IB.open(this)}storeSql($){this._ensureVersion(2,"storeSql()");let B=this.#w.alloc(),G=new f$(this,B),X=()=>{return},D=(Z)=>G._setClosed(Z),z={type:"store_sql",sqlId:B,sql:$};return this._sendRequest(z,{responseCallback:X,errorCallback:D}),G}_closeSql($){if(this.#z!==void 0)return;let B=()=>this.#w.free($),G=(D)=>this.#L(D),X={type:"close_sql",sqlId:$};this._sendRequest(X,{responseCallback:B,errorCallback:G})}close(){this.#L(new S("Client was manually closed"))}get closed(){return this.#z!==void 0}}var C8=fetch,VB=Request,I8=Headers;var C$;if(typeof queueMicrotask!=="undefined")C$=queueMicrotask;else{let $=Promise.resolve();C$=(B)=>{$.then(B)}}class N8{#$;#B;#G;constructor($){this.#$=new Uint8Array(new ArrayBuffer($)),this.#B=0,this.#G=0}get length(){return this.#G-this.#B}data(){return this.#$.slice(this.#B,this.#G)}push($){this.#z($.byteLength),this.#$.set($,this.#G),this.#G+=$.byteLength}#z($){if(this.#G+$<=this.#$.byteLength)return;let B=this.#G-this.#B;if(B+$<=this.#$.byteLength&&2*this.#G>=this.#$.byteLength)this.#$.copyWithin(0,this.#B,this.#G);else{let G=this.#$.byteLength;do G*=2;while(B+$>G);let X=new Uint8Array(new ArrayBuffer(G));X.set(this.#$.slice(this.#B,this.#G),0),this.#$=X}this.#G=B,this.#B=0}shift($){this.#B+=$}}function Jz($){let B=Q1($.baton),G=Q1($.base_url),X=J1($.results,sL);return{baton:B,baseUrl:G,results:X}}function sL($){let B=Y1($.type);if(B==="ok")return{type:"ok",response:rL(d($.response))};else if(B==="error")return{type:"error",error:R0(d($.error))};else throw new N("Unexpected type of StreamResult")}function rL($){let B=Y1($.type);if(B==="close")return{type:"close"};else if(B==="execute")return{type:"execute",result:hB(d($.result))};else if(B==="batch")return{type:"batch",result:aB(d($.result))};else if(B==="sequence")return{type:"sequence"};else if(B==="describe")return{type:"describe",result:pB(d($.result))};else if(B==="store_sql")return{type:"store_sql"};else if(B==="close_sql")return{type:"close_sql"};else if(B==="get_autocommit")return{type:"get_autocommit",isAutocommit:J0($.is_autocommit)};else throw new N("Unexpected type of StreamResponse")}function Az($){let B=Q1($.baton),G=Q1($.base_url);return{baton:B,baseUrl:G}}var Fz={default(){return{baton:void 0,baseUrl:void 0,results:[]}},1($,B){B.baton=$.string()},2($,B){B.baseUrl=$.string()},3($,B){B.results.push($.message(oL))}},oL={default(){return{type:"none"}},1($){return{type:"ok",response:$.message(eL)}},2($){return{type:"error",error:$.message(E1)}}},eL={default(){return{type:"none"}},1($){return{type:"close"}},2($){return $.message($Q)},3($){return $.message(BQ)},4($){return{type:"sequence"}},5($){return $.message(GQ)},6($){return{type:"store_sql"}},7($){return{type:"close_sql"}},8($){return $.message(zQ)}},$Q={default(){return{type:"execute",result:O0.default()}},1($,B){B.result=$.message(O0)}},BQ={default(){return{type:"batch",result:v$.default()}},1($,B){B.result=$.message(v$)}},GQ={default(){return{type:"describe",result:d$.default()}},1($,B){B.result=$.message(d$)}},zQ={default(){return{type:"get_autocommit",isAutocommit:!1}},1($,B){B.isAutocommit=$.bool()}},Mz={default(){return{baton:void 0,baseUrl:void 0}},1($,B){B.baton=$.string()},2($,B){B.baseUrl=$.string()}};class U8 extends CB{#$;#B;#G;#z;#D;#X;constructor($,B){super();this.#$=$,this.#B=B,this.#G=void 0,this.#z=new N8(16384),this.#D=void 0,this.#X=!1}async open($){if($.body===null)throw new N("No response body for cursor request");this.#G=$.body.getReader();let B=await this.#Z(Az,Mz);if(B===void 0)throw new N("Empty response to cursor request");return B}next(){return this.#Z(tB,sB)}close(){this._setClosed(new S("Cursor was manually closed"))}_setClosed($){if(this.#D!==void 0)return;if(this.#D=$,this.#$._cursorClosed(this),this.#G!==void 0)this.#G.cancel()}get closed(){return this.#D!==void 0}async#Z($,B){for(;;){if(this.#X)return;else if(this.#D!==void 0)throw new v("Cursor is closed",this.#D);if(this.#B==="json"){let D=this.#Y();if(D!==void 0){let z=new TextDecoder().decode(D),Z=JSON.parse(z);return H$(Z,$)}}else if(this.#B==="protobuf"){let D=this.#W();if(D!==void 0)return A0(D,B)}else throw R(this.#B,"Impossible encoding");if(this.#G===void 0)throw new e("Attempted to read from HTTP cursor before it was opened");let{value:G,done:X}=await this.#G.read();if(X&&this.#z.length===0)this.#X=!0;else if(X)throw new N("Unexpected end of cursor stream");else this.#z.push(G)}}#Y(){let $=this.#z.data(),B=10,G=$.indexOf(10);if(G<0)return;let X=$.slice(0,G);return this.#z.shift(G+1),X}#W(){let $=this.#z.data(),B=0,G=0;for(;;){if(G>=$.byteLength)return;let D=$[G];if(B|=(D&127)<<7*G,G+=1,!(D&128))break}if($.byteLength<G+B)return;let X=$.slice(G,G+B);return this.#z.shift(G+B),X}}function Rz($,B){if(B.baton!==void 0)$.string("baton",B.baton);$.arrayObjects("requests",B.requests,XQ)}function XQ($,B){if($.stringRaw("type",B.type),B.type==="close");else if(B.type==="execute")$.object("stmt",B.stmt,NB);else if(B.type==="batch")$.object("batch",B.batch,j$);else if(B.type==="sequence"){if(B.sql!==void 0)$.string("sql",B.sql);if(B.sqlId!==void 0)$.number("sql_id",B.sqlId)}else if(B.type==="describe"){if(B.sql!==void 0)$.string("sql",B.sql);if(B.sqlId!==void 0)$.number("sql_id",B.sqlId)}else if(B.type==="store_sql")$.number("sql_id",B.sqlId),$.string("sql",B.sql);else if(B.type==="close_sql")$.number("sql_id",B.sqlId);else if(B.type==="get_autocommit");else throw R(B,"Impossible type of StreamRequest")}function Oz($,B){if(B.baton!==void 0)$.string("baton",B.baton);$.object("batch",B.batch,j$)}function Sz($,B){if(B.baton!==void 0)$.string(1,B.baton);for(let G of B.requests)$.message(2,G,DQ)}function DQ($,B){if(B.type==="close")$.message(1,B,YQ);else if(B.type==="execute")$.message(2,B,ZQ);else if(B.type==="batch")$.message(3,B,WQ);else if(B.type==="sequence")$.message(4,B,wQ);else if(B.type==="describe")$.message(5,B,LQ);else if(B.type==="store_sql")$.message(6,B,QQ);else if(B.type==="close_sql")$.message(7,B,KQ);else if(B.type==="get_autocommit")$.message(8,B,HQ);else throw R(B,"Impossible type of StreamRequest")}function YQ($,B){}function ZQ($,B){$.message(1,B.stmt,UB)}function WQ($,B){$.message(1,B.batch,x$)}function wQ($,B){if(B.sql!==void 0)$.string(1,B.sql);if(B.sqlId!==void 0)$.int32(2,B.sqlId)}function LQ($,B){if(B.sql!==void 0)$.string(1,B.sql);if(B.sqlId!==void 0)$.int32(2,B.sqlId)}function QQ($,B){$.int32(1,B.sqlId),$.string(2,B.sql)}function KQ($,B){$.int32(1,B.sqlId)}function HQ($,B){}function bz($,B){if(B.baton!==void 0)$.string(1,B.baton);$.message(2,B.batch,x$)}class oB extends m${#$;#B;#G;#z;#D;#X;#Z;#Y;#W;#w;#Q;#T;constructor($,B,G,X){super($.intMode);this.#$=$,this.#B=B.toString(),this.#G=G,this.#z=X,this.#D=void 0,this.#X=new M0,this.#Z=!1,this.#W=!1,this.#w=!1,this.#Q=void 0,this.#T=new F0}client(){return this.#$}_sqlOwner(){return this}storeSql($){let B=this.#T.alloc();return this.#K({type:"store_sql",sqlId:B,sql:$}).then(()=>{return},(G)=>this._setClosed(G)),new f$(this,B)}_closeSql($){if(this.#Q!==void 0)return;this.#K({type:"close_sql",sqlId:$}).then(()=>this.#T.free($),(B)=>this._setClosed(B))}_execute($){return this.#K({type:"execute",stmt:$}).then((B)=>{return B.result})}_batch($){return this.#K({type:"batch",batch:$}).then((B)=>{return B.result})}_describe($){return this.#K({type:"describe",sql:$.sql,sqlId:$.sqlId}).then((B)=>{return B.result})}_sequence($){return this.#K({type:"sequence",sql:$.sql,sqlId:$.sqlId}).then((B)=>{return})}getAutocommit(){return this.#$._ensureVersion(3,"getAutocommit()"),this.#K({type:"get_autocommit"}).then(($)=>{return $.isAutocommit})}#K($){return new Promise((B,G)=>{this.#E({type:"pipeline",request:$,responseCallback:B,errorCallback:G})})}_openCursor($){return new Promise((B,G)=>{this.#E({type:"cursor",batch:$,cursorCallback:B,errorCallback:G})})}_cursorClosed($){if($!==this.#Y)throw new e("Cursor was closed, but it was not associated with the stream");this.#Y=void 0,C$(()=>this.#H())}close(){this._setClosed(new S("Stream was manually closed"))}closeGracefully(){this.#W=!0,C$(()=>this.#H())}get closed(){return this.#Q!==void 0||this.#W}_setClosed($){if(this.#Q!==void 0)return;if(this.#Q=$,this.#Y!==void 0)this.#Y._setClosed($);this.#$._streamClosed(this);for(;;){let B=this.#X.shift();if(B!==void 0)B.errorCallback($);else break}if((this.#D!==void 0||this.#Z)&&!this.#w)this.#X.push({type:"pipeline",request:{type:"close"},responseCallback:()=>{return},errorCallback:()=>{return}}),this.#w=!0,C$(()=>this.#H())}#E($){if(this.#Q!==void 0)throw new v("Stream is closed",this.#Q);else if(this.#W)throw new v("Stream is closing",void 0);else this.#X.push($),C$(()=>this.#H())}#H(){if(this.#Z||this.#Y!==void 0)return;if(this.#W&&this.#X.length===0){this._setClosed(new S("Stream was gracefully closed"));return}let $=this.#$._endpoint;if($===void 0){this.#$._endpointPromise.then(()=>this.#H(),(G)=>this._setClosed(G));return}let B=this.#X.shift();if(B===void 0)return;else if(B.type==="pipeline"){let G=[B];for(;;){let X=this.#X.first();if(X!==void 0&&X.type==="pipeline")G.push(X),this.#X.shift();else if(X===void 0&&this.#W&&!this.#w){G.push({type:"pipeline",request:{type:"close"},responseCallback:()=>{return},errorCallback:()=>{return}}),this.#w=!0;break}else break}this.#L($,G)}else if(B.type==="cursor")this.#C($,B);else throw R(B,"Impossible type of QueueEntry")}#L($,B){this.#f(()=>this.#N(B,$),(G)=>EQ(G,$.encoding),(G)=>G.baton,(G)=>G.baseUrl,(G)=>TQ(B,G),(G)=>B.forEach((X)=>X.errorCallback(G)))}#C($,B){let G=new U8(this,$.encoding);this.#Y=G,this.#f(()=>this.#U(B,$),(X)=>G.open(X),(X)=>X.baton,(X)=>X.baseUrl,(X)=>B.cursorCallback(G),(X)=>B.errorCallback(X))}#f($,B,G,X,D,z){let Z;try{let W=$(),L=this.#z;Z=L(W)}catch(W){Z=Promise.reject(W)}this.#Z=!0,Z.then((W)=>{if(!W.ok)return fQ(W).then((L)=>{throw L});return B(W)}).then((W)=>{this.#D=G(W),this.#B=X(W)??this.#B,D(W)}).catch((W)=>{this._setClosed(W),z(W)}).finally(()=>{this.#Z=!1,this.#H()})}#N($,B){return this.#I(new URL(B.pipelinePath,this.#B),{baton:this.#D,requests:$.map((G)=>G.request)},B.encoding,Rz,Sz)}#U($,B){if(B.cursorPath===void 0)throw new V1(`Cursors are supported only on protocol version 3 and higher, but the HTTP server only supports version ${B.version}.`);return this.#I(new URL(B.cursorPath,this.#B),{baton:this.#D,batch:$.batch},B.encoding,Oz,bz)}#I($,B,G,X,D){let z,Z;if(G==="json")z=KB(B,X),Z="application/json";else if(G==="protobuf")z=EB(B,D),Z="application/x-protobuf";else throw R(G,"Impossible encoding");let W=new I8;if(W.set("content-type",Z),this.#G!==void 0)W.set("authorization",`Bearer ${this.#G}`);return new VB($.toString(),{method:"POST",headers:W,body:z})}}function TQ($,B){if(B.results.length!==$.length)throw new N("Server returned unexpected number of pipeline results");for(let G=0;G<$.length;++G){let X=B.results[G],D=$[G];if(X.type==="ok"){if(X.response.type!==D.request.type)throw new N("Received unexpected type of response");D.responseCallback(X.response)}else if(X.type==="error")D.errorCallback($0(X.error));else if(X.type==="none")throw new N("Received unrecognized type of StreamResult");else throw R(X,"Received impossible type of StreamResult")}}async function EQ($,B){if(B==="json"){let G=await $.json();return H$(G,Jz)}if(B==="protobuf"){let G=await $.arrayBuffer();return A0(new Uint8Array(G),Fz)}throw await $.body?.cancel(),R(B,"Impossible encoding")}async function fQ($){let B=$.headers.get("content-type")??"text/plain",G=`Server returned HTTP status ${$.status}`;if(B==="application/json"){let X=await $.json();if("message"in X)return $0(X);return new K$(G,$.status)}if(B==="text/plain"){let X=(await $.text()).trim();if(X!=="")G+=`: ${X}`;return new K$(G,$.status)}return await $.body?.cancel(),new K$(G,$.status)}var CQ=[{versionPath:"v3-protobuf",pipelinePath:"v3-protobuf/pipeline",cursorPath:"v3-protobuf/cursor",version:3,encoding:"protobuf"}],h8={versionPath:"v2",pipelinePath:"v2/pipeline",cursorPath:void 0,version:2,encoding:"json"};class eB extends k${#$;#B;#G;#z;#D;_endpointPromise;_endpoint;constructor($,B,G,X=2){super();if(this.#$=$,this.#B=B,this.#G=G??C8,this.#z=void 0,this.#D=new Set,X==3)this._endpointPromise=IQ(this.#G,this.#$),this._endpointPromise.then((D)=>this._endpoint=D,(D)=>this.#X(D));else this._endpointPromise=Promise.resolve(h8),this._endpointPromise.then((D)=>this._endpoint=D,(D)=>this.#X(D))}async getVersion(){if(this._endpoint!==void 0)return this._endpoint.version;return(await this._endpointPromise).version}_ensureVersion($,B){if($<=h8.version)return;else if(this._endpoint===void 0)throw new V1(`${B} is supported only on protocol version ${$} and higher, but the version supported by the HTTP server is not yet known. Use Client.getVersion() to wait until the version is available.`);else if(this._endpoint.version<$)throw new V1(`${B} is supported only on protocol version ${$} and higher, but the HTTP server only supports version ${this._endpoint.version}.`)}openStream(){if(this.#z!==void 0)throw new v("Client is closed",this.#z);let $=new oB(this,this.#$,this.#B,this.#G);return this.#D.add($),$}_streamClosed($){this.#D.delete($)}close(){this.#X(new S("Client was manually closed"))}get closed(){return this.#z!==void 0}#X($){if(this.#z!==void 0)return;this.#z=$;for(let B of Array.from(this.#D))B._setClosed(new v("Client was closed",$))}}async function IQ($,B){let G=$;for(let X of CQ){let D=new URL(X.versionPath,B),z=new VB(D.toString(),{method:"GET"}),Z=await G(z);if(await Z.arrayBuffer(),Z.ok)return X}return h8}function V8($,B,G=2){if(typeof V0==="undefined")throw new LB("WebSockets are not supported in this environment");var X=void 0;if(G==3)X=Array.from(f8.keys());else X=Array.from(Vz.keys());let D=new V0($,X);return new rB(D,B)}function qz($,B,G,X=2){return new eB($ instanceof URL?$:new URL($),B,G,X)}class JB{#$;#B;#G;constructor($,B){this.#$=$,this.#B=B,this.#G=void 0}execute($){return this.batch([$]).then((B)=>B[0])}async batch($){let B=this._getStream();if(B.closed)throw new U("Cannot execute statements because the transaction is closed","TRANSACTION_CLOSED");try{let G=$.map(B0),X;if(this.#G===void 0){this._getSqlCache().apply(G);let z=B.batch(this.#B>=3),Z=z.step(),W=Z.run(h0(this.#$)),L=Z;X=G.map((Y)=>{let w=z.step().condition(j.ok(L));if(this.#B>=3)w.condition(j.not(j.isAutocommit(z)));let Q=w.query(Y);return Q.catch(()=>{return}),L=w,Q}),this.#G=z.execute().then(()=>W).then(()=>{return});try{await this.#G}catch(Y){throw this.close(),Y}}else{if(this.#B<3)await this.#G;this._getSqlCache().apply(G);let z=B.batch(this.#B>=3),Z=void 0;X=G.map((W)=>{let L=z.step();if(Z!==void 0)L.condition(j.ok(Z));if(this.#B>=3)L.condition(j.not(j.isAutocommit(z)));let Y=L.query(W);return Y.catch(()=>{return}),Z=L,Y}),await z.execute()}let D=[];for(let z of X){let Z=await z;if(Z===void 0)throw new U("Statement in a transaction was not executed, probably because the transaction has been rolled back","TRANSACTION_CLOSED");D.push(l$(Z))}return D}catch(G){throw x(G)}}async executeMultiple($){let B=this._getStream();if(B.closed)throw new U("Cannot execute statements because the transaction is closed","TRANSACTION_CLOSED");try{if(this.#G===void 0){this.#G=B.run(h0(this.#$)).then(()=>{return});try{await this.#G}catch(G){throw this.close(),G}}else await this.#G;await B.sequence($)}catch(G){throw x(G)}}async rollback(){try{let $=this._getStream();if($.closed)return;if(this.#G!==void 0);else return;let B=$.run("ROLLBACK").catch((G)=>{throw x(G)});$.closeGracefully(),await B}catch($){throw x($)}finally{this.close()}}async commit(){try{let $=this._getStream();if($.closed)throw new U("Cannot commit the transaction because it is already closed","TRANSACTION_CLOSED");if(this.#G!==void 0)await this.#G;else return;let B=$.run("COMMIT").catch((G)=>{throw x(G)});$.closeGracefully(),await B}catch($){throw x($)}finally{this.close()}}}async function u$($,B,G,X,D=!1){if(D)G.step().run("PRAGMA foreign_keys=off");let z=G.step(),Z=z.run(h0($)),W=z,L=X.map((C)=>{let H=G.step().condition(j.ok(W));if(B>=3)H.condition(j.not(j.isAutocommit(G)));let T=H.query(C);return W=H,T}),Y=G.step().condition(j.ok(W));if(B>=3)Y.condition(j.not(j.isAutocommit(G)));let w=Y.run("COMMIT");if(G.step().condition(j.not(j.ok(Y))).run("ROLLBACK").catch((C)=>{return}),D)G.step().run("PRAGMA foreign_keys=on");await G.execute();let E=[];await Z;for(let C of L){let H=await C;if(H===void 0)throw new U("Statement in a batch was not executed, probably because the transaction has been rolled back","TRANSACTION_CLOSED");E.push(l$(H))}return await w,E}function B0($){if(typeof $==="string")return new c$($);let B=new c$($.sql);if(Array.isArray($.args))B.bindIndexes($.args);else for(let[G,X]of Object.entries($.args))B.bindName(G,X);return B}function l$($){let B=$.columnNames.map((Z)=>Z??""),G=$.columnDecltypes.map((Z)=>Z??""),X=$.rows,D=$.affectedRowCount,z=$.lastInsertRowid!==void 0?$.lastInsertRowid:void 0;return new q$(B,G,X,D,z)}function x($){if($ instanceof S){let B=kz($);return new U($.message,B,void 0,$)}return $}function kz($){if($ instanceof wB&&$.code!==void 0)return $.code;else if($ instanceof N)return"HRANA_PROTO_ERROR";else if($ instanceof v)return $.cause instanceof S?kz($.cause):"HRANA_CLOSED_ERROR";else if($ instanceof y$)return"HRANA_WEBSOCKET_ERROR";else if($ instanceof K$)return"SERVER_ERROR";else if($ instanceof V1)return"PROTOCOL_VERSION_ERROR";else if($ instanceof e)return"INTERNAL_ERROR";else return"UNKNOWN"}class i${#$;#B;capacity;constructor($,B){this.#$=$,this.#B=new yz,this.capacity=B}apply($){if(this.capacity<=0)return;let B=new Set;for(let G of $){if(typeof G.sql!=="string")continue;let X=G.sql;if(X.length>=5000)continue;let D=this.#B.get(X);if(D===void 0){while(this.#B.size+1>this.capacity){let[z,Z]=this.#B.peekLru();if(B.has(Z))break;Z.close(),this.#B.delete(z)}if(this.#B.size+1<=this.capacity)D=this.#$.storeSql(X),this.#B.set(X,D)}if(D!==void 0)G.sql=D,B.add(D)}}}class yz{#$;constructor(){this.#$=new Map}get($){let B=this.#$.get($);if(B!==void 0)this.#$.delete($),this.#$.set($,B);return B}set($,B){this.#$.set($,B)}peekLru(){for(let $ of this.#$.entries())return $;return}delete($){this.#$.delete($)}get size(){return this.#$.size}}var cz=yB(A8(),1);function mz($){if($.scheme!=="wss"&&$.scheme!=="ws")throw new U(`The WebSocket client supports only "libsql:", "wss:" and "ws:" URLs, got ${JSON.stringify($.scheme+":")}. For more information, please read ${R1}`,"URL_SCHEME_NOT_SUPPORTED");if($.encryptionKey!==void 0)throw new U("Encryption key is not supported by the remote client.","ENCRYPTION_KEY_NOT_SUPPORTED");if($.scheme==="ws"&&$.tls)throw new U('A "ws:" URL cannot opt into TLS by using ?tls=1',"URL_INVALID");else if($.scheme==="wss"&&!$.tls)throw new U('A "wss:" URL cannot opt out of TLS by using ?tls=0',"URL_INVALID");let B=YB($.scheme,$.authority,$.path),G;try{G=V8(B,$.authToken)}catch(X){if(X instanceof LB){let D=$.scheme==="wss"?"https":"http",z=YB(D,$.authority,$.path);throw new U(`This environment does not support WebSockets, please switch to the HTTP client by using a "${D}:" URL (${JSON.stringify(z)}). For more information, please read ${R1}`,"WEBSOCKETS_NOT_SUPPORTED")}throw x(X)}return new jz(G,B,$.authToken,$.intMode,$.concurrency)}var hQ=60000,VQ=100;class jz{#$;#B;#G;#z;#D;closed;protocol;#X;#Z;constructor($,B,G,X,D){this.#$=B,this.#B=G,this.#G=X,this.#z=this.#W($),this.#D=void 0,this.closed=!1,this.protocol="ws",this.#Z=cz.default(D)}async limit($){return this.#Z($)}async execute($,B){let G;if(typeof $==="string")G={sql:$,args:B||[]};else G=$;return this.limit(async()=>{let X=await this.#Y();try{let D=B0(G);X.conn.sqlCache.apply([D]);let z=X.stream.query(D);X.stream.closeGracefully();let Z=await z;return l$(Z)}catch(D){throw x(D)}finally{this._closeStream(X)}})}async batch($,B="deferred"){return this.limit(async()=>{let G=await this.#Y();try{let X=$.map(B0),D=await G.conn.client.getVersion();G.conn.sqlCache.apply(X);let z=G.stream.batch(D>=3);return await u$(B,D,z,X)}catch(X){throw x(X)}finally{this._closeStream(G)}})}async migrate($){return this.limit(async()=>{let B=await this.#Y();try{let G=$.map(B0),X=await B.conn.client.getVersion(),D=B.stream.batch(X>=3);return await u$("deferred",X,D,G,!0)}catch(G){throw x(G)}finally{this._closeStream(B)}})}async transaction($="write"){return this.limit(async()=>{let B=await this.#Y();try{let G=await B.conn.client.getVersion();return new xz(this,B,$,G)}catch(G){throw this._closeStream(B),x(G)}})}async executeMultiple($){return this.limit(async()=>{let B=await this.#Y();try{let G=B.stream.sequence($);B.stream.closeGracefully(),await G}catch(G){throw x(G)}finally{this._closeStream(B)}})}sync(){throw new U("sync not supported in ws mode","SYNC_NOT_SUPPORTED")}async#Y(){if(this.closed)throw new U("The client is closed","CLIENT_CLOSED");if(new Date().valueOf()-this.#z.openTime.valueOf()>hQ&&this.#D===void 0){let X=this.#W();this.#D=X,X.client.getVersion().then((D)=>{if(this.#z!==X){if(this.#z.streamStates.size===0)this.#z.client.close()}this.#z=X,this.#D=void 0},(D)=>{this.#D=void 0})}if(this.#z.client.closed)try{if(this.#D!==void 0)this.#z=this.#D;else this.#z=this.#W()}catch(X){throw x(X)}let G=this.#z;try{if(G.useSqlCache===void 0){if(G.useSqlCache=await G.client.getVersion()>=2,G.useSqlCache)G.sqlCache.capacity=VQ}let X=G.client.openStream();X.intMode=this.#G;let D={conn:G,stream:X};return G.streamStates.add(D),D}catch(X){throw x(X)}}#W($){try{return $??=V8(this.#$,this.#B),{client:$,useSqlCache:void 0,sqlCache:new i$($,0),openTime:new Date,streamStates:new Set}}catch(B){throw x(B)}}_closeStream($){$.stream.close();let B=$.conn;if(B.streamStates.delete($),B.streamStates.size===0&&B!==this.#z)B.client.close()}close(){this.#z.client.close(),this.closed=!0}}class xz extends JB{#$;#B;constructor($,B,G,X){super(G,X);this.#$=$,this.#B=B}_getStream(){return this.#B.stream}_getSqlCache(){return this.#B.conn.sqlCache}close(){this.#$._closeStream(this.#B)}get closed(){return this.#B.stream.closed}}var vz=yB(A8(),1);function dz($){if($.scheme!=="https"&&$.scheme!=="http")throw new U(`The HTTP client supports only "libsql:", "https:" and "http:" URLs, got ${JSON.stringify($.scheme+":")}. For more information, please read ${R1}`,"URL_SCHEME_NOT_SUPPORTED");if($.encryptionKey!==void 0)throw new U("Encryption key is not supported by the remote client.","ENCRYPTION_KEY_NOT_SUPPORTED");if($.scheme==="http"&&$.tls)throw new U('A "http:" URL cannot opt into TLS by using ?tls=1',"URL_INVALID");else if($.scheme==="https"&&!$.tls)throw new U('A "https:" URL cannot opt out of TLS by using ?tls=0',"URL_INVALID");let B=YB($.scheme,$.authority,$.path);return new lz(B,$.authToken,$.intMode,$.fetch,$.concurrency)}var uz=30;class lz{#$;protocol;#B;#G;constructor($,B,G,X,D){this.#$=qz($,B,X),this.#$.intMode=G,this.protocol="http",this.#B=B,this.#G=vz.default(D)}async limit($){return this.#G($)}async execute($,B){let G;if(typeof $==="string")G={sql:$,args:B||[]};else G=$;return this.limit(async()=>{try{let X=B0(G),D,z=this.#$.openStream();try{D=z.query(X)}finally{z.closeGracefully()}let Z=await D;return l$(Z)}catch(X){throw x(X)}})}async batch($,B="deferred"){return this.limit(async()=>{try{let G=$.map(B0),X=await this.#$.getVersion(),D,z=this.#$.openStream();try{new i$(z,uz).apply(G);let L=z.batch(!1);D=u$(B,X,L,G)}finally{z.closeGracefully()}return await D}catch(G){throw x(G)}})}async migrate($){return this.limit(async()=>{try{let B=$.map(B0),G=await this.#$.getVersion(),X,D=this.#$.openStream();try{let Z=D.batch(!1);X=u$("deferred",G,Z,B,!0)}finally{D.closeGracefully()}return await X}catch(B){throw x(B)}})}async transaction($="write"){return this.limit(async()=>{try{let B=await this.#$.getVersion();return new iz(this.#$.openStream(),$,B)}catch(B){throw x(B)}})}async executeMultiple($){return this.limit(async()=>{try{let B,G=this.#$.openStream();try{B=G.sequence($)}finally{G.closeGracefully()}await B}catch(B){throw x(B)}})}sync(){throw new U("sync not supported in http mode","SYNC_NOT_SUPPORTED")}close(){this.#$.close()}get closed(){return this.#$.closed}}class iz extends JB{#$;#B;constructor($,B,G){super(B,G);this.#$=$,this.#B=new i$($,uz)}_getStream(){return this.#$}_getSqlCache(){return this.#B}close(){this.#$.close()}get closed(){return this.#$.closed}}function _z($){return JQ(WB($,!0))}function JQ($){if($.scheme==="wss"||$.scheme==="ws")return mz($);else if($.scheme==="https"||$.scheme==="http")return dz($);else return rG($)}class b{static instance;database;constructor(){this.database=_z({url:process.env.TURSO_DB_URL||":memory:",authToken:process.env.TURSO_AUTH_TOKEN})}static getInstance(){if(!b.instance)b.instance=new b;return b.instance}async executeQuery($,B=[]){return(await await this.database.execute({sql:$,args:B})).rows}}var vW=yB(xW(),1);var m6=($)=>{return $.normalize("NFD").replace(/[\u0300-\u036f]/g,"")},j6=($)=>{return $.replaceAll(" ","-")},H0=E0.getInstance();class i{static instance;pinecone;index;static getInstance(){if(!i.instance)i.instance=new i;return i.instance}constructor(){this.pinecone=new vW.Pinecone({apiKey:process.env.PINECONE_API_KEY}),this.index=this.pinecone.index(process.env.PINECONE_INDEX)}async embedPassage($){let B=H0.embedPassage($);if(B)return B;let G=(await this.pinecone.inference.embed(process.env.PINECONE_MODEL,[$],{inputType:"passage",truncate:"END"}))[0].values;return H0.saveEmbedPassage($,G),G}async embedQuery($){let B=H0.embedQuery($);if(B)return B;let G=(await this.pinecone.inference.embed(process.env.PINECONE_MODEL,[$],{inputType:"query",truncate:"END"}))[0].values;return H0.saveEmbedQuery($,G),G}async insertBook($){let B=`Titulo: ${$.Titulo}
Sinopsis: ${$.Sinopsis}
Autor: ${$.Autor}
Generos: ${$.Generos}
Paginas: ${$.Paginas}`;await this.index.namespace(process.env.PINECONE_NAMESPACE).upsert([{id:j6(m6($.Titulo)),values:await this.embedPassage(B),metadata:{titulo:$.Titulo,text:B}}])}async query($,B){let G=H0.query($,B);if(G)return G;B.vector=await this.embedQuery($);let X=await this.index.namespace(process.env.PINECONE_NAMESPACE).query(B);return H0.saveQuery($,B,X),X}async fetch($){let B=H0.fetch($);if(B)return B;let G=await this.index.namespace(process.env.PINECONE_NAMESPACE).fetch([j6(m6($))]);return H0.saveFetch($,G),G}async fetchMultiple($){let B=[];for(let X=0;X<$.length;X++)B.push(this.fetch($[X]));return await Promise.all(B)}async getEmbedding($){return(await this.fetch($)).records[j6(m6($))].values}async getEmbeddings($){return(await this.fetchMultiple($)).map((X)=>X.records[Object.keys(X.records)[0]].values)}async delete($){H0.delete($),await this.index.namespace(process.env.PINECONE_NAMESPACE).deleteOne(j6(m6($)))}async updateBook($,B){await this.delete($),await this.insertBook(B)}async similarBooks($,B=[]){let G=`Titulo: ${$.Titulo}
Sinopsis: ${$.Sinopsis}
Autor: ${$.Autor}
Generos: ${$.Generos}
Paginas: ${$.Paginas}`;return(await this.query(G,{topK:5,includeMetadata:!0,filter:{titulo:{$nin:B.concat([$.Titulo])}},vector:[]})).matches.map((D)=>D.metadata.titulo)}async getBooksNameAutocomplete($,B=25){return(await this.query($,{topK:B,includeMetadata:!0,vector:[]})).matches.map((D)=>D.metadata.titulo)}}class f{static instance;constructor(){}static getInstance(){if(!f.instance)f.instance=new f;return f.instance}async updateBook($,B){await b.getInstance().executeQuery("UPDATE Listas SET TituloLibro = ? WHERE TituloLibro = ?",[B,$])}async deleteBook($){await b.getInstance().executeQuery("DELETE FROM Listas WHERE TituloLibro = ?",[$])}async existsList($,B){let G=B?A.getInstance().getExistsListBook($,B):A.getInstance().getExistsList($);if(G)return G;let D=(await b.getInstance().executeQuery(B?"SELECT 1 FROM Listas WHERE UserID = ? AND TituloLibro = ? LIMIT 1":"SELECT 1 FROM Listas WHERE UserID = ? LIMIT 1",B?[$,B]:[$])).length>0;return B?A.getInstance().saveExistsListBook($,B,D):A.getInstance().saveExistsList($,D),D}async getList($,B,G){let X=G?A.getInstance().getList($,G,B):A.getInstance().getListNoOffset($,B);if(X)return X;let z=(await b.getInstance().executeQuery(G?`SELECT * FROM Listas WHERE userID = ? AND Estado = ? LIMIT ${M1} OFFSET ?`:"SELECT TituloLibro FROM Listas WHERE userID = ? AND Estado = ?",G?[$,B,G]:[$,B])).map((Z)=>Z.TituloLibro);return G?A.getInstance().saveList($,G,B,z):A.getInstance().saveListNoOffset($,B,z),z}async getListCount($,B){return(await b.getInstance().executeQuery("SELECT COUNT(*) as count FROM Listas WHERE UserID = ? AND Estado = ?",[$,B]))[0].count}async getLeidosOrLeyendo($){return(await b.getInstance().executeQuery("SELECT TituloLibro FROM Listas WHERE userID = ? AND (Estado = 1 OR Estado = 0)",[$])).map((G)=>{return G.TituloLibro})}async unmarkBook($,B){if(!await this.existsList($,B))return;await b.getInstance().executeQuery("DELETE FROM Listas WHERE userID = ? AND TituloLibro = ?",[$,B]);let G=A.getInstance();G.resetList($),G.resetListNoOffset($),G.resetExistsList($)}async markBook($,B,G){await b.getInstance().executeQuery("INSERT INTO Listas (userID, TituloLibro, Estado) VALUES (?, ?, ?) ON CONFLICT (userID, TituloLibro) DO UPDATE SET Estado = excluded.Estado",[$,B,G]);let X=A.getInstance();X.saveExistsList($,!0),X.resetList($),X.resetListNoOffset($)}async markPage($,B,G){await b.getInstance().executeQuery("UPDATE Listas SET Pagina = ? WHERE userID = ? AND TituloLibro = ?",[G,$,B]),A.getInstance().resetUserBookInfo($,B)}async getUserBookInfo($,B){let G=A.getInstance().getUserBookInfo($,B);if(G)return G;let X=await b.getInstance().executeQuery("SELECT Pagina, Nota FROM Listas WHERE userID = ? AND TituloLibro = ?",[$,B]);if(X.length==0)return A.getInstance().saveUserBookInfo($,B,{Pagina:-1,Nota:-1}),{Pagina:-1,Nota:-1};let D={Pagina:X[0].Pagina,Nota:X[0].Nota};return A.getInstance().saveUserBookInfo($,B,D),D}async getNotaMedia($){let B=A.getInstance().getNotaMedia($);if(B)return B;let G=await b.getInstance().executeQuery("SELECT AVG(Nota), COUNT(Nota) FROM Listas WHERE TituloLibro = ?",[$]),X={media:G[0]["AVG(Nota)"],count:G[0]["COUNT(Nota)"]};return A.getInstance().saveNotaMedia($,X),X}async setNota($,B,G){await b.getInstance().executeQuery("UPDATE Listas SET Nota = ? WHERE userID = ? AND TituloLibro = ?",[G,$,B]),A.getInstance().resetNotaMedia(B)}async deleteNota($,B){await b.getInstance().executeQuery("UPDATE Listas SET Nota = NULL WHERE userID = ? AND TituloLibro = ?",[$,B]),A.getInstance().deleteNota($,B)}async getAllIds(){return(await b.getInstance().executeQuery("SELECT DISTINCT userID FROM Listas")).map((B)=>B.userID)}async getTitleNotaPairs(){return(await b.getInstance().executeQuery("SELECT userID, TituloLibro, Nota, Estado FROM Listas WHERE Estado = 0 OR Estado = 1")).map((G)=>{return{id:G.userID,titulo:G.TituloLibro,nota:G.Nota==null?G.Estado==0?5.2:5:G.Nota}})}}class I{static instance;constructor(){}static getInstance(){if(!I.instance)I.instance=new I;return I.instance}async getAllBooks(){let $=A.getInstance().getAllBooks();if($)return $;let G=(await b.getInstance().executeQuery("SELECT Titulo FROM Libros")).map((X)=>X.Titulo);return A.getInstance().setAllBooks(G),G}async insertBook($){await Promise.all([b.getInstance().executeQuery("INSERT INTO Libros (Titulo, Autor, Generos, Paginas, Sinopsis, Imagen) VALUES (?, ?, ?, ?, ?, ?)",[$.Titulo,$.Autor,$.Generos.split(","),$.Paginas,$.Sinopsis,x6($.Imagen)]),i.getInstance().insertBook($)]),K1.getInstance().resetAll(),A.getInstance().updateCachesInsert($.Titulo);return}async getBookByTitle($){let B=A.getInstance().getBookByTitle($);if(B)return B;let X=(await b.getInstance().executeQuery("SELECT * FROM Libros WHERE Titulo = ?",[$]))[0];if(!X)return;return X.Imagen=PB(X.Imagen),A.getInstance().saveBookByTitle($,X),X}async updateBookField($,B,G){let X=await this.getBookByTitle($);if(!X)throw new Error(`Book with title "${$}" not found in update.`);X[B]=G;let D=[i.getInstance().updateBook($,X),b.getInstance().executeQuery("UPDATE Libros SET ? = ? WHERE Titulo = ?",[B,G,$])];if(B==="Titulo"&&typeof G==="string")D.push(f.getInstance().updateBook($,G));await Promise.all(D),K1.getInstance().resetAll(),h1.getInstance().resetAll(),A.getInstance().updateCachesDelete($);return}async getSimilarBooks($,B=[]){let G=await i.getInstance().similarBooks($,B),X=[];for(let z=0;z<G.length;z++)X.push(this.getBookByTitle(G[z]));return await Promise.all(X)}async removeBook($){await Promise.all([i.getInstance().delete($),b.getInstance().executeQuery("DELETE FROM Libros WHERE Titulo = ?",[$]),f.getInstance().deleteBook($)]),A.getInstance().updateCachesDelete($);return}async randomBooks($){return(await b.getInstance().executeQuery("SELECT * FROM Libros ORDER BY RANDOM() LIMIT ?",[$])).map((G)=>{return G.Imagen=PB(G.Imagen),G})}async getBooksNameAutocomplete($,B,G){if(G=G??25,!B)return await i.getInstance().getBooksNameAutocomplete($,G);let X=A.getInstance().getBooksNameAutocomplete($);if(X)return X;let D=$.trim()!=="",Z=(await b.getInstance().executeQuery(D?"SELECT Titulo FROM Libros WHERE Titulo LIKE ? ORDER BY Titulo ASC LIMIT 25":"SELECT Titulo FROM Libros ORDER BY Titulo ASC LIMIT 25",D?[`%${$}%`]:[])).map((W)=>{return W.Titulo});return A.getInstance().saveBooksNameAutocomplete($,Z),Z}}import{Events as CV}from"discord.js";var IV={name:CV.InteractionCreate,async execute($){if($.isCommand()){a6($);return}if($.isAutocomplete()){t6($);return}if($.isButton()){p6($);return}if($.isStringSelectMenu()){n6($);return}}},dW=IV;import{Events as NV}from"discord.js";var UV={name:NV.ClientReady,once:!0,async execute(){console.log("Conectado a discord")}},uW=UV;var m4={interactionCreate:dW,ready:uW};class e${client;static instance;static getInstance(){if(!e$.instance)e$.instance=new e$;return e$.instance}constructor(){this.createClient(),this.loadEvents(),this.prepareManagers(),this.login()}createClient(){this.client=new hV({intents:[j4.GuildMessages,j4.Guilds,j4.DirectMessages]})}loadEvents(){for(let $ of Object.keys(m4)){let B=m4[$];if(B.once)this.client.once(B.name,(...G)=>B.execute(...G));else this.client.on(B.name,(...G)=>B.execute(...G))}}prepareManagers(){o.getInstance(),H1.getInstance().setClient(this.client)}login(){this.client.login(process.env.DISCORD_TOKEN)}getClient(){return this.client}}e$.getInstance();export{e$ as DiscordBot};

//# debugId=8C38BEDEB7A54ACD64756E2164756E21
//# sourceMappingURL=index.js.map
